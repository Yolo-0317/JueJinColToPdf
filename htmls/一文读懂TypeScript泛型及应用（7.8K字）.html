 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“æ </title>
    <style>
        pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.codehilite .hll { background-color: #ffffcc }
.codehilite { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */

* {
    font-size: 30px;
}

img{
    display: block;
    min-width: 50%;
}  
    </style>
</head>
<body>
<h1>ä¸€æ–‡è¯»æ‡‚ TypeScript æ³›å‹åŠåº”ç”¨ï¼ˆ 7.8Kå­—ï¼‰</h1><p>è§‰å¾— TypeScript æ³›å‹æœ‰ç‚¹éš¾ï¼Œæƒ³ç³»ç»Ÿå­¦ä¹  TypeScript æ³›å‹ç›¸å…³çŸ¥è¯†çš„å°ä¼™ä¼´ä»¬çœ‹è¿‡æ¥ï¼Œ<strong>æœ¬æ–‡ä»å…«ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œå…¨æ–¹ä½å¸¦ä½ ä¸€æ­¥æ­¥å­¦ä¹  TypeScript ä¸­æ³›å‹</strong>ï¼Œè¯¦ç»†çš„å†…å®¹å¤§çº²è¯·çœ‹ä¸‹å›¾ï¼š</p>
<p></p><figure><img alt="master-ts-generic" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/10/1729b3d970e872ef~tplv-t2oaga2asx-image.image"><figcaption></figcaption></figure><p></p>
<p><strong>åŠ¨é™ï¼ˆå›¾ï¼‰ç»“åˆ</strong>ï¼Œåœ¨æ³›å‹å­¦ä¹ ä¹‹è·¯åŠ©ä½ ä¸€è‡‚ä¹‹åŠ›ï¼Œè¿˜åœ¨çŠ¹è±«ä»€ä¹ˆï¼Œèµ¶ç´§å¼€å¯ TypeScript æ³›å‹çš„å­¦ä¹ ä¹‹æ—…å§ï¼</p>
<blockquote>
<p>æƒ³å…¥é—¨ TypeScript çš„å°ä¼™ä¼´çœ‹è¿‡æ¥ï¼Œé˜¿å®å“¥ç‰¹æ„ä¸ºä½ ä»¬å‡†å¤‡çš„ â€”â€” <a target="_blank" href="https://juejin.cn/post/6844904182843965453">1.2Wå­— | äº†ä¸èµ·çš„ TypeScript å…¥é—¨æ•™ç¨‹</a>ï¼ˆ1027+ ä¸ªğŸ‘ï¼‰æ•™ç¨‹ã€‚</p>
</blockquote>
<h3 class="heading">ä¸€ã€æ³›å‹æ˜¯ä»€ä¹ˆ</h3>
<p>è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚</p>
<p><strong>åœ¨åƒ C# å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</strong></p>
<p>è®¾è®¡æ³›å‹çš„å…³é”®ç›®çš„æ˜¯åœ¨æˆå‘˜ä¹‹é—´æä¾›æœ‰æ„ä¹‰çš„çº¦æŸï¼Œè¿™äº›æˆå‘˜å¯ä»¥æ˜¯ï¼šç±»çš„å®ä¾‹æˆå‘˜ã€ç±»çš„æ–¹æ³•ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€‚</p>
<p>ä¸ºäº†ä¾¿äºå¤§å®¶æ›´å¥½åœ°ç†è§£ä¸Šè¿°çš„å†…å®¹ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥æ­¥æ­ç¤ºæ³›å‹çš„ä½œç”¨ã€‚é¦–å…ˆæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ <code>identity</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°å¹¶ç›´æ¥è¿”å›å®ƒï¼š</p>
<pre><code class="hljs javascript" lang="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> (<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-built_in">console</span>.log(identity(<span class="hljs-number">1</span>)) <span class="hljs-comment">// 1</span>
</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°† <code>identity</code> å‡½æ•°åšé€‚å½“çš„è°ƒæ•´ï¼Œä»¥æ”¯æŒ TypeScript çš„ Number ç±»å‹çš„å‚æ•°ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> (<span class="hljs-params">value: <span class="hljs-built_in">Number</span></span>) : <span class="hljs-title">Number</span> </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-built_in">console</span>.log(identity(<span class="hljs-number">1</span>)) <span class="hljs-comment">// 1</span>
</code></pre><p>è¿™é‡Œ <code>identity</code> çš„é—®é¢˜æ˜¯æˆ‘ä»¬å°† <code>Number</code> ç±»å‹åˆ†é…ç»™å‚æ•°å’Œè¿”å›ç±»å‹ï¼Œä½¿è¯¥å‡½æ•°ä»…å¯ç”¨äºè¯¥åŸå§‹ç±»å‹ã€‚ä½†è¯¥å‡½æ•°å¹¶ä¸æ˜¯å¯æ‰©å±•æˆ–é€šç”¨çš„ï¼Œå¾ˆæ˜æ˜¾è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„ã€‚</p>
<p>æˆ‘ä»¬ç¡®å®å¯ä»¥æŠŠ <code>Number</code> æ¢æˆ <code>any</code>ï¼Œæˆ‘ä»¬å¤±å»äº†å®šä¹‰åº”è¯¥è¿”å›å“ªç§ç±»å‹çš„èƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä½¿ç¼–è¯‘å™¨å¤±å»äº†ç±»å‹ä¿æŠ¤çš„ä½œç”¨ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®© <code>identity</code> å‡½æ•°å¯ä»¥é€‚ç”¨äºä»»ä½•ç‰¹å®šçš„ç±»å‹ï¼Œä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> &lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">value: T</span>) : <span class="hljs-title">T</span> </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-built_in">console</span>.log(identity&lt;<span class="hljs-built_in">Number</span>&gt;(<span class="hljs-number">1</span>)) <span class="hljs-comment">// 1</span>
</code></pre><p>å¯¹äºåˆšæ¥è§¦ TypeScript æ³›å‹çš„è¯»è€…æ¥è¯´ï¼Œé¦–æ¬¡çœ‹åˆ° <code>&lt;T&gt;</code> è¯­æ³•ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚ä½†è¿™æ²¡ä»€ä¹ˆå¯æ‹…å¿ƒçš„ï¼Œå°±åƒä¼ é€’å‚æ•°ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼ é€’äº†æˆ‘ä»¬æƒ³è¦ç”¨äºç‰¹å®šå‡½æ•°è°ƒç”¨çš„ç±»å‹ã€‚</p>
<p></p><figure><img alt="generic-type-filled" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/10/1729b3d9774a21ac~tplv-t2oaga2asx-image.image"><figcaption></figcaption></figure><p></p>
<p>å‚è€ƒä¸Šé¢çš„å›¾ç‰‡ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>identity&lt;Number&gt;(1)</code> ï¼Œ<code>Number</code> ç±»å‹å°±åƒå‚æ•° <code>1</code> ä¸€æ ·ï¼Œå®ƒå°†åœ¨å‡ºç° <code>T</code> çš„ä»»ä½•ä½ç½®å¡«å……è¯¥ç±»å‹ã€‚å›¾ä¸­ <code>&lt;T&gt;</code> å†…éƒ¨çš„ <code>T</code> è¢«ç§°ä¸ºç±»å‹å˜é‡ï¼Œå®ƒæ˜¯æˆ‘ä»¬å¸Œæœ›ä¼ é€’ç»™ identity å‡½æ•°çš„ç±»å‹å ä½ç¬¦ï¼ŒåŒæ—¶å®ƒè¢«åˆ†é…ç»™ <code>value</code> å‚æ•°ç”¨æ¥ä»£æ›¿å®ƒçš„ç±»å‹ï¼šæ­¤æ—¶ <code>T</code> å……å½“çš„æ˜¯ç±»å‹ï¼Œè€Œä¸æ˜¯ç‰¹å®šçš„ Number ç±»å‹ã€‚</p>
<p>å…¶ä¸­ <code>T</code> ä»£è¡¨ <strong>Type</strong>ï¼Œåœ¨å®šä¹‰æ³›å‹æ—¶é€šå¸¸ç”¨ä½œç¬¬ä¸€ä¸ªç±»å‹å˜é‡åç§°ã€‚ä½†å®é™…ä¸Š <code>T</code> å¯ä»¥ç”¨ä»»ä½•æœ‰æ•ˆåç§°ä»£æ›¿ã€‚é™¤äº† <code>T</code> ä¹‹å¤–ï¼Œä»¥ä¸‹æ˜¯å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š</p>
<ul>
<li>Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹ï¼›</li>
<li>Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹ï¼›</li>
<li>Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹ã€‚</li>
</ul>
<p>å…¶å®å¹¶ä¸æ˜¯åªèƒ½å®šä¹‰ä¸€ä¸ªç±»å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å¸Œæœ›å®šä¹‰çš„ä»»ä½•æ•°é‡çš„ç±»å‹å˜é‡ã€‚æ¯”å¦‚æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„ç±»å‹å˜é‡ <code>U</code>ï¼Œç”¨äºæ‰©å±•æˆ‘ä»¬å®šä¹‰çš„ <code>identity</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> &lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">value: T, message: U</span>) : <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(message);
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-built_in">console</span>.log(identity&lt;<span class="hljs-built_in">Number</span>, <span class="hljs-built_in">string</span>&gt;(<span class="hljs-number">68</span>, <span class="hljs-string">"Semlinker"</span>));
</code></pre><p></p><figure><img alt="generic-multi-type-filled" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/10/1729b3dbccc38ea7~tplv-t2oaga2asx-image.image"><figcaption></figcaption></figure><p></p>
<p>é™¤äº†ä¸ºç±»å‹å˜é‡æ˜¾å¼è®¾å®šå€¼ä¹‹å¤–ï¼Œä¸€ç§æ›´å¸¸è§çš„åšæ³•æ˜¯ä½¿ç¼–è¯‘å™¨è‡ªåŠ¨é€‰æ‹©è¿™äº›ç±»å‹ï¼Œä»è€Œä½¿ä»£ç æ›´ç®€æ´ã€‚æˆ‘ä»¬å¯ä»¥å®Œå…¨çœç•¥å°–æ‹¬å·ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> &lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">value: T, message: U</span>) : <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(message);
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-built_in">console</span>.log(identity(<span class="hljs-number">68</span>, <span class="hljs-string">"Semlinker"</span>));
</code></pre><p>å¯¹äºä¸Šè¿°ä»£ç ï¼Œç¼–è¯‘å™¨è¶³å¤Ÿèªæ˜ï¼Œèƒ½å¤ŸçŸ¥é“æˆ‘ä»¬çš„å‚æ•°ç±»å‹ï¼Œå¹¶å°†å®ƒä»¬èµ‹å€¼ç»™ T å’Œ Uï¼Œè€Œä¸éœ€è¦å¼€å‘äººå‘˜æ˜¾å¼æŒ‡å®šå®ƒä»¬ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å¼ åŠ¨å›¾ï¼Œç›´è§‚åœ°æ„Ÿå—ä¸€ä¸‹ç±»å‹ä¼ é€’çš„è¿‡ç¨‹ï¼š</p>
<p></p><figure><img alt="generic-type-filled" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/10/1729b3d9773f34ad~tplv-t2oaga2asx-image.image"><figcaption></figcaption></figure><p></p>
<p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a target="_blank" href="https://medium.com/better-programming/typescript-generics-90be93d8c292%EF%BC%89">https://medium.com/better-programming/typescript-generics-90be93d8c292ï¼‰</a></p>
<blockquote>
<p>æ„Ÿè°¢ @ä»‘ï¼ˆå‰ç«¯æ¬ç –å…šï¼‰æŒ‡å‡ºï¼Œè¯¥åŠ¨å›¾æœ‰bugã€‚</p>
<p>åŠ¨æ€å›¾æœ€åä¸€å¥é”™äº†å—ï¼Ÿconsole.log(identity([1,2,3]))è¿™é‡Œæ³¨å…¥ç±»å‹åº”è¯¥æ˜¯number[]å§ï¼Ÿ</p>
</blockquote>
<p>å¦‚ä½ æ‰€è§ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä½ ä¼ é€’ç»™å®ƒçš„ä»»ä½•ç±»å‹ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒç±»å‹åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ã€‚ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ <code>identity</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> &lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">value: T, message: U</span>) : <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(message);
  <span class="hljs-keyword">return</span> value;
}
</code></pre><p>ç›¸æ¯”ä¹‹å‰å®šä¹‰çš„ <code>identity</code> å‡½æ•°ï¼Œæ–°çš„ <code>identity</code> å‡½æ•°å¢åŠ äº†ä¸€ä¸ªç±»å‹å˜é‡ <code>U</code>ï¼Œä½†è¯¥å‡½æ•°çš„è¿”å›ç±»å‹æˆ‘ä»¬ä»ç„¶ä½¿ç”¨ <code>T</code>ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è¿”å›ä¸¤ç§ç±»å‹çš„å¯¹è±¡è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰å¤šç§æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸€ç§å°±æ˜¯ä½¿ç”¨å…ƒç»„ï¼Œå³ä¸ºå…ƒç»„è®¾ç½®é€šç”¨çš„ç±»å‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span> &lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt;(<span class="hljs-params">value: T, message: U</span>) : [<span class="hljs-title">T</span>, <span class="hljs-title">U</span>] </span>{
  <span class="hljs-keyword">return</span> [value, message];
}
</code></pre><p>è™½ç„¶ä½¿ç”¨å…ƒç»„è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ï¼Œä½†æœ‰æ²¡æœ‰å…¶å®ƒæ›´å¥½çš„æ–¹æ¡ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å£ã€‚</p>
<h3 class="heading">äºŒã€æ³›å‹æ¥å£</h3>
<p>ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œé¦–å…ˆè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºçš„ <code>identity</code> å‡½æ•°é€šç”¨ <code>Identities</code> æ¥å£ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Identities&lt;V, M&gt; {
  value: V,
  message: M
}
</code></pre><p>åœ¨ä¸Šè¿°çš„ <code>Identities</code> æ¥å£ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ç±»å‹å˜é‡ <code>V</code> å’Œ <code>M</code>ï¼Œæ¥è¿›ä¸€æ­¥è¯´æ˜æœ‰æ•ˆçš„å­—æ¯éƒ½å¯ä»¥ç”¨äºè¡¨ç¤ºç±»å‹å˜é‡ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥å°† <code>Identities</code> æ¥å£ä½œä¸º <code>identity</code> å‡½æ•°çš„è¿”å›ç±»å‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt; (<span class="hljs-params">value: T, message: U</span>): <span class="hljs-title">Identities</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt; </span>{
  <span class="hljs-built_in">console</span>.log(value + <span class="hljs-string">": "</span> + <span class="hljs-keyword">typeof</span> (value));
  <span class="hljs-built_in">console</span>.log(message + <span class="hljs-string">": "</span> + <span class="hljs-keyword">typeof</span> (message));
  <span class="hljs-keyword">let</span> identities: Identities&lt;T, U&gt; = {
    value,
    message
  };
  <span class="hljs-keyword">return</span> identities;
}

<span class="hljs-built_in">console</span>.log(identity(<span class="hljs-number">68</span>, <span class="hljs-string">"Semlinker"</span>));
</code></pre><p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œåœ¨æ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š</p>
<pre><code class="hljs shell" lang="shell">68: number
Semlinker: string
{value: 68, message: "Semlinker"}
</code></pre><p>æ³›å‹é™¤äº†å¯ä»¥åº”ç”¨åœ¨å‡½æ•°å’Œæ¥å£ä¹‹å¤–ï¼Œå®ƒä¹Ÿå¯ä»¥åº”ç”¨åœ¨ç±»ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹åœ¨ç±»ä¸­å¦‚ä½•ä½¿ç”¨æ³›å‹ã€‚</p>
<h3 class="heading">ä¸‰ã€æ³›å‹ç±»</h3>
<p>åœ¨ç±»ä¸­ä½¿ç”¨æ³›å‹ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç±»ååé¢ï¼Œä½¿ç”¨ <code>&lt;T, ...&gt;</code> çš„è¯­æ³•å®šä¹‰ä»»æ„å¤šä¸ªç±»å‹å˜é‡ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> GenericInterface&lt;U&gt; {
  value: U
  getIdentity: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> U
}

<span class="hljs-keyword">class</span> IdentityClass&lt;T&gt; <span class="hljs-keyword">implements</span> GenericInterface&lt;T&gt; {
  value: T

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">value: T</span>) {
    <span class="hljs-keyword">this</span>.value = value
  }

  getIdentity(): T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value
  }

}

<span class="hljs-keyword">const</span> myNumberClass = <span class="hljs-keyword">new</span> IdentityClass&lt;<span class="hljs-built_in">Number</span>&gt;(<span class="hljs-number">68</span>);
<span class="hljs-built_in">console</span>.log(myNumberClass.getIdentity()); <span class="hljs-comment">// 68</span>

<span class="hljs-keyword">const</span> myStringClass = <span class="hljs-keyword">new</span> IdentityClass&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"Semlinker!"</span>);
<span class="hljs-built_in">console</span>.log(myStringClass.getIdentity()); <span class="hljs-comment">// Semlinker!</span>
</code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥å®ä¾‹åŒ– <code>myNumberClass</code> ä¸ºä¾‹ï¼Œæ¥åˆ†æä¸€ä¸‹å…¶è°ƒç”¨è¿‡ç¨‹ï¼š</p>
<ul>
<li>åœ¨å®ä¾‹åŒ– <code>IdentityClass</code> å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¼ å…¥ <code>Number</code> ç±»å‹å’Œæ„é€ å‡½æ•°å‚æ•°å€¼ <code>68</code>ï¼›</li>
<li>ä¹‹ååœ¨ <code>IdentityClass</code> ç±»ä¸­ï¼Œç±»å‹å˜é‡ <code>T</code> çš„å€¼å˜æˆ <code>Number</code> ç±»å‹ï¼›</li>
<li><code>IdentityClass</code> ç±»å®ç°äº† <code>GenericInterface&lt;T&gt;</code>ï¼Œè€Œæ­¤æ—¶ <code>T</code> è¡¨ç¤º <code>Number</code> ç±»å‹ï¼Œå› æ­¤ç­‰ä»·äºè¯¥ç±»å®ç°äº† <code>GenericInterface&lt;Number&gt;</code> æ¥å£ï¼›</li>
<li>è€Œå¯¹äº <code>GenericInterface&lt;U&gt;</code> æ¥å£æ¥è¯´ï¼Œç±»å‹å˜é‡ <code>U</code> ä¹Ÿå˜æˆäº† <code>Number</code>ã€‚è¿™é‡Œæˆ‘æœ‰æ„ä½¿ç”¨ä¸åŒçš„å˜é‡åï¼Œä»¥è¡¨æ˜ç±»å‹å€¼æ²¿é“¾å‘ä¸Šä¼ æ’­ï¼Œä¸”ä¸å˜é‡åæ— å…³ã€‚</li>
</ul>
<p>æ³›å‹ç±»å¯ç¡®ä¿åœ¨æ•´ä¸ªç±»ä¸­ä¸€è‡´åœ°ä½¿ç”¨æŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°åœ¨ä½¿ç”¨ Typescript çš„ React é¡¹ç›®ä¸­ä½¿ç”¨äº†ä»¥ä¸‹çº¦å®šï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">type</span> Props = {
  className?: <span class="hljs-built_in">string</span>
   ...
};

<span class="hljs-keyword">type</span> State = {
  submitted?: bool
   ...
};

<span class="hljs-keyword">class</span> MyComponent <span class="hljs-keyword">extends</span> React.Component&lt;Props, State&gt; {
   ...
}
</code></pre><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†æ³›å‹ä¸ React ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®ä¿ç»„ä»¶çš„ props å’Œ state æ˜¯ç±»å‹å®‰å…¨çš„ã€‚</p>
<p>ç›¸ä¿¡çœ‹åˆ°è¿™é‡Œä¸€äº›è¯»è€…ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘ä»¬åœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨æ³›å‹å‘¢ï¼Ÿé€šå¸¸åœ¨å†³å®šæ˜¯å¦ä½¿ç”¨æ³›å‹æ—¶ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸¤ä¸ªå‚è€ƒæ ‡å‡†ï¼š</p>
<ul>
<li>å½“ä½ çš„å‡½æ•°ã€æ¥å£æˆ–ç±»å°†å¤„ç†å¤šç§æ•°æ®ç±»å‹æ—¶ï¼›</li>
<li>å½“å‡½æ•°ã€æ¥å£æˆ–ç±»åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨è¯¥æ•°æ®ç±»å‹æ—¶ã€‚</li>
</ul>
<p>å¾ˆæœ‰å¯èƒ½ä½ æ²¡æœ‰åŠæ³•ä¿è¯åœ¨é¡¹ç›®æ—©æœŸå°±ä½¿ç”¨æ³›å‹çš„ç»„ä»¶ï¼Œä½†æ˜¯éšç€é¡¹ç›®çš„å‘å±•ï¼Œç»„ä»¶çš„åŠŸèƒ½é€šå¸¸ä¼šè¢«æ‰©å±•ã€‚è¿™ç§å¢åŠ çš„å¯æ‰©å±•æ€§æœ€ç»ˆå¾ˆå¯èƒ½ä¼šæ»¡è¶³ä¸Šè¿°ä¸¤ä¸ªæ¡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼•å…¥æ³›å‹å°†æ¯”å¤åˆ¶ç»„ä»¶æ¥æ»¡è¶³ä¸€ç³»åˆ—æ•°æ®ç±»å‹æ›´å¹²å‡€ã€‚</p>
<p>æˆ‘ä»¬å°†åœ¨æœ¬æ–‡çš„åé¢æ¢è®¨æ›´å¤šæ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„ç”¨ä¾‹ã€‚ä¸è¿‡åœ¨è¿™æ ·åšä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹ Typescript æ³›å‹æä¾›çš„å…¶ä»–åŠŸèƒ½ã€‚</p>
<h3 class="heading">å››ã€æ³›å‹çº¦æŸ</h3>
<p>æœ‰æ—¶æˆ‘ä»¬å¯èƒ½å¸Œæœ›é™åˆ¶æ¯ä¸ªç±»å‹å˜é‡æ¥å—çš„ç±»å‹æ•°é‡ï¼Œè¿™å°±æ˜¯æ³›å‹çº¦æŸçš„ä½œç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾å‡ ä¸ªä¾‹å­ï¼Œä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨æ³›å‹çº¦æŸã€‚</p>
<h4 class="heading">4.1 ç¡®ä¿å±æ€§å­˜åœ¨</h4>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›ç±»å‹å˜é‡å¯¹åº”çš„ç±»å‹ä¸Šå­˜åœ¨æŸäº›å±æ€§ã€‚è¿™æ—¶ï¼Œé™¤éæˆ‘ä»¬æ˜¾å¼åœ°å°†ç‰¹å®šå±æ€§å®šä¹‰ä¸ºç±»å‹å˜é‡ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸ä¼šçŸ¥é“å®ƒä»¬çš„å­˜åœ¨ã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯åœ¨å¤„ç†å­—ç¬¦ä¸²æˆ–æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬ä¼šå‡è®¾ <code>length</code> å±æ€§æ˜¯å¯ç”¨çš„ã€‚è®©æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ <code>identity</code> å‡½æ•°å¹¶å°è¯•è¾“å‡ºå‚æ•°çš„é•¿åº¦ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(arg.length); <span class="hljs-comment">// Error</span>
  <span class="hljs-keyword">return</span> arg;
}
</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†ä¸ä¼šçŸ¥é“ <code>T</code> ç¡®å®å«æœ‰ <code>length</code> å±æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¯ä»¥å°†ä»»ä½•ç±»å‹èµ‹ç»™ç±»å‹å˜é‡ <code>T</code> çš„æƒ…å†µä¸‹ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è®©ç±»å‹å˜é‡ <code>extends</code> ä¸€ä¸ªå«æœ‰æˆ‘ä»¬æ‰€éœ€å±æ€§çš„æ¥å£ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Length {
  length: <span class="hljs-built_in">number</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span> <span class="hljs-title">extends</span> <span class="hljs-title">Length</span>&gt;(<span class="hljs-params">arg: T</span>): <span class="hljs-title">T</span> </span>{
  <span class="hljs-built_in">console</span>.log(arg.length); <span class="hljs-comment">// å¯ä»¥è·å–lengthå±æ€§</span>
  <span class="hljs-keyword">return</span> arg;
}
</code></pre><p><code>T extends Length</code> ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æ”¯æŒå·²ç»å®ç° <code>Length</code> æ¥å£çš„ä»»ä½•ç±»å‹ã€‚ä¹‹åï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸å«æœ‰ <code>length</code> å±æ€§çš„å¯¹è±¡ä½œä¸ºå‚æ•°è°ƒç”¨  <code>identity</code> å‡½æ•°æ—¶ï¼ŒTypeScript ä¼šæç¤ºç›¸å…³çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">identity(<span class="hljs-number">68</span>); <span class="hljs-comment">// Error</span>
<span class="hljs-comment">// Argument of type '68' is not assignable to parameter of type 'Length'.(2345)</span>
</code></pre><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>,</code> å·æ¥åˆ†éš”å¤šç§çº¦æŸç±»å‹ï¼Œæ¯”å¦‚ï¼š<code>&lt;T extends Length, Type2, Type3&gt;</code>ã€‚è€Œå¯¹äºä¸Šè¿°çš„ <code>length</code> å±æ€§é—®é¢˜æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ˜¾å¼åœ°å°†å˜é‡è®¾ç½®ä¸ºæ•°ç»„ç±»å‹ï¼Œä¹Ÿå¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: T[]</span>): <span class="hljs-title">T</span>[] </span>{
   <span class="hljs-built_in">console</span>.log(arg.length);  
   <span class="hljs-keyword">return</span> arg; 
}

<span class="hljs-comment">// or</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">arg: <span class="hljs-built_in">Array</span>&lt;T&gt;</span>): <span class="hljs-title">Array</span>&lt;<span class="hljs-title">T</span>&gt; </span>{      
  <span class="hljs-built_in">console</span>.log(arg.length);
  <span class="hljs-keyword">return</span> arg; 
}
</code></pre><h4 class="heading">4.2 æ£€æŸ¥å¯¹è±¡ä¸Šçš„é”®æ˜¯å¦å­˜åœ¨</h4>
<p>æ³›å‹çº¦æŸçš„å¦ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯æ£€æŸ¥å¯¹è±¡ä¸Šçš„é”®æ˜¯å¦å­˜åœ¨ã€‚ä¸è¿‡åœ¨çœ‹å…·ä½“ç¤ºä¾‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—æ¥äº†è§£ä¸€ä¸‹ <code>keyof</code> æ“ä½œç¬¦ï¼Œ<strong><code>keyof</code> æ“ä½œç¬¦æ˜¯åœ¨ TypeScript 2.1 ç‰ˆæœ¬å¼•å…¥çš„ï¼Œè¯¥æ“ä½œç¬¦å¯ä»¥ç”¨äºè·å–æŸç§ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ã€‚</strong> "è€³å¬ä¸ºè™šï¼Œçœ¼è§ä¸ºå®"ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ª <code>keyof</code> çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Person {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
  location: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> K1 = keyof Person; <span class="hljs-comment">// "name" | "age" | "location"</span>
<span class="hljs-keyword">type</span> K2 = keyof Person[];  <span class="hljs-comment">// number | "length" | "push" | "concat" | ...</span>
<span class="hljs-keyword">type</span> K3 = keyof { [x: <span class="hljs-built_in">string</span>]: Person };  <span class="hljs-comment">// string | number</span>
</code></pre><p>é€šè¿‡ <code>keyof</code> æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–æŒ‡å®šç±»å‹çš„æ‰€æœ‰é”®ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç»“åˆå‰é¢ä»‹ç»çš„ <code>extends</code> çº¦æŸï¼Œå³é™åˆ¶è¾“å…¥çš„å±æ€§ååŒ…å«åœ¨ <code>keyof</code> è¿”å›çš„è”åˆç±»å‹ä¸­ã€‚å…·ä½“çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K</span>): <span class="hljs-title">T</span>[<span class="hljs-title">K</span>] </span>{
  <span class="hljs-keyword">return</span> obj[key];
}
</code></pre><p>åœ¨ä»¥ä¸Šçš„ <code>getProperty</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>K extends keyof T</code> ç¡®ä¿å‚æ•° key ä¸€å®šæ˜¯å¯¹è±¡ä¸­å«æœ‰çš„é”®ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ç®€å•è°ƒç”¨ <code>let value = obj[key];</code> ä¸åŒã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <code>getProperty</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">enum</span> Difficulty {
  Easy,
  Intermediate,
  Hard
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProperty</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">obj: T, key: K</span>): <span class="hljs-title">T</span>[<span class="hljs-title">K</span>] </span>{
  <span class="hljs-keyword">return</span> obj[key];
}

<span class="hljs-keyword">let</span> tsInfo = {
   name: <span class="hljs-string">"Typescript"</span>,
   supersetOf: <span class="hljs-string">"Javascript"</span>,
   difficulty: Difficulty.Intermediate
}
 
<span class="hljs-keyword">let</span> difficulty: Difficulty = 
  getProperty(tsInfo, <span class="hljs-string">'difficulty'</span>); <span class="hljs-comment">// OK</span>

<span class="hljs-keyword">let</span> supersetOf: <span class="hljs-built_in">string</span> = 
  getProperty(tsInfo, <span class="hljs-string">'superset_of'</span>); <span class="hljs-comment">// Error</span>
</code></pre><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œå¯¹äº <code>getProperty(tsInfo, 'superset_of')</code> è¿™ä¸ªè¡¨è¾¾å¼ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs bash" lang="bash">Argument of <span class="hljs-built_in">type</span> <span class="hljs-string">'"superset_of"'</span> is not assignable to parameter of <span class="hljs-built_in">type</span> 
<span class="hljs-string">'"difficulty" | "name" | "supersetOf"'</span>.(2345)
</code></pre><p>å¾ˆæ˜æ˜¾é€šè¿‡ä½¿ç”¨æ³›å‹çº¦æŸï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæˆ‘ä»¬å°±å¯ä»¥æå‰å‘ç°é”™è¯¯ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„å¥å£®æ€§å’Œç¨³å®šæ€§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹æ³›å‹å‚æ•°é»˜è®¤ç±»å‹ã€‚</p>
<h3 class="heading">äº”ã€æ³›å‹å‚æ•°é»˜è®¤ç±»å‹</h3>
<p>åœ¨ TypeScript 2.3 ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ³›å‹ä¸­çš„ç±»å‹å‚æ•°æŒ‡å®šé»˜è®¤ç±»å‹ã€‚å½“ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰åœ¨ä»£ç ä¸­ç›´æ¥æŒ‡å®šç±»å‹å‚æ•°ï¼Œä»å®é™…å€¼å‚æ•°ä¸­ä¹Ÿæ— æ³•æ¨æ–­å‡ºç±»å‹æ—¶ï¼Œè¿™ä¸ªé»˜è®¤ç±»å‹å°±ä¼šèµ·ä½œç”¨ã€‚</p>
<p>æ³›å‹å‚æ•°é»˜è®¤ç±»å‹ä¸æ™®é€šå‡½æ•°é»˜è®¤å€¼ç±»ä¼¼ï¼Œå¯¹åº”çš„è¯­æ³•å¾ˆç®€å•ï¼Œå³ <code>&lt;T=Default Type&gt;</code>ï¼Œå¯¹åº”çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> A&lt;T=string&gt; {
  name: T;
}

<span class="hljs-keyword">const</span> strA: A = { name: <span class="hljs-string">"Semlinker"</span> };
<span class="hljs-keyword">const</span> numB: A&lt;<span class="hljs-built_in">number</span>&gt; = { name: <span class="hljs-number">101</span> };
</code></pre><p>æ³›å‹å‚æ•°çš„é»˜è®¤ç±»å‹éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>æœ‰é»˜è®¤ç±»å‹çš„ç±»å‹å‚æ•°è¢«è®¤ä¸ºæ˜¯å¯é€‰çš„ã€‚</li>
<li>å¿…é€‰çš„ç±»å‹å‚æ•°ä¸èƒ½åœ¨å¯é€‰çš„ç±»å‹å‚æ•°åã€‚</li>
<li>å¦‚æœç±»å‹å‚æ•°æœ‰çº¦æŸï¼Œç±»å‹å‚æ•°çš„é»˜è®¤ç±»å‹å¿…é¡»æ»¡è¶³è¿™ä¸ªçº¦æŸã€‚</li>
<li>å½“æŒ‡å®šç±»å‹å®å‚æ—¶ï¼Œä½ åªéœ€è¦æŒ‡å®šå¿…é€‰ç±»å‹å‚æ•°çš„ç±»å‹å®å‚ã€‚ æœªæŒ‡å®šçš„ç±»å‹å‚æ•°ä¼šè¢«è§£æä¸ºå®ƒä»¬çš„é»˜è®¤ç±»å‹ã€‚</li>
<li>å¦‚æœæŒ‡å®šäº†é»˜è®¤ç±»å‹ï¼Œä¸”ç±»å‹æ¨æ–­æ— æ³•é€‰æ‹©ä¸€ä¸ªå€™é€‰ç±»å‹ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨é»˜è®¤ç±»å‹ä½œä¸ºæ¨æ–­ç»“æœã€‚</li>
<li>ä¸€ä¸ªè¢«ç°æœ‰ç±»æˆ–æ¥å£åˆå¹¶çš„ç±»æˆ–è€…æ¥å£çš„å£°æ˜å¯ä»¥ä¸ºç°æœ‰ç±»å‹å‚æ•°å¼•å…¥é»˜è®¤ç±»å‹ã€‚</li>
<li>ä¸€ä¸ªè¢«ç°æœ‰ç±»æˆ–æ¥å£åˆå¹¶çš„ç±»æˆ–è€…æ¥å£çš„å£°æ˜å¯ä»¥å¼•å…¥æ–°çš„ç±»å‹å‚æ•°ï¼Œåªè¦å®ƒæŒ‡å®šäº†é»˜è®¤ç±»å‹ã€‚</li>
</ul>
<h3 class="heading">å…­ã€æ³›å‹æ¡ä»¶ç±»å‹</h3>
<p>åœ¨ TypeScript 2.8 ä¸­å¼•å…¥äº†æ¡ä»¶ç±»å‹ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ ¹æ®æŸäº›æ¡ä»¶å¾—åˆ°ä¸åŒçš„ç±»å‹ï¼Œè¿™é‡Œæ‰€è¯´çš„æ¡ä»¶æ˜¯ç±»å‹å…¼å®¹æ€§çº¦æŸã€‚å°½ç®¡ä»¥ä¸Šä»£ç ä¸­ä½¿ç”¨äº† <code>extends</code> å…³é”®å­—ï¼Œä¹Ÿä¸ä¸€å®šè¦å¼ºåˆ¶æ»¡è¶³ç»§æ‰¿å…³ç³»ï¼Œè€Œæ˜¯æ£€æŸ¥æ˜¯å¦æ»¡è¶³ç»“æ„å…¼å®¹æ€§ã€‚</p>
<p>æ¡ä»¶ç±»å‹ä¼šä»¥ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç±»å‹å…³ç³»æ£€æµ‹ï¼Œä»è€Œåœ¨ä¸¤ç§ç±»å‹ä¸­é€‰æ‹©å…¶ä¸€ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">T <span class="hljs-keyword">extends</span> U ? X : Y
</code></pre><p>ä»¥ä¸Šè¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼šè‹¥ <code>T</code> èƒ½å¤Ÿèµ‹å€¼ç»™ <code>U</code>ï¼Œé‚£ä¹ˆç±»å‹æ˜¯ <code>X</code>ï¼Œå¦åˆ™ä¸º <code>Y</code>ã€‚åœ¨æ¡ä»¶ç±»å‹è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜ä¼šç»“åˆ <code>infer</code> å…³é”®å­—ï¼Œå®ç°ç±»å‹æŠ½å–ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Dictionary&lt;T = any&gt; {
  [key: <span class="hljs-built_in">string</span>]: T;
}
 
<span class="hljs-keyword">type</span> StrDict = Dictionary&lt;<span class="hljs-built_in">string</span>&gt;

<span class="hljs-keyword">type</span> DictMember&lt;T&gt; = T <span class="hljs-keyword">extends</span> Dictionary&lt;infer V&gt; ? V : never
<span class="hljs-keyword">type</span> StrDictMember = DictMember&lt;StrDict&gt; <span class="hljs-comment">// string</span>
</code></pre><p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå½“ç±»å‹ T æ»¡è¶³ <code>T extends Dictionary</code> çº¦æŸæ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>infer</code> å…³é”®å­—å£°æ˜äº†ä¸€ä¸ªç±»å‹å˜é‡ Vï¼Œå¹¶è¿”å›è¯¥ç±»å‹ï¼Œå¦åˆ™è¿”å› <code>never</code> ç±»å‹ã€‚</p>
<blockquote>
<p>åœ¨ TypeScript ä¸­ï¼Œ<code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ <code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚</p>
<p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ²¡æœ‰ç±»å‹æ˜¯ <code>never</code> çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ <code>never</code> ç±»å‹ï¼ˆé™¤äº† <code>never</code> æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ <code>any</code> ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ <code>never</code>ã€‚</p>
</blockquote>
<p>é™¤äº†ä¸Šè¿°çš„åº”ç”¨å¤–ï¼Œåˆ©ç”¨æ¡ä»¶ç±»å‹å’Œ <code>infer</code> å…³é”®å­—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ–¹ä¾¿åœ°å®ç°è·å– Promise å¯¹è±¡çš„è¿”å›å€¼ç±»å‹ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringPromise</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, Semlinker!"</span>;
}

<span class="hljs-keyword">interface</span> Person {
  name: <span class="hljs-built_in">string</span>;
  age: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">personPromise</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> { name: <span class="hljs-string">"Semlinker"</span>, age: <span class="hljs-number">30</span> } <span class="hljs-keyword">as</span> Person;
}

<span class="hljs-keyword">type</span> PromiseType&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">args: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">Promise</span>&lt;T&gt;;
<span class="hljs-keyword">type</span> UnPromisify&lt;T&gt; = T <span class="hljs-keyword">extends</span> PromiseType&lt;infer U&gt; ? U : never;

<span class="hljs-keyword">type</span> extractStringPromise = UnPromisify&lt;<span class="hljs-keyword">typeof</span> stringPromise&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> extractPersonPromise = UnPromisify&lt;<span class="hljs-keyword">typeof</span> personPromise&gt;; <span class="hljs-comment">// Person</span>
</code></pre><h3 class="heading">ä¸ƒã€æ³›å‹å·¥å…·ç±»å‹</h3>
<p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚å‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œè¿™é‡Œæˆ‘ä»¬åªç®€å•ä»‹ç»å…¶ä¸­å‡ ä¸ªå¸¸ç”¨çš„å·¥å…·ç±»å‹ã€‚</p>
<h4 class="heading">7.1 Partial</h4>
<p><code>Partial&lt;T&gt;</code> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ <code>?</code>ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">/**
 * node_modules/typescript/lib/lib.es5.d.ts
 * Make all properties in T optional
 */</span>
<span class="hljs-keyword">type</span> Partial&lt;T&gt; = {
    [P <span class="hljs-keyword">in</span> keyof T]?: T[P];
};
</code></pre><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ <code>keyof T</code> æ‹¿åˆ° <code>T</code> çš„æ‰€æœ‰å±æ€§åï¼Œç„¶åä½¿ç”¨ <code>in</code> è¿›è¡Œéå†ï¼Œå°†å€¼èµ‹ç»™ <code>P</code>ï¼Œæœ€åé€šè¿‡ <code>T[P]</code> å–å¾—ç›¸åº”çš„å±æ€§å€¼ã€‚ä¸­é—´çš„ <code>?</code> å·ï¼Œç”¨äºå°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Todo {
  title: <span class="hljs-built_in">string</span>;
  description: <span class="hljs-built_in">string</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateTodo</span>(<span class="hljs-params">todo: Todo, fieldsToUpdate: Partial&lt;Todo&gt;</span>) </span>{
  <span class="hljs-keyword">return</span> { ...todo, ...fieldsToUpdate };
}

<span class="hljs-keyword">const</span> todo1 = {
  title: <span class="hljs-string">"organize desk"</span>,
  description: <span class="hljs-string">"clear clutter"</span>
};

<span class="hljs-keyword">const</span> todo2 = updateTodo(todo1, {
  description: <span class="hljs-string">"throw out trash"</span>
});
</code></pre><p>åœ¨ä¸Šé¢çš„ <code>updateTodo</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ <code>Partial&lt;T&gt;</code> å·¥å…·ç±»å‹ï¼Œå®šä¹‰ <code>fieldsToUpdate</code> çš„ç±»å‹ä¸º <code>Partial&lt;Todo&gt;</code>ï¼Œå³ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">{
   title?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;
   description?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;
}
</code></pre><h4 class="heading">7.2 Record</h4>
<p><code>Record&lt;K extends keyof any, T&gt;</code> çš„ä½œç”¨æ˜¯å°† <code>K</code> ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼è½¬åŒ–ä¸º <code>T</code> ç±»å‹ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">/**
 * node_modules/typescript/lib/lib.es5.d.ts
 * Construct a type with a set of properties K of type T
 */</span>
<span class="hljs-keyword">type</span> Record&lt;K <span class="hljs-keyword">extends</span> keyof <span class="hljs-built_in">any</span>, T&gt; = {
    [P <span class="hljs-keyword">in</span> K]: T;
};
</code></pre><p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> PageInfo {
  title: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">type</span> Page = <span class="hljs-string">"home"</span> | <span class="hljs-string">"about"</span> | <span class="hljs-string">"contact"</span>;

<span class="hljs-keyword">const</span> x: Record&lt;Page, PageInfo&gt; = {
  about: { title: <span class="hljs-string">"about"</span> },
  contact: { title: <span class="hljs-string">"contact"</span> },
  home: { title: <span class="hljs-string">"home"</span> }
};
</code></pre><h4 class="heading">7.3 Pick</h4>
<p><code>Pick&lt;T, K extends keyof T&gt;</code> çš„ä½œç”¨æ˜¯å°†æŸä¸ªç±»å‹ä¸­çš„å­å±æ€§æŒ‘å‡ºæ¥ï¼Œå˜æˆåŒ…å«è¿™ä¸ªç±»å‹éƒ¨åˆ†å±æ€§çš„å­ç±»å‹ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span>

<span class="hljs-comment">/**
 * From T, pick a set of properties whose keys are in the union K
 */</span>
<span class="hljs-keyword">type</span> Pick&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = {
    [P <span class="hljs-keyword">in</span> K]: T[P];
};
</code></pre><p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Todo {
  title: <span class="hljs-built_in">string</span>;
  description: <span class="hljs-built_in">string</span>;
  completed: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">type</span> TodoPreview = Pick&lt;Todo, <span class="hljs-string">"title"</span> | <span class="hljs-string">"completed"</span>&gt;;

<span class="hljs-keyword">const</span> todo: TodoPreview = {
  title: <span class="hljs-string">"Clean room"</span>,
  completed: <span class="hljs-literal">false</span>
};
</code></pre><h4 class="heading">7.4 Exclude</h4>
<p><code>Exclude&lt;T, U&gt;</code> çš„ä½œç”¨æ˜¯å°†æŸä¸ªç±»å‹ä¸­å±äºå¦ä¸€ä¸ªçš„ç±»å‹ç§»é™¤æ‰ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span>

<span class="hljs-comment">/**
 * Exclude from T those types that are assignable to U
 */</span>
<span class="hljs-keyword">type</span> Exclude&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? never : T;
</code></pre><p>å¦‚æœ <code>T</code> èƒ½èµ‹å€¼ç»™ <code>U</code> ç±»å‹çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å› <code>never</code> ç±»å‹ï¼Œå¦åˆ™è¿”å› <code>T</code> ç±»å‹ã€‚æœ€ç»ˆå®ç°çš„æ•ˆæœå°±æ˜¯å°† <code>T</code> ä¸­æŸäº›å±äº <code>U</code> çš„ç±»å‹ç§»é™¤æ‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">type</span> T0 = Exclude&lt;<span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span> | <span class="hljs-string">"c"</span>, <span class="hljs-string">"a"</span>&gt;; <span class="hljs-comment">// "b" | "c"</span>
<span class="hljs-keyword">type</span> T1 = Exclude&lt;<span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span> | <span class="hljs-string">"c"</span>, <span class="hljs-string">"a"</span> | <span class="hljs-string">"b"</span>&gt;; <span class="hljs-comment">// "c"</span>
<span class="hljs-keyword">type</span> T2 = Exclude&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; <span class="hljs-built_in">void</span></span>), <span class="hljs-params">Function</span>&gt;; // <span class="hljs-params">string</span> | <span class="hljs-params">number</span>
</span></code></pre><h4 class="heading">7.5 ReturnType</h4>
<p><code>ReturnType&lt;T&gt;</code> çš„ä½œç”¨æ˜¯ç”¨äºè·å–å‡½æ•° <code>T</code> çš„è¿”å›ç±»å‹ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">// node_modules/typescript/lib/lib.es5.d.ts</span>

<span class="hljs-comment">/**
 * Obtain the return type of a function type
 */</span>
<span class="hljs-keyword">type</span> ReturnType&lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;
</code></pre><p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">type</span> T0 = ReturnType&lt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> T1 = ReturnType&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// void</span>
<span class="hljs-keyword">type</span> T2 = ReturnType&lt;&lt;T&gt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> T&gt;; <span class="hljs-comment">// {}</span>
<span class="hljs-keyword">type</span> T3 = ReturnType&lt;&lt;T <span class="hljs-keyword">extends</span> U, U <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>[]&gt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> T&gt;; <span class="hljs-comment">// number[]</span>
<span class="hljs-keyword">type</span> T4 = ReturnType&lt;<span class="hljs-built_in">any</span>&gt;; <span class="hljs-comment">// any</span>
<span class="hljs-keyword">type</span> T5 = ReturnType&lt;never&gt;; <span class="hljs-comment">// any</span>
<span class="hljs-keyword">type</span> T6 = ReturnType&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// Error</span>
<span class="hljs-keyword">type</span> T7 = ReturnType&lt;<span class="hljs-built_in">Function</span>&gt;; <span class="hljs-comment">// Error</span>
</code></pre><p>ç®€å•ä»‹ç»äº†æ³›å‹å·¥å…·ç±»å‹ï¼Œæœ€åæˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<h3 class="heading">å…«ã€ä½¿ç”¨æ³›å‹åˆ›å»ºå¯¹è±¡</h3>
<h4 class="heading">8.1 æ„é€ ç­¾å</h4>
<p>æœ‰æ—¶ï¼Œæ³›å‹ç±»å¯èƒ½éœ€è¦åŸºäºä¼ å…¥çš„æ³›å‹ T æ¥åˆ›å»ºå…¶ç±»å‹ç›¸å…³çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">class</span> FirstClass {
  id: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;
}

<span class="hljs-keyword">class</span> SecondClass {
  name: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;
}

<span class="hljs-keyword">class</span> GenericCreator&lt;T&gt; {
  create(): T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> T();
  }
}

<span class="hljs-keyword">const</span> creator1 = <span class="hljs-keyword">new</span> GenericCreator&lt;FirstClass&gt;();
<span class="hljs-keyword">const</span> firstClass: FirstClass = creator1.create();

<span class="hljs-keyword">const</span> creator2 = <span class="hljs-keyword">new</span> GenericCreator&lt;SecondClass&gt;();
<span class="hljs-keyword">const</span> secondClass: SecondClass = creator2.create();
</code></pre><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ™®é€šç±»å’Œä¸€ä¸ªæ³›å‹ç±» <code>GenericCreator&lt;T&gt;</code>ã€‚åœ¨é€šç”¨çš„ <code>GenericCreator</code> æ³›å‹ç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>create</code> çš„æˆå‘˜æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šä½¿ç”¨ new å…³é”®å­—æ¥è°ƒç”¨ä¼ å…¥çš„å®é™…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œæ¥åˆ›å»ºå¯¹åº”çš„å¯¹è±¡ã€‚ä½†å¯æƒœçš„æ˜¯ï¼Œä»¥ä¸Šä»£ç å¹¶ä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œå¯¹äºä»¥ä¸Šä»£ç ï¼Œåœ¨ <strong>TypeScript v3.9.2</strong> ç¼–è¯‘å™¨ä¸‹ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š</p>
<pre><code class="hljs bash" lang="bash"><span class="hljs-string">'T'</span> only refers to a <span class="hljs-built_in">type</span>, but is being used as a value here.
</code></pre><p>è¿™ä¸ªé”™è¯¯çš„æ„æ€æ˜¯ï¼š<code>T</code> ç±»å‹ä»…æŒ‡ç±»å‹ï¼Œä½†æ­¤å¤„è¢«ç”¨ä½œå€¼ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ ¹æ® TypeScript æ–‡æ¡£ï¼Œä¸ºäº†ä½¿é€šç”¨ç±»èƒ½å¤Ÿåˆ›å»º T ç±»å‹çš„å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å…¶æ„é€ å‡½æ•°æ¥å¼•ç”¨ T ç±»å‹ã€‚å¯¹äºä¸Šè¿°é—®é¢˜ï¼Œåœ¨ä»‹ç»å…·ä½“çš„è§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹æ„é€ ç­¾åã€‚</p>
<p>åœ¨ TypeScript æ¥å£ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>new</code> å…³é”®å­—æ¥æè¿°ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Point {
  <span class="hljs-keyword">new</span> (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): Point;
}
</code></pre><p>ä»¥ä¸Šæ¥å£ä¸­çš„ <code>new (x: number, y: number)</code> æˆ‘ä»¬ç§°ä¹‹ä¸ºæ„é€ ç­¾åï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><em>ConstructSignature:</em>
â€ƒ<code>new</code>â€ƒ<em>TypeParametersopt</em>â€ƒ<code>(</code>â€ƒ<em>ParameterListopt</em>â€ƒ<code>)</code>â€ƒ<em>TypeAnnotationopt</em></p>
</blockquote>
<p>åœ¨ä¸Šè¿°çš„æ„é€ ç­¾åä¸­ï¼Œ<code>TypeParametersopt</code> ã€<code>ParameterListopt</code> å’Œ <code>TypeAnnotationopt</code> åˆ†åˆ«è¡¨ç¤ºï¼šå¯é€‰çš„ç±»å‹å‚æ•°ã€å¯é€‰çš„å‚æ•°åˆ—è¡¨å’Œå¯é€‰çš„ç±»å‹æ³¨è§£ã€‚ä¸è¯¥è¯­æ³•ç›¸å¯¹åº”çš„å‡ ç§å¸¸è§çš„ä½¿ç”¨å½¢å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">new</span> C  
<span class="hljs-keyword">new</span> C ( ... )  
<span class="hljs-keyword">new</span> C &lt; ... &gt; ( ... )
</code></pre><p>ä»‹ç»å®Œæ„é€ ç­¾åï¼Œæˆ‘ä»¬å†æ¥ä»‹ç»ä¸€ä¸ªä¸ä¹‹ç›¸å…³çš„æ¦‚å¿µï¼Œå³æ„é€ å‡½æ•°ç±»å‹ã€‚</p>
<h4 class="heading">8.2 æ„é€ å‡½æ•°ç±»å‹</h4>
<p>åœ¨ TypeScript è¯­è¨€è§„èŒƒä¸­è¿™æ ·å®šä¹‰æ„é€ å‡½æ•°ç±»å‹ï¼š</p>
<blockquote>
<p>An object type containing one or more construct signatures is said to be a <em><strong>constructor type</strong></em>. Constructor types may be written using constructor type literals or by including construct signatures in object type literals.</p>
</blockquote>
<p>é€šè¿‡è§„èŒƒä¸­çš„æè¿°ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<ul>
<li>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ ç­¾åçš„å¯¹è±¡ç±»å‹è¢«ç§°ä¸ºæ„é€ å‡½æ•°ç±»å‹ï¼›</li>
<li>æ„é€ å‡½æ•°ç±»å‹å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°ç±»å‹å­—é¢é‡æˆ–åŒ…å«æ„é€ ç­¾åçš„å¯¹è±¡ç±»å‹å­—é¢é‡æ¥ç¼–å†™ã€‚</li>
</ul>
<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ç±»å‹å­—é¢é‡å‘¢ï¼Ÿæ„é€ å‡½æ•°ç±»å‹å­—é¢é‡æ˜¯åŒ…å«å•ä¸ªæ„é€ å‡½æ•°ç­¾åçš„å¯¹è±¡ç±»å‹çš„ç®€å†™ã€‚å…·ä½“æ¥è¯´ï¼Œæ„é€ å‡½æ•°ç±»å‹å­—é¢é‡çš„å½¢å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">new</span> &lt; T1, T2, ... &gt; <span class="hljs-function">(<span class="hljs-params"> p1, p2, ... </span>) =&gt;</span> R
</code></pre><p>è¯¥å½¢å¼ä¸ä»¥ä¸‹å¯¹è±¡ç±»å‹å­—é¢é‡æ˜¯ç­‰ä»·çš„ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">{ <span class="hljs-keyword">new</span> &lt; T1, T2, ... &gt; ( p1, p2, ... ) : R }
</code></pre><p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸ªå®é™…çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-comment">// æ„é€ å‡½æ•°ç±»å‹å­—é¢é‡</span>
<span class="hljs-keyword">new</span> (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>) =&gt; Point
</code></pre><p>ç­‰ä»·äºä»¥ä¸‹å¯¹è±¡ç±»å‹å­—é¢é‡ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">{
   <span class="hljs-keyword">new</span> (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): Point;
}
</code></pre><h4 class="heading">8.3 æ„é€ å‡½æ•°ç±»å‹çš„åº”ç”¨</h4>
<p>åœ¨ä»‹ç»æ„é€ å‡½æ•°ç±»å‹çš„åº”ç”¨å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Point {
  <span class="hljs-keyword">new</span> (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): Point;
  x: <span class="hljs-built_in">number</span>;
  y: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">class</span> Point2D <span class="hljs-keyword">implements</span> Point {
  readonly x: <span class="hljs-built_in">number</span>;
  readonly y: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>.x = x;
    <span class="hljs-keyword">this</span>.y = y;
  }
}

<span class="hljs-keyword">const</span> point: Point = <span class="hljs-keyword">new</span> Point2D(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre><p>å¯¹äºä»¥ä¸Šçš„ä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs bash" lang="bash">Class <span class="hljs-string">'Point2D'</span> incorrectly implements interface <span class="hljs-string">'Point'</span>.
Type <span class="hljs-string">'Point2D'</span> provides no match <span class="hljs-keyword">for</span> the signature <span class="hljs-string">'new (x: number, y: number): Point'</span>.
</code></pre><p>ç›¸ä¿¡å¾ˆå¤šåˆšæ¥è§¦ TypeScript ä¸ä¹…çš„å°ä¼™ä¼´éƒ½ä¼šé‡åˆ°ä¸Šè¿°çš„é—®é¢˜ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå¯¹å‰é¢å®šä¹‰çš„ <code>Point</code> æ¥å£è¿›è¡Œåˆ†ç¦»ï¼Œå³æŠŠæ¥å£çš„å±æ€§å’Œæ„é€ å‡½æ•°ç±»å‹è¿›è¡Œåˆ†ç¦»ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">interface</span> Point {
  x: <span class="hljs-built_in">number</span>;
  y: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> PointConstructor {
  <span class="hljs-keyword">new</span> (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>): Point;
}
</code></pre><p>å®Œæˆæ¥å£æ‹†åˆ†ä¹‹åï¼Œé™¤äº†å‰é¢å·²ç»å®šä¹‰çš„ <code>Point2D</code> ç±»ä¹‹å¤–ï¼Œæˆ‘ä»¬åˆå®šä¹‰äº†ä¸€ä¸ª <code>newPoint</code> å·¥å‚å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºæ ¹æ®ä¼ å…¥çš„ PointConstructor ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œæ¥åˆ›å»ºå¯¹åº”çš„ Point å¯¹è±¡ã€‚</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">class</span> Point2D <span class="hljs-keyword">implements</span> Point {
  readonly x: <span class="hljs-built_in">number</span>;
  readonly y: <span class="hljs-built_in">number</span>;

  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">this</span>.x = x;
    <span class="hljs-keyword">this</span>.y = y;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newPoint</span>(<span class="hljs-params">
  pointConstructor: PointConstructor,
  x: <span class="hljs-built_in">number</span>,
  y: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-title">Point</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> pointConstructor(x, y);
}

<span class="hljs-keyword">const</span> point: Point = newPoint(Point2D, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre><h4 class="heading">8.4 ä½¿ç”¨æ³›å‹åˆ›å»ºå¯¹è±¡</h4>
<p>äº†è§£å®Œæ„é€ ç­¾åå’Œæ„é€ å‡½æ•°ç±»å‹ä¹‹åï¼Œä¸‹é¢æˆ‘ä»¬æ¥å¼€å§‹è§£å†³ä¸Šé¢é‡åˆ°çš„é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦é‡æ„ä¸€ä¸‹ <code>create</code> æ–¹æ³•ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">class</span> GenericCreator&lt;T&gt; {
  create&lt;T&gt;(c: { <span class="hljs-keyword">new</span> (): T }): T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> c();
  }
}
</code></pre><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬é‡æ–°å®šä¹‰äº† <code>create</code> æˆå‘˜æ–¹æ³•ï¼Œæ ¹æ®è¯¥æ–¹æ³•çš„ç­¾åï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå…¶ç±»å‹æ˜¯æ„é€ å‡½æ•°ç±»å‹ï¼Œä¸”è¯¥æ„é€ å‡½æ•°ä¸åŒ…å«ä»»ä½•å‚æ•°ï¼Œè°ƒç”¨è¯¥æ„é€ å‡½æ•°åï¼Œä¼šè¿”å›ç±»å‹ T çš„å®ä¾‹ã€‚</p>
<p>å¦‚æœæ„é€ å‡½æ•°å«æœ‰å‚æ•°çš„è¯ï¼Œæ¯”å¦‚åŒ…å«ä¸€ä¸ª <code>number</code> ç±»å‹çš„å‚æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ create æ–¹æ³•ï¼š</p>
<pre><code class="hljs typescript" lang="typescript">create&lt;T&gt;(c: { <span class="hljs-keyword">new</span>(a: <span class="hljs-built_in">number</span>): T; }, num: <span class="hljs-built_in">number</span>): T {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> c(num);
}
</code></pre><p>æ›´æ–°å®Œ <code>GenericCreator</code> æ³›å‹ç±»ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥åˆ›å»º <code>FirstClass</code> å’Œ <code>SecondClass</code> ç±»çš„å®ä¾‹ï¼š</p>
<pre><code class="hljs typescript" lang="typescript"><span class="hljs-keyword">const</span> creator1 = <span class="hljs-keyword">new</span> GenericCreator&lt;FirstClass&gt;();
<span class="hljs-keyword">const</span> firstClass: FirstClass = creator1.create(FirstClass);

<span class="hljs-keyword">const</span> creator2 = <span class="hljs-keyword">new</span> GenericCreator&lt;SecondClass&gt;();
<span class="hljs-keyword">const</span> secondClass: SecondClass = creator2.create(SecondClass);
</code></pre><h3 class="heading">ä¹ã€å‚è€ƒèµ„æº</h3>
<ul>
<li><a target="_blank" href="https://medium.com/better-programming/typescript-generics-90be93d8c292">typescript-generics</a></li>
<li><a target="_blank" href="https://medium.com/@rossbulat/typescript-generics-explained-15c6493b510f">typescript-generics-explained</a></li>
<li><a target="_blank" href="https://dev.to/shadow1349/typescript-tip-of-the-week-generics-170g">typescript-tip-of-the-week-generics</a></li>
</ul>
<p></p><figure><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/22/172dc5bb94585adf~tplv-t2oaga2asx-image.image"><figcaption></figcaption></figure><p></p>

</body>
</html>
