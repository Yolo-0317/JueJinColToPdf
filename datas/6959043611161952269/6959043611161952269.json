{"article_id": "6959043611161952269", "article_info": {"article_id": "6959043611161952269", "user_id": "3544481220801815", "category_id": "6809637767543259144", "tag_ids": [6809640404791590919, 6809640407484334093], "visible_level": 0, "link_url": "", "cover_image": "https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d31bdc927bab4d9383369c9c25bcee8f~tplv-k3u1fbpfcp-watermark.image", "is_gfw": 0, "title": "\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\u7bc7", "brief_content": "\u5728\u524d\u7aef\u9762\u8bd5\u4e2d\uff0c\u5e38\u8003\u7684\u4ee3\u7801\u8f93\u51fa\u95ee\u9898\u4e3b\u8981\u6d89\u53ca\u5230\u4ee5\u4e0b\u77e5\u8bc6\u70b9\uff1a\u5f02\u6b65\u7f16\u7a0b\u3001\u4e8b\u4ef6\u5faa\u73af\u3001this\u6307\u5411\u3001\u4f5c\u7528\u57df\u3001\u53d8\u91cf\u63d0\u5347\u3001\u95ed\u5305\u3001\u539f\u578b\u3001\u7ee7\u627f\u7b49", "is_english": 0, "is_original": 1, "user_index": 0, "original_type": 0, "original_author": "", "content": "", "ctime": "1620279063", "mtime": "1629163182", "rtime": "-62135596800", "draft_id": "6959044437301264415", "view_count": 5471, "collect_count": 68, "digg_count": 145, "comment_count": 6, "hot_index": 424, "is_hot": 0, "rank_index": 1.98e-06, "status": 1, "verify_status": 1, "audit_status": 2, "mark_content": "---\ntheme: fancy\n---\n### \u524d\u8a00\uff1a\n\n**\u4ee3\u7801\u8f93\u51fa\u7ed3\u679c**\u662f\u9762\u8bd5\u4e2d\u5e38\u8003\u7684\u9898\u76ee\uff0c\u4e00\u6bb5\u4ee3\u7801\u4e2d\u53ef\u80fd\u6d89\u53ca\u5230\u5f88\u591a\u7684\u77e5\u8bc6\u70b9\uff0c\u8fd9\u5c31\u8003\u5bdf\u5230\u4e86\u5e94\u8058\u8005\u7684\u57fa\u7840\u80fd\u529b\u3002\u5728\u524d\u7aef\u9762\u8bd5\u4e2d\uff0c\u5e38\u8003\u7684\u4ee3\u7801\u8f93\u51fa\u95ee\u9898\u4e3b\u8981\u6d89\u53ca\u5230\u4ee5\u4e0b\u77e5\u8bc6\u70b9\uff1a**\u5f02\u6b65\u7f16\u7a0b\u3001\u4e8b\u4ef6\u5faa\u73af\u3001this\u6307\u5411\u3001\u4f5c\u7528\u57df\u3001\u53d8\u91cf\u63d0\u5347\u3001\u95ed\u5305\u3001\u539f\u578b\u3001\u7ee7\u627f**\u7b49\uff0c\u8fd9\u4e9b\u77e5\u8bc6\u70b9\u5f80\u5f80\u4e0d\u662f\u5355\u72ec\u51fa\u73b0\u7684\uff0c\u800c\u662f\u5728\u540c\u4e00\u6bb5\u4ee3\u7801\u4e2d\u5305\u542b\u591a\u4e2a\u77e5\u8bc6\u70b9\u3002\u6240\u4ee5\uff0c\u7b14\u8005\u5c06\u8fd9\u4e9b\u95ee\u9898\u5927\u81f4\u5206\u4e3a\u56db\u7c7b\u8fdb\u884c\u8ba8\u8bba\u3002\u8fd9\u91cc\u4e0d\u4f1a\u7cfb\u7edf\u7684\u9610\u8ff0\u57fa\u7840\u77e5\u8bc6\uff0c\u800c\u662f\u901a\u8fc7\u9762\u8bd5\u4f8b\u9898\u7684\u5f62\u5f0f\uff0c\u6765\u8bb2\u8ff0\u6bcf\u4e2a\u9898\u76ee\u7684\u77e5\u8bc6\u70b9\u4ee5\u53ca\u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b\u3002\u5982\u679c\u4f1a\u4e86\u8fd9\u4e9b\u4f8b\u9898\uff0c\u5728\u524d\u7aef\u9762\u8bd5\u4e2d\u591a\u6570\u4ee3\u7801\u8f93\u51fa\u95ee\u9898\u5c31\u53ef\u4ee5\u8f7b\u800c\u6613\u4e3e\u7684\u89e3\u51b3\u4e86\u3002\n\n**\u6ce8\uff1a** \u672c\u6587\u4e2d\u6240\u6709\u4f8b\u9898\u6536\u96c6\u81ea\u725b\u5ba2\u7f51\u9762\u7ecf\u3001\u7f51\u7edc\u7b49\uff0c\u5982\u679c\u4fb5\u6743\uff0c\u8bf7\u8054\u7cfb\u5220\u9664\uff01\n\n#### \u524d\u7aef\u9762\u8bd5\u9898\u7cfb\u5217\u6587\u7ae0\uff1a\n\u30101\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bHTML\u7bc7](https://juejin.cn/post/6905294475539513352)\n\n\u30102\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bCSS\u7bc7](https://juejin.cn/post/6905539198107942919)\n\n\u30103\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bJavaScript\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6940945178899251230)\n\n\u30104\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bJavaScript\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6941194115392634888)\n\n\u30105\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bVue\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6919373017218809864)\n\n\u30106\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bVue\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6964779204462247950/)\n\n\u30107\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6941546135827775525)\n\n\u30108\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6940942549305524238)\n\n\u30109\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u8ba1\u7b97\u673a\u7f51\u7edc\u7bc7](https://juejin.cn/post/6908327746473033741)\n\n\u301010\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u6d4f\u89c8\u5668\u539f\u7406\u7bc7](https://juejin.cn/post/6916157109906341902/)\n\n\u301011\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u6027\u80fd\u4f18\u5316\u7bc7](https://juejin.cn/post/6941278592215515143)\n\n\u301012\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u624b\u5199\u4ee3\u7801\u7bc7](https://juejin.cn/post/6946136940164939813)\n\n\u301013\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\u7bc7](https://juejin.cn/post/6959043611161952269)\n\n## \u4e00\u3001\u5f02\u6b65&\u4e8b\u4ef6\u5faa\u73af\n\n### 1. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  console.log(2);\n});\npromise.then(() => {\n  console.log(3);\n});\nconsole.log(4);\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1 \n2 \n4\n```\n\npromise.then \u662f\u5fae\u4efb\u52a1\uff0c\u5b83\u4f1a\u5728\u6240\u6709\u7684\u5b8f\u4efb\u52a1\u6267\u884c\u5b8c\u4e4b\u540e\u624d\u4f1a\u6267\u884c\uff0c\u540c\u65f6\u9700\u8981promise\u5185\u90e8\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u56e0\u4e3a\u8fd9\u91cc\u5185\u90e8\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u4e00\u76f4\u5904\u4e8epending\u72b6\u6001\uff0c\u6240\u4ee5\u4e0d\u8f93\u51fa3\u3002\n\n### 2. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  console.log('promise1')\n  resolve('resolve1')\n})\nconst promise2 = promise1.then(res => {\n  console.log(res)\n})\nconsole.log('1', promise1);\nconsole.log('2', promise2);\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\npromise1\n1 Promise{<resolved>: resolve1}\n2 Promise{<pending>}\nresolve1\n```\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u63a5\u6253\u5370promise1\uff0c\u4f1a\u6253\u5370\u51fa\u5b83\u7684\u72b6\u6001\u503c\u548c\u53c2\u6570\u3002\n\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. script\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u6309\u7167\u987a\u5e8f\u6267\u884c\u8fd9\u4e9b\u4ee3\u7801\uff1b\n1. \u9996\u5148\u8fdb\u5165Promise\uff0c\u6267\u884c\u8be5\u6784\u9020\u51fd\u6570\u4e2d\u7684\u4ee3\u7801\uff0c\u6253\u5370`promise1`\uff1b\n1. \u78b0\u5230`resolve`\u51fd\u6570, \u5c06`promise1`\u7684\u72b6\u6001\u6539\u53d8\u4e3a`resolved`, \u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u4e0b\u6765\uff1b\n1. \u78b0\u5230`promise1.then`\u8fd9\u4e2a\u5fae\u4efb\u52a1\uff0c\u5c06\u5b83\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. `promise2`\u662f\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u4e3a`pending`\u7684`Promise`\uff1b\n1. \u6267\u884c\u540c\u6b65\u4ee3\u78011\uff0c \u540c\u65f6\u6253\u5370\u51fa`promise1`\u7684\u72b6\u6001\u662f`resolved`\uff1b\n1. \u6267\u884c\u540c\u6b65\u4ee3\u78012\uff0c\u540c\u65f6\u6253\u5370\u51fa`promise2`\u7684\u72b6\u6001\u662f`pending`\uff1b\n1. \u5b8f\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\uff0c\u67e5\u627e\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u53d1\u73b0`promise1.then`\u8fd9\u4e2a\u5fae\u4efb\u52a1\u4e14\u72b6\u6001\u4e3a`resolved`\uff0c\u6267\u884c\u5b83\u3002\n\n### 3. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n  console.log(1);\n  setTimeout(() => {\n    console.log(\"timerStart\");\n    resolve(\"success\");\n    console.log(\"timerEnd\");\n  }, 0);\n  console.log(2);\n});\npromise.then((res) => {\n  console.log(res);\n});\nconsole.log(4);\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n2\n4\ntimerStart\ntimerEnd\nsuccess\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n- \u9996\u5148\u9047\u5230Promise\u6784\u9020\u51fd\u6570\uff0c\u4f1a\u5148\u6267\u884c\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u6253\u5370`1`\uff1b\n- \u9047\u5230\u5b9a\u65f6\u5668`steTimeout`\uff0c\u5b83\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u653e\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n- \u7ee7\u7eed\u5411\u4e0b\u6267\u884c\uff0c\u6253\u5370\u51fa2\uff1b\n- \u7531\u4e8e`Promise`\u7684\u72b6\u6001\u6b64\u65f6\u8fd8\u662f`pending`\uff0c\u6240\u4ee5`promise.then`\u5148\u4e0d\u6267\u884c\uff1b\n- \u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u540c\u6b65\u4efb\u52a1\uff0c\u6253\u5370\u51fa4\uff1b\n- \u6b64\u65f6\u5fae\u4efb\u52a1\u961f\u5217\u6ca1\u6709\u4efb\u52a1\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u8f6e\u5b8f\u4efb\u52a1\uff0c\u6267\u884c`steTimeout`\uff1b\n- \u9996\u5148\u6267\u884c`timerStart`\uff0c\u7136\u540e\u9047\u5230\u4e86`resolve`\uff0c\u5c06`promise`\u7684\u72b6\u6001\u6539\u4e3a`resolved`\u4e14\u4fdd\u5b58\u7ed3\u679c\u5e76\u5c06\u4e4b\u524d\u7684`promise.then`\u63a8\u5165\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u518d\u6267\u884c`timerEnd`\uff1b\n- \u6267\u884c\u5b8c\u8fd9\u4e2a\u5b8f\u4efb\u52a1\uff0c\u5c31\u53bb\u6267\u884c\u5fae\u4efb\u52a1`promise.then`\uff0c\u6253\u5370\u51fa`resolve`\u7684\u7ed3\u679c\u3002\n\n### 4. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve().then(() => {\n  console.log('promise1');\n  const timer2 = setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n});\nconst timer1 = setTimeout(() => {\n  console.log('timer1')\n  Promise.resolve().then(() => {\n    console.log('promise2')\n  })\n}, 0)\nconsole.log('start');\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nstart\npromise1\ntimer1\npromise2\ntimer2\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\uff0c`Promise.resolve().then`\u662f\u4e00\u4e2a\u5fae\u4efb\u52a1\uff0c\u52a0\u5165\u5fae\u4efb\u52a1\u961f\u5217\n1. \u6267\u884ctimer1\uff0c\u5b83\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\n1. \u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fa`start`\n1. \u8fd9\u6837\u7b2c\u4e00\u8f6e\u5b8f\u4efb\u52a1\u5c31\u6267\u884c\u5b8c\u4e86\uff0c\u5f00\u59cb\u6267\u884c\u5fae\u4efb\u52a1`Promise.resolve().then`\uff0c\u6253\u5370\u51fa`promise1`\n1. \u9047\u5230`timer2`\uff0c\u5b83\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u5c06\u5176\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u6b64\u65f6\u5b8f\u4efb\u52a1\u961f\u5217\u6709\u4e24\u4e2a\u4efb\u52a1\uff0c\u5206\u522b\u662f`timer1`\u3001`timer2`\uff1b\n1. \u8fd9\u6837\u7b2c\u4e00\u8f6e\u5fae\u4efb\u52a1\u5c31\u6267\u884c\u5b8c\u4e86\uff0c\u5f00\u59cb\u6267\u884c\u7b2c\u4e8c\u8f6e\u5b8f\u4efb\u52a1\uff0c\u9996\u5148\u6267\u884c\u5b9a\u65f6\u5668`timer1`\uff0c\u6253\u5370`timer1`\uff1b\n1. \u9047\u5230`Promise.resolve().then`\uff0c\u5b83\u662f\u4e00\u4e2a\u5fae\u4efb\u52a1\uff0c\u52a0\u5165\u5fae\u4efb\u52a1\u961f\u5217\n1. \u5f00\u59cb\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4efb\u52a1\uff0c\u6253\u5370`promise2`\uff1b\n1. \u6700\u540e\u6267\u884c\u5b8f\u4efb\u52a1`timer2`\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fa`timer2`\uff1b\n\n### 5. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise = new Promise((resolve, reject) => {\n    resolve('success1');\n    reject('error');\n    resolve('success2');\n});\npromise.then((res) => {\n    console.log('then:', res);\n}).catch((err) => {\n    console.log('catch:', err);\n})\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nthen\uff1asuccess1\n```\n\n\u8fd9\u4e2a\u9898\u76ee\u8003\u5bdf\u7684\u5c31\u662f**Promise\u7684\u72b6\u6001\u5728\u53d1\u751f\u53d8\u5316\u4e4b\u540e\uff0c\u5c31\u4e0d\u4f1a\u518d\u53d1\u751f\u53d8\u5316**\u3002\u5f00\u59cb\u72b6\u6001\u7531`pending`\u53d8\u4e3a`resolve`\uff0c\u8bf4\u660e\u5df2\u7ecf\u53d8\u4e3a\u5df2\u5b8c\u6210\u72b6\u6001\uff0c\u4e0b\u9762\u7684\u4e24\u4e2a\u72b6\u6001\u7684\u5c31\u4e0d\u4f1a\u518d\u6267\u884c\uff0c\u540c\u65f6\u4e0b\u9762\u7684catch\u4e5f\u4e0d\u4f1a\u6355\u83b7\u5230\u9519\u8bef\u3002\n\n### 6. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\nPromise {<fulfilled>: undefined}\n```\n\nPromise.resolve\u65b9\u6cd5\u7684\u53c2\u6570\u5982\u679c\u662f\u4e00\u4e2a\u539f\u59cb\u503c\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u4e0d\u5177\u6709then\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5219Promise.resolve\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\u5bf9\u8c61\uff0c\u72b6\u6001\u4e3aresolved\uff0cPromise.resolve\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4f1a\u540c\u65f6\u4f20\u7ed9\u56de\u8c03\u51fd\u6570\u3002\n\n\nthen\u65b9\u6cd5\u63a5\u53d7\u7684\u53c2\u6570\u662f\u51fd\u6570\uff0c\u800c\u5982\u679c\u4f20\u9012\u7684\u5e76\u975e\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u5b9e\u9645\u4e0a\u4f1a\u5c06\u5176\u89e3\u91ca\u4e3athen(null)\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u524d\u4e00\u4e2aPromise\u7684\u7ed3\u679c\u4f1a\u4f20\u9012\u4e0b\u9762\u3002\n\n### 7. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise1 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('success')\n  }, 1000)\n})\nconst promise2 = promise1.then(() => {\n  throw new Error('error!!!')\n})\nconsole.log('promise1', promise1)\nconsole.log('promise2', promise2)\nsetTimeout(() => {\n  console.log('promise1', promise1)\n  console.log('promise2', promise2)\n}, 2000)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\npromise1 Promise {<pending>}\npromise2 Promise {<pending>}\n\nUncaught (in promise) Error: error!!!\npromise1 Promise {<fulfilled>: \"success\"}\npromise2 Promise {<rejected>: Error: error!!}\n```\n\n### 8. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve(1)\n  .then(res => {\n    console.log(res);\n    return 2;\n  })\n  .catch(err => {\n    return 3;\n  })\n  .then(res => {\n    console.log(res);\n  });\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1   \n2\n```\n\nPromise\u662f\u53ef\u4ee5\u94fe\u5f0f\u8c03\u7528\u7684\uff0c\u7531\u4e8e\u6bcf\u6b21\u8c03\u7528 `.then` \u6216\u8005 `.catch` \u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 promise\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u94fe\u5f0f\u8c03\u7528, \u5b83\u5e76\u4e0d\u50cf\u4e00\u822c\u4efb\u52a1\u7684\u94fe\u5f0f\u8c03\u7528\u4e00\u6837return this\u3002\n\n\n\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u4e4b\u6240\u4ee5\u4f9d\u6b21\u6253\u5370\u51fa1\u548c2\uff0c\u662f\u56e0\u4e3a`resolve(1)`\u4e4b\u540e\u8d70\u7684\u662f\u7b2c\u4e00\u4e2athen\u65b9\u6cd5\uff0c\u5e76\u6ca1\u6709\u8fdbcatch\u91cc\uff0c\u6240\u4ee5\u7b2c\u4e8c\u4e2athen\u4e2d\u7684res\u5f97\u5230\u7684\u5b9e\u9645\u4e0a\u662f\u7b2c\u4e00\u4e2athen\u7684\u8fd4\u56de\u503c\u3002\u5e76\u4e14return 2\u4f1a\u88ab\u5305\u88c5\u6210`resolve(2)`\uff0c\u88ab\u6700\u540e\u7684then\u6253\u5370\u8f93\u51fa2\u3002\n\n### 9. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve().then(() => {\n  return new Error('error!!!')\n}).then(res => {\n  console.log(\"then: \", res)\n}).catch(err => {\n  console.log(\"catch: \", err)\n})\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n\"then: \" \"Error: error!!!\"\n```\n\n\u8fd4\u56de\u4efb\u610f\u4e00\u4e2a\u975e promise \u7684\u503c\u90fd\u4f1a\u88ab\u5305\u88f9\u6210 promise \u5bf9\u8c61\uff0c\u56e0\u6b64\u8fd9\u91cc\u7684`return new Error('error!!!')`\u4e5f\u88ab\u5305\u88f9\u6210\u4e86`return Promise.resolve(new Error('error!!!'))`\uff0c\u56e0\u6b64\u5b83\u4f1a\u88abthen\u6355\u83b7\u800c\u4e0d\u662fcatch\u3002\n\n### 10. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst promise = Promise.resolve().then(() => {\n  return promise;\n})\npromise.catch(console.err)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nUncaught (in promise) TypeError: Chaining cycle detected for promise #<Promise>\n```\n\n\u8fd9\u91cc\u5176\u5b9e\u662f\u4e00\u4e2a\u5751\uff0c`.then` \u6216 `.catch` \u8fd4\u56de\u7684\u503c\u4e0d\u80fd\u662f promise \u672c\u8eab\uff0c\u5426\u5219\u4f1a\u9020\u6210\u6b7b\u5faa\u73af\u3002\n\n### 11. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n```\n\n\u770b\u5230\u8fd9\u4e2a\u9898\u76ee\uff0c\u597d\u591a\u7684then\uff0c\u5b9e\u9645\u4e0a\u53ea\u9700\u8981\u8bb0\u4f4f\u4e00\u4e2a\u539f\u5219\uff1a`.then` \u6216`.catch` \u7684\u53c2\u6570\u671f\u671b\u662f\u51fd\u6570\uff0c\u4f20\u5165\u975e\u51fd\u6570\u5219\u4f1a\u53d1\u751f**\u503c\u900f\u4f20**\u3002\n\n\n\u7b2c\u4e00\u4e2athen\u548c\u7b2c\u4e8c\u4e2athen\u4e2d\u4f20\u5165\u7684\u90fd\u4e0d\u662f\u51fd\u6570\uff0c\u4e00\u4e2a\u662f\u6570\u5b57\uff0c\u4e00\u4e2a\u662f\u5bf9\u8c61\uff0c\u56e0\u6b64\u53d1\u751f\u4e86\u900f\u4f20\uff0c\u5c06`resolve(1)` \u7684\u503c\u76f4\u63a5\u4f20\u5230\u6700\u540e\u4e00\u4e2athen\u91cc\uff0c\u76f4\u63a5\u6253\u5370\u51fa1\u3002\n\n### 12. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.reject('err!!!')\n  .then((res) => {\n    console.log('success', res)\n  }, (err) => {\n    console.log('error', err)\n  }).catch(err => {\n    console.log('catch', err)\n  })\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nerror err!!!\n```\n\n\u6211\u4eec\u77e5\u9053\uff0c`.then`\u51fd\u6570\u4e2d\u7684\u4e24\u4e2a\u53c2\u6570\uff1a\n\n- \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7528\u6765\u5904\u7406Promise\u6210\u529f\u7684\u51fd\u6570\n- \u7b2c\u4e8c\u4e2a\u5219\u662f\u5904\u7406\u5931\u8d25\u7684\u51fd\u6570\n\n\u4e5f\u5c31\u662f\u8bf4`Promise.resolve('1')`\u7684\u503c\u4f1a\u8fdb\u5165\u6210\u529f\u7684\u51fd\u6570\uff0c`Promise.reject('2')`\u7684\u503c\u4f1a\u8fdb\u5165\u5931\u8d25\u7684\u51fd\u6570\u3002\n\n\n\u5728\u8fd9\u9053\u9898\u4e2d\uff0c\u9519\u8bef\u76f4\u63a5\u88ab`then`\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6355\u83b7\u4e86\uff0c\u6240\u4ee5\u5c31\u4e0d\u4f1a\u88ab`catch`\u6355\u83b7\u4e86\uff0c\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a`error err!!!'`\n\n\n\u4f46\u662f\uff0c\u5982\u679c\u662f\u50cf\u4e0b\u9762\u8fd9\u6837\uff1a\n\n```javascript\nPromise.resolve()\n  .then(function success (res) {\n    throw new Error('error!!!')\n  }, function fail1 (err) {\n    console.log('fail1', err)\n  }).catch(function fail2 (err) {\n    console.log('fail2', err)\n  })\n```\n\n\u5728`then`\u7684\u7b2c\u4e00\u53c2\u6570\u4e2d\u629b\u51fa\u4e86\u9519\u8bef\uff0c\u90a3\u4e48\u4ed6\u5c31\u4e0d\u4f1a\u88ab\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e0d\u6d3b\u4e86\uff0c\u800c\u662f\u88ab\u540e\u9762\u7684`catch`\u6355\u83b7\u5230\u3002\n\n### 13. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve('1')\n  .then(res => {\n    console.log(res)\n  })\n  .finally(() => {\n    console.log('finally')\n  })\nPromise.resolve('2')\n  .finally(() => {\n    console.log('finally2')\n  \treturn '\u6211\u662ffinally2\u8fd4\u56de\u7684\u503c'\n  })\n  .then(res => {\n    console.log('finally2\u540e\u9762\u7684then\u51fd\u6570', res)\n  })\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\nfinally2\nfinally\nfinally2\u540e\u9762\u7684then\u51fd\u6570 2\n```\n\n`.finally()`\u4e00\u822c\u7528\u7684\u5f88\u5c11\uff0c\u53ea\u8981\u8bb0\u4f4f\u4ee5\u4e0b\u51e0\u70b9\u5c31\u53ef\u4ee5\u4e86\uff1a\n\n- `.finally()`\u65b9\u6cd5\u4e0d\u7ba1Promise\u5bf9\u8c61\u6700\u540e\u7684\u72b6\u6001\u5982\u4f55\u90fd\u4f1a\u6267\u884c\n- `.finally()`\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u63a5\u53d7\u4efb\u4f55\u7684\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u4f60\u5728`.finally()`\u51fd\u6570\u4e2d\u662f\u65e0\u6cd5\u77e5\u9053Promise\u6700\u7ec8\u7684\u72b6\u6001\u662f`resolved`\u8fd8\u662f`rejected`\u7684\n- \u5b83\u6700\u7ec8\u8fd4\u56de\u7684\u9ed8\u8ba4\u4f1a\u662f\u4e00\u4e2a\u4e0a\u4e00\u6b21\u7684Promise\u5bf9\u8c61\u503c\uff0c\u4e0d\u8fc7\u5982\u679c\u629b\u51fa\u7684\u662f\u4e00\u4e2a\u5f02\u5e38\u5219\u8fd4\u56de\u5f02\u5e38\u7684Promise\u5bf9\u8c61\u3002\n- finally\u672c\u8d28\u4e0a\u662fthen\u65b9\u6cd5\u7684\u7279\u4f8b\n\n\n\n`.finally()`\u7684\u9519\u8bef\u6355\u83b7\uff1a\n\n```javascript\nPromise.resolve('1')\n  .finally(() => {\n    console.log('finally1')\n    throw new Error('\u6211\u662ffinally\u4e2d\u629b\u51fa\u7684\u5f02\u5e38')\n  })\n  .then(res => {\n    console.log('finally\u540e\u9762\u7684then\u51fd\u6570', res)\n  })\n  .catch(err => {\n    console.log('\u6355\u83b7\u9519\u8bef', err)\n  })\n```\n\n\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a\n\n```javascript\n'finally1'\n'\u6355\u83b7\u9519\u8bef' Error: \u6211\u662ffinally\u4e2d\u629b\u51fa\u7684\u5f02\u5e38\n```\n\n### 14. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction runAsync (x) {\n    const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n    return p\n}\n\nPromise.all([runAsync(1), runAsync(2), runAsync(3)]).then(res => console.log(res))\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n2\n3\n[1, 2, 3]\n```\n\n\u9996\u5148\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2aPromise\uff0c\u6765\u5f02\u6b65\u6267\u884c\u51fd\u6570runAsync\uff0c\u8be5\u51fd\u6570\u4f20\u5165\u4e00\u4e2a\u503cx\uff0c\u7136\u540e\u95f4\u9694\u4e00\u79d2\u540e\u6253\u5370\u51fa\u8fd9\u4e2ax\u3002\n\n\n\u4e4b\u540e\u518d\u4f7f\u7528`Promise.all`\u6765\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u6267\u884c\u7684\u65f6\u5019\uff0c\u770b\u5230\u4e00\u79d2\u4e4b\u540e\u8f93\u51fa\u4e861\uff0c2\uff0c3\uff0c\u540c\u65f6\u8f93\u51fa\u4e86\u6570\u7ec4[1, 2, 3]\uff0c\u4e09\u4e2a\u51fd\u6570\u662f\u540c\u6b65\u6267\u884c\u7684\uff0c\u5e76\u4e14\u5728\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4e2d\u8fd4\u56de\u4e86\u6240\u6709\u7684\u7ed3\u679c\u3002\u5e76\u4e14\u7ed3\u679c\u548c\u51fd\u6570\u7684\u6267\u884c\u987a\u5e8f\u662f\u4e00\u81f4\u7684\u3002\n\n### 15. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nfunction runReject (x) {\n  const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))\n  return p\n}\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n       .then(res => console.log(res))\n       .catch(err => console.log(err))\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n// 1s\u540e\u8f93\u51fa\n1\n3\n// 2s\u540e\u8f93\u51fa\n2\nError: 2\n// 4s\u540e\u8f93\u51fa\n4\n```\n\n\u53ef\u4ee5\u770b\u5230\u3002catch\u6355\u83b7\u5230\u4e86\u7b2c\u4e00\u4e2a\u9519\u8bef\uff0c\u5728\u8fd9\u9053\u9898\u76ee\u4e2d\u6700\u5148\u7684\u9519\u8bef\u5c31\u662f`runReject(2)`\u7684\u7ed3\u679c\u3002\u5982\u679c\u4e00\u7ec4\u5f02\u6b65\u64cd\u4f5c\u4e2d\u6709\u4e00\u4e2a\u5f02\u5e38\u90fd\u4e0d\u4f1a\u8fdb\u5165`.then()`\u7684\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u53c2\u6570\u4e2d\u3002\u4f1a\u88ab`.then()`\u7684\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u6355\u83b7\u3002\n\n### 16. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction runAsync (x) {\n  const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))\n  return p\n}\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log('result: ', res))\n  .catch(err => console.log(err))\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n'result: ' 1\n2\n3\n```\n\nthen\u53ea\u4f1a\u6355\u83b7\u7b2c\u4e00\u4e2a\u6210\u529f\u7684\u65b9\u6cd5\uff0c\u5176\u4ed6\u7684\u51fd\u6570\u867d\u7136\u8fd8\u4f1a\u7ee7\u7eed\u6267\u884c\uff0c\u4f46\u662f\u4e0d\u662f\u88abthen\u6355\u83b7\u4e86\u3002\n\n### 17. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction runAsync(x) {\n  const p = new Promise(r =>\n    setTimeout(() => r(x, console.log(x)), 1000)\n  );\n  return p;\n}\nfunction runReject(x) {\n  const p = new Promise((res, rej) =>\n    setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x)\n  );\n  return p;\n}\nPromise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])\n  .then(res => console.log(\"result: \", res))\n  .catch(err => console.log(err));\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n0\nError: 0\n1\n2\n3\n```\n\n\u53ef\u4ee5\u770b\u5230\u5728catch\u6355\u83b7\u5230\u7b2c\u4e00\u4e2a\u9519\u8bef\u4e4b\u540e\uff0c\u540e\u9762\u7684\u4ee3\u7801\u8fd8\u4e0d\u6267\u884c\uff0c\u4e0d\u8fc7\u4e0d\u4f1a\u518d\u88ab\u6355\u83b7\u4e86\u3002\n\n\n\u6ce8\u610f\uff1a`all`\u548c`race`\u4f20\u5165\u7684\u6570\u7ec4\u4e2d\u5982\u679c\u6709\u4f1a\u629b\u51fa\u5f02\u5e38\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u90a3\u4e48\u53ea\u6709\u6700\u5148\u629b\u51fa\u7684\u9519\u8bef\u4f1a\u88ab\u6355\u83b7\uff0c\u5e76\u4e14\u662f\u88abthen\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6216\u8005\u540e\u9762\u7684catch\u6355\u83b7\uff1b\u4f46\u5e76\u4e0d\u4f1a\u5f71\u54cd\u6570\u7ec4\u4e2d\u5176\u5b83\u7684\u5f02\u6b65\u4efb\u52a1\u7684\u6267\u884c\u3002\n\n### 18. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\nasync function async2() {\n  console.log(\"async2\");\n}\nasync1();\nconsole.log('start')\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nasync1 start\nasync2\nstart\nasync1 end\n```\n\n\u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u6267\u884c\u51fd\u6570\u4e2d\u7684\u540c\u6b65\u4ee3\u7801`async1 start`\uff0c\u4e4b\u540e\u9047\u5230\u4e86`await`\uff0c\u5b83\u4f1a\u963b\u585e`async1`\u540e\u9762\u4ee3\u7801\u7684\u6267\u884c\uff0c\u56e0\u6b64\u4f1a\u5148\u53bb\u6267\u884c`async2`\u4e2d\u7684\u540c\u6b65\u4ee3\u7801`async2`\uff0c\u7136\u540e\u8df3\u51fa`async1`\uff1b\n1. \u8df3\u51fa`async1`\u51fd\u6570\u540e\uff0c\u6267\u884c\u540c\u6b65\u4ee3\u7801`start`\uff1b\n1. \u5728\u4e00\u8f6e\u5b8f\u4efb\u52a1\u5168\u90e8\u6267\u884c\u5b8c\u4e4b\u540e\uff0c\u518d\u6765\u6267\u884c`await`\u540e\u9762\u7684\u5185\u5bb9`async1 end`\u3002\n\n\n\n\u8fd9\u91cc\u53ef\u4ee5\u7406\u89e3\u4e3aawait\u540e\u9762\u7684\u8bed\u53e5\u76f8\u5f53\u4e8e\u653e\u5230\u4e86new Promise\u4e2d\uff0c\u4e0b\u4e00\u884c\u53ca\u4e4b\u540e\u7684\u8bed\u53e5\u76f8\u5f53\u4e8e\u653e\u5728Promise.then\u4e2d\u3002\n\n### 19. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n  setTimeout(() => {\n    console.log('timer1')\n  }, 0)\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('timer2')\n  }, 0)\n  console.log(\"async2\");\n}\nasync1();\nsetTimeout(() => {\n  console.log('timer3')\n}, 0)\nconsole.log(\"start\")\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nasync1 start\nasync2\nstart\nasync1 end\ntimer2\ntimer3\ntimer1\n```\n\n\u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u8fdb\u5165`async1`\uff0c\u6253\u5370\u51fa`async1 start`\uff1b\n1. \u4e4b\u540e\u9047\u5230`async2`\uff0c\u8fdb\u5165`async2`\uff0c\u9047\u5230\u5b9a\u65f6\u5668`timer2`\uff0c\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u4e4b\u540e\u6253\u5370`async2`\uff1b\n1. \u7531\u4e8e`async2`\u963b\u585e\u4e86\u540e\u9762\u4ee3\u7801\u7684\u6267\u884c\uff0c\u6240\u4ee5\u6267\u884c\u540e\u9762\u7684\u5b9a\u65f6\u5668`timer3`\uff0c\u5c06\u5176\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u4e4b\u540e\u6253\u5370`start`\uff1b\n1. \u7136\u540e\u6267\u884casync2\u540e\u9762\u7684\u4ee3\u7801\uff0c\u6253\u5370\u51fa`async1 end`\uff0c\u9047\u5230\u5b9a\u65f6\u5668timer1\uff0c\u5c06\u5176\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6700\u540e\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u6709\u4e09\u4e2a\u4efb\u52a1\uff0c\u5148\u540e\u987a\u5e8f\u4e3a`timer2`\uff0c`timer3`\uff0c`timer1`\uff0c\u6ca1\u6709\u5fae\u4efb\u52a1\uff0c\u6240\u4ee5\u76f4\u63a5\u6240\u6709\u7684\u5b8f\u4efb\u52a1\u6309\u7167\u5148\u8fdb\u5148\u51fa\u7684\u539f\u5219\u6267\u884c\u3002\n\n### 20. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nscript start\nasync1 start\npromise1\nscript end\n```\n\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728`async1`\u4e2d`await`\u540e\u9762\u7684Promise\u662f\u6ca1\u6709\u8fd4\u56de\u503c\u7684\uff0c\u4e5f\u5c31\u662f\u5b83\u7684\u72b6\u6001\u59cb\u7ec8\u662f`pending`\u72b6\u6001\uff0c\u6240\u4ee5\u5728`await`\u4e4b\u540e\u7684\u5185\u5bb9\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u5305\u62ec`async1`\u540e\u9762\u7684 `.then`\u3002\n\n### 21. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1 () {\n  console.log('async1 start');\n  await new Promise(resolve => {\n    console.log('promise1')\n    resolve('promise1 resolve')\n  }).then(res => console.log(res))\n  console.log('async1 success');\n  return 'async1 end'\n}\nconsole.log('srcipt start')\nasync1().then(res => console.log(res))\nconsole.log('srcipt end')\n```\n\n\u8fd9\u91cc\u662f\u5bf9\u4e0a\u9762\u4e00\u9898\u8fdb\u884c\u4e86\u6539\u9020\uff0c\u52a0\u4e0a\u4e86resolve\u3002\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nscript start\nasync1 start\npromise1\nscript end\npromise1 resolve\nasync1 success\nasync1 end\n```\n\n### 22. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1() {\n  console.log(\"async1 start\");\n  await async2();\n  console.log(\"async1 end\");\n}\n\nasync function async2() {\n  console.log(\"async2\");\n}\n\nconsole.log(\"script start\");\n\nsetTimeout(function() {\n  console.log(\"setTimeout\");\n}, 0);\n\nasync1();\n\nnew Promise(resolve => {\n  console.log(\"promise1\");\n  resolve();\n}).then(function() {\n  console.log(\"promise2\");\n});\nconsole.log('script end')\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a \n\n1. \u5f00\u5934\u5b9a\u4e49\u4e86async1\u548casync2\u4e24\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u5e76\u672a\u6267\u884c\uff0c\u6267\u884cscript\u4e2d\u7684\u4ee3\u7801\uff0c\u6240\u4ee5\u6253\u5370\u51fascript start\uff1b\n1. \u9047\u5230\u5b9a\u65f6\u5668Settimeout\uff0c\u5b83\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u4e4b\u540e\u6267\u884c\u51fd\u6570async1\uff0c\u9996\u5148\u6253\u5370\u51faasync1 start\uff1b\n1. \u9047\u5230await\uff0c\u6267\u884casync2\uff0c\u6253\u5370\u51faasync2\uff0c\u5e76\u963b\u65ad\u540e\u9762\u4ee3\u7801\u7684\u6267\u884c\uff0c\u5c06\u540e\u9762\u7684\u4ee3\u7801\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. \u7136\u540e\u8df3\u51faasync1\u548casync2\uff0c\u9047\u5230Promise\uff0c\u6253\u5370\u51fapromise1\uff1b\n1. \u9047\u5230resolve\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u7136\u540e\u6267\u884c\u540e\u9762\u7684script\u4ee3\u7801\uff0c\u6253\u5370\u51fascript end\uff1b\n1. \u4e4b\u540e\u5c31\u8be5\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e86\uff0c\u9996\u5148\u6253\u5370\u51faasync1 end\uff0c\u7136\u540e\u6253\u5370\u51fapromise2\uff1b\n1. \u6267\u884c\u5b8c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u5c31\u5f00\u59cb\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fasetTimeout\u3002\n\n### 23. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nasync function async1 () {\n  await async2();\n  console.log('async1');\n  return 'async1 success'\n}\nasync function async2 () {\n  return new Promise((resolve, reject) => {\n    console.log('async2')\n    reject('error')\n  })\n}\nasync1().then(res => console.log(res))\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nasync2\nUncaught (in promise) error\n```\n\n\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679casync\u51fd\u6570\u4e2d\u629b\u51fa\u4e86\u9519\u8bef\uff0c\u5c31\u4f1a\u7ec8\u6b62\u9519\u8bef\u7ed3\u679c\uff0c\u4e0d\u4f1a\u7ee7\u7eed\u5411\u4e0b\u6267\u884c\u3002\n\n\n\u5982\u679c\u60f3\u8981\u8ba9\u9519\u8bef\u4e0d\u8db3\u4e4b\u5904\u540e\u9762\u7684\u4ee3\u7801\u6267\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528catch\u6765\u6355\u83b7\uff1a\n\n```javascript\nasync function async1 () {\n  await Promise.reject('error!!!').catch(e => console.log(e))\n  console.log('async1');\n  return Promise.resolve('async1 success')\n}\nasync1().then(res => console.log(res))\nconsole.log('script start')\n```\n\n\u8fd9\u6837\u7684\u8f93\u51fa\u7ed3\u679c\u5c31\u662f\uff1a\n\n```javascript\nscript start\nerror!!!\nasync1\nasync1 success\n```\n\n### 24. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst first = () => (new Promise((resolve, reject) => {\n    console.log(3);\n    let p = new Promise((resolve, reject) => {\n        console.log(7);\n        setTimeout(() => {\n            console.log(5);\n            resolve(6);\n            console.log(p)\n        }, 0)\n        resolve(1);\n    });\n    resolve(2);\n    p.then((arg) => {\n        console.log(arg);\n    });\n}));\nfirst().then((arg) => {\n    console.log(arg);\n});\nconsole.log(4);\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n3\n7\n4\n1\n2\n5\nPromise{<resolved>: 1}\n```\n\n\u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u4f1a\u8fdb\u5165Promise\uff0c\u6253\u5370\u51fa3\uff0c\u4e4b\u540e\u8fdb\u5165\u4e0b\u9762\u7684Promise\uff0c\u6253\u5370\u51fa7\uff1b\n1. \u9047\u5230\u4e86\u5b9a\u65f6\u5668\uff0c\u5c06\u5176\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6267\u884cPromise \u00a0p\u4e2d\u7684resolve\uff0c\u72b6\u6001\u53d8\u4e3aresolved\uff0c\u8fd4\u56de\u503c\u4e3a1\uff1b\n1. \u6267\u884cPromise first\u4e2d\u7684resolve\uff0c\u72b6\u6001\u53d8\u4e3aresolved\uff0c\u8fd4\u56de\u503c\u4e3a2\uff1b\n1. \u9047\u5230p.then\uff0c\u5c06\u5176\u52a0\u5165\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u9047\u5230first().then\uff0c\u5c06\u5176\u52a0\u5165\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6267\u884c\u5916\u9762\u7684\u4ee3\u7801\uff0c\u6253\u5370\u51fa4\uff1b\n1. \u8fd9\u6837\u7b2c\u4e00\u8f6e\u5b8f\u4efb\u52a1\u5c31\u6267\u884c\u5b8c\u4e86\uff0c\u5f00\u59cb\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4efb\u52a1\uff0c\u5148\u540e\u6253\u5370\u51fa1\u548c2\uff1b\n1. \u8fd9\u6837\u5fae\u4efb\u52a1\u5c31\u6267\u884c\u5b8c\u4e86\uff0c\u5f00\u59cb\u6267\u884c\u4e0b\u4e00\u8f6e\u5b8f\u4efb\u52a1\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u6709\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u6267\u884c\u5b83\uff0c\u6253\u5370\u51fa5\uff0c\u7531\u4e8e\u6267\u884c\u5df2\u7ecf\u53d8\u4e3aresolved\u72b6\u6001\uff0c\u6240\u4ee5`resolve(6)`\u4e0d\u4f1a\u518d\u6267\u884c\uff1b\n1. \u6700\u540e`console.log(p)`\u6253\u5370\u51fa`Promise{<resolved>: 1}`\uff1b\n\n### 25. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst async1 = async () => {\n  console.log('async1');\n  setTimeout(() => {\n    console.log('timer1')\n  }, 2000)\n  await new Promise(resolve => {\n    console.log('promise1')\n  })\n  console.log('async1 end')\n  return 'async1 success'\n} \nconsole.log('script start');\nasync1().then(res => console.log(res));\nconsole.log('script end');\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .catch(4)\n  .then(res => console.log(res))\nsetTimeout(() => {\n  console.log('timer2')\n}, 1000)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\nscript start\nasync1\npromise1\nscript end\n1\ntimer2\ntimer1\n```\n\n\u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u6267\u884c\u540c\u6b65\u5e26\u5417\uff0c\u6253\u5370\u51fascript start\uff1b\n1. \u9047\u5230\u5b9a\u65f6\u5668timer1\u5c06\u5176\u52a0\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u4e4b\u540e\u662f\u6267\u884cPromise\uff0c\u6253\u5370\u51fapromise1\uff0c\u7531\u4e8ePromise\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u6240\u4ee5\u540e\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u6267\u884c\uff1b\n1. \u7136\u540e\u6267\u884c\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fascript end\uff1b\n1. \u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684Promise\uff0c.then\u548c.catch\u671f\u671b\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u91cc\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u56e0\u6b64\u5c31\u4f1a\u53d1\u751f\u503c\u6e17\u900f\uff0c\u5c06resolve(1)\u7684\u503c\u4f20\u5230\u6700\u540e\u4e00\u4e2athen\uff0c\u76f4\u63a5\u6253\u5370\u51fa1\uff1b\n1. \u9047\u5230\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6309\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\u4e24\u4e2a\u5b9a\u65f6\u5668\uff0c\u4f46\u662f\u7531\u4e8e\u5b9a\u65f6\u5668\u65f6\u95f4\u7684\u539f\u56e0\uff0c\u4f1a\u5728\u4e24\u79d2\u540e\u5148\u6253\u5370\u51fatimer2\uff0c\u5728\u56db\u79d2\u540e\u6253\u5370\u51fatimer1\u3002\n\n### 26. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconst p1 = new Promise((resolve) => {\n  setTimeout(() => {\n    resolve('resolve3');\n    console.log('timer1')\n  }, 0)\n  resolve('resovle1');\n  resolve('resolve2');\n}).then(res => {\n  console.log(res)  // resolve1\n  setTimeout(() => {\n    console.log(p1)\n  }, 1000)\n}).finally(res => {\n  console.log('finally', res)\n})\n```\n\n\u6267\u884c\u7ed3\u679c\u4e3a\u5982\u4e0b\uff1a\n\n```javascript\nresolve1\nfinally  undefined\ntimer1\nPromise{<resolved>: undefined}\n```\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u6700\u540e\u4e00\u4e2a\u5b9a\u65f6\u5668\u6253\u5370\u51fa\u7684p1\u5176\u5b9e\u662f`.finally`\u7684\u8fd4\u56de\u503c\uff0c\u6211\u4eec\u77e5\u9053`.finally`\u7684\u8fd4\u56de\u503c\u5982\u679c\u5728\u6ca1\u6709\u629b\u51fa\u9519\u8bef\u7684\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u4f1a\u662f\u4e0a\u4e00\u4e2aPromise\u7684\u8fd4\u56de\u503c\uff0c\u800c\u8fd9\u9053\u9898\u4e2d`.finally`\u4e0a\u4e00\u4e2aPromise\u662f`.then()`\uff0c\u4f46\u662f\u8fd9\u4e2a`.then()`\u5e76\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u6240\u4ee5p1\u6253\u5370\u51fa\u6765\u7684Promise\u7684\u503c\u4f1a\u662f`undefined`\uff0c\u5982\u679c\u5728\u5b9a\u65f6\u5668\u7684\u4e0b\u9762\u52a0\u4e0a\u4e00\u4e2a`return 1`\uff0c\u5219\u503c\u5c31\u4f1a\u53d8\u62101\u3002\n\n### 27. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconsole.log('1');\n\nsetTimeout(function() {\n    console.log('2');\n    process.nextTick(function() {\n        console.log('3');\n    })\n    new Promise(function(resolve) {\n        console.log('4');\n        resolve();\n    }).then(function() {\n        console.log('5')\n    })\n})\nprocess.nextTick(function() {\n    console.log('6');\n})\nnew Promise(function(resolve) {\n    console.log('7');\n    resolve();\n}).then(function() {\n    console.log('8')\n})\n\nsetTimeout(function() {\n    console.log('9');\n    process.nextTick(function() {\n        console.log('10');\n    })\n    new Promise(function(resolve) {\n        console.log('11');\n        resolve();\n    }).then(function() {\n        console.log('12')\n    })\n})\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n7\n6\n8\n2\n4\n3\n5\n9\n11\n10\n12\n```\n\n**\uff081\uff09\u7b2c\u4e00\u8f6e\u4e8b\u4ef6\u5faa\u73af\u6d41\u7a0b\u5206\u6790\u5982\u4e0b\uff1a**\n\n- \u6574\u4f53script\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u5b8f\u4efb\u52a1\u8fdb\u5165\u4e3b\u7ebf\u7a0b\uff0c\u9047\u5230`console.log`\uff0c\u8f93\u51fa1\u3002\n- \u9047\u5230`setTimeout`\uff0c\u5176\u56de\u8c03\u51fd\u6570\u88ab\u5206\u53d1\u5230\u5b8f\u4efb\u52a1Event Queue\u4e2d\u3002\u6682\u4e14\u8bb0\u4e3a`setTimeout1`\u3002\n- \u9047\u5230`process.nextTick()`\uff0c\u5176\u56de\u8c03\u51fd\u6570\u88ab\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\u3002\u8bb0\u4e3a`process1`\u3002\n- \u9047\u5230`Promise`\uff0c`new Promise`\u76f4\u63a5\u6267\u884c\uff0c\u8f93\u51fa7\u3002`then`\u88ab\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\u3002\u8bb0\u4e3a`then1`\u3002\n- \u53c8\u9047\u5230\u4e86`setTimeout`\uff0c\u5176\u56de\u8c03\u51fd\u6570\u88ab\u5206\u53d1\u5230\u5b8f\u4efb\u52a1Event Queue\u4e2d\uff0c\u8bb0\u4e3a`setTimeout2`\u3002\n\n| \u5b8f\u4efb\u52a1Event Queue | \u5fae\u4efb\u52a1Event Queue |\n| ----------------- | ----------------- |\n| setTimeout1       | process1          |\n| setTimeout2       | then1             |\n\n\u4e0a\u8868\u662f\u7b2c\u4e00\u8f6e\u4e8b\u4ef6\u5faa\u73af\u5b8f\u4efb\u52a1\u7ed3\u675f\u65f6\u5404Event Queue\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u5df2\u7ecf\u8f93\u51fa\u4e861\u548c7\u3002\u53d1\u73b0\u4e86`process1`\u548c`then1`\u4e24\u4e2a\u5fae\u4efb\u52a1\uff1a\n\n- \u6267\u884c`process1`\uff0c\u8f93\u51fa6\u3002\n- \u6267\u884c`then1`\uff0c\u8f93\u51fa8\u3002\n\n\u7b2c\u4e00\u8f6e\u4e8b\u4ef6\u5faa\u73af\u6b63\u5f0f\u7ed3\u675f\uff0c\u8fd9\u4e00\u8f6e\u7684\u7ed3\u679c\u662f\u8f93\u51fa1\uff0c7\uff0c6\uff0c8\u3002\n\n\n**\uff082\uff09\u7b2c\u4e8c\u8f6e\u65f6\u95f4\u5faa\u73af\u4ece**`**setTimeout1**`**\u5b8f\u4efb\u52a1\u5f00\u59cb\uff1a**\n\n- \u9996\u5148\u8f93\u51fa2\u3002\u63a5\u4e0b\u6765\u9047\u5230\u4e86`process.nextTick()`\uff0c\u540c\u6837\u5c06\u5176\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\uff0c\u8bb0\u4e3a`process2`\u3002\n- `new Promise`\u7acb\u5373\u6267\u884c\u8f93\u51fa4\uff0c`then`\u4e5f\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\uff0c\u8bb0\u4e3a`then2`\u3002\n\n| \u5b8f\u4efb\u52a1Event Queue | \u5fae\u4efb\u52a1Event Queue |\n| ----------------- | ----------------- |\n| setTimeout2       | process2          |\n|                   | then2             |\n\n\u7b2c\u4e8c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u5b8f\u4efb\u52a1\u7ed3\u675f\uff0c\u53d1\u73b0\u6709`process2`\u548c`then2`\u4e24\u4e2a\u5fae\u4efb\u52a1\u53ef\u4ee5\u6267\u884c\uff1a\n\n- \u8f93\u51fa3\u3002\n- \u8f93\u51fa5\u3002\n\n\u7b2c\u4e8c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7ed3\u675f\uff0c\u7b2c\u4e8c\u8f6e\u8f93\u51fa2\uff0c4\uff0c3\uff0c5\u3002\n\n\n**\uff083\uff09\u7b2c\u4e09\u8f6e\u4e8b\u4ef6\u5faa\u73af\u5f00\u59cb\uff0c\u6b64\u65f6\u53ea\u5269setTimeout2\u4e86\uff0c\u6267\u884c\u3002**\n\n- \u76f4\u63a5\u8f93\u51fa9\u3002\n- \u5c06`process.nextTick()`\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\u3002\u8bb0\u4e3a`process3`\u3002\n- \u76f4\u63a5\u6267\u884c`new Promise`\uff0c\u8f93\u51fa11\u3002\n- \u5c06`then`\u5206\u53d1\u5230\u5fae\u4efb\u52a1Event Queue\u4e2d\uff0c\u8bb0\u4e3a`then3`\u3002\n\n| \u5b8f\u4efb\u52a1Event Queue | \u5fae\u4efb\u52a1Event Queue |\n| ----------------- | ----------------- |\n|                   | process3          |\n|                   | then3             |\n\n\u7b2c\u4e09\u8f6e\u4e8b\u4ef6\u5faa\u73af\u5b8f\u4efb\u52a1\u6267\u884c\u7ed3\u675f\uff0c\u6267\u884c\u4e24\u4e2a\u5fae\u4efb\u52a1`process3`\u548c`then3`\uff1a\n\n- \u8f93\u51fa10\u3002\n- \u8f93\u51fa12\u3002\n\n\u7b2c\u4e09\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7ed3\u675f\uff0c\u7b2c\u4e09\u8f6e\u8f93\u51fa9\uff0c11\uff0c10\uff0c12\u3002\n\n\n\u6574\u6bb5\u4ee3\u7801\uff0c\u5171\u8fdb\u884c\u4e86\u4e09\u6b21\u4e8b\u4ef6\u5faa\u73af\uff0c\u5b8c\u6574\u7684\u8f93\u51fa\u4e3a1\uff0c7\uff0c6\uff0c8\uff0c2\uff0c4\uff0c3\uff0c5\uff0c9\uff0c11\uff0c10\uff0c12\u3002\n\n### 28. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconsole.log(1)\n\nsetTimeout(() => {\n  console.log(2)\n})\n\nnew Promise(resolve =>  {\n  console.log(3)\n  resolve(4)\n}).then(d => console.log(d))\n\nsetTimeout(() => {\n  console.log(5)\n  new Promise(resolve =>  {\n    resolve(6)\n  }).then(d => console.log(d))\n})\n\nsetTimeout(() => {\n  console.log(7)\n})\n\nconsole.log(8)\n```\n\n\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n3\n8\n4\n2\n5\n6\n7\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u6267\u884cscript\u4ee3\u7801\uff0c\u6253\u5370\u51fa1\uff1b\n1. \u9047\u5230\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230Promise\uff0c\u6267\u884c\u4ee3\u7801\uff0c\u6253\u5370\u51fa3\uff0c\u9047\u5230resolve\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\uff0c\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230\u7b2c\u4e09\u4e2a\u5b9a\u65f6\u5668\uff0c\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u7ee7\u7eed\u6267\u884cscript\u4ee3\u7801\uff0c\u6253\u5370\u51fa8\uff0c\u7b2c\u4e00\u8f6e\u6267\u884c\u7ed3\u675f\uff1b\n1. \u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6253\u5370\u51fa\u7b2c\u4e00\u4e2aPromise\u7684resolve\u7ed3\u679c\uff1a4\uff1b\n1. \u5f00\u59cb\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u6267\u884c\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fa2\uff1b\n1. \u6b64\u65f6\u6ca1\u6709\u5fae\u4efb\u52a1\uff0c\u7ee7\u7eed\u6267\u884c\u5b8f\u4efb\u52a1\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\uff0c\u9996\u5148\u6253\u5370\u51fa5\uff0c\u9047\u5230Promise\uff0c\u9996\u9009\u6253\u5370\u51fa6\uff0c\u9047\u5230resolve\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6253\u5370\u51fa6\uff1b\n1. \u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fa7\u3002\n\n### 29. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nconsole.log(1);\n    \nsetTimeout(() => {\n  console.log(2);\n  Promise.resolve().then(() => {\n    console.log(3)\n  });\n});\n\nnew Promise((resolve, reject) => {\n  console.log(4)\n  resolve(5)\n}).then((data) => {\n  console.log(data);\n})\n\nsetTimeout(() => {\n  console.log(6);\n})\n\nconsole.log(7);\n```\n\n\u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1\n4\n7\n5\n2\n3\n6\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u6267\u884cscrip\u4ee3\u7801\uff0c\u6253\u5370\u51fa1\uff1b\n1. \u9047\u5230\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668setTimeout\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230Promise\uff0c\u6267\u884c\u91cc\u9762\u7684\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fa4\uff0c\u9047\u5230resolve\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668setTimeout\uff0c\u5c06\u5176\u52a0\u5165\u5230\u7ea2\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6267\u884cscript\u4ee3\u7801\uff0c\u6253\u5370\u51fa7\uff0c\u81f3\u6b64\u7b2c\u4e00\u8f6e\u6267\u884c\u5b8c\u6210\uff1b\n1. \u6307\u5b9a\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4ee3\u7801\uff0c\u6253\u5370\u51faresolve\u7684\u7ed3\u679c\uff1a5\uff1b\n1. \u6267\u884c\u5b8f\u4efb\u52a1\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668setTimeout\uff0c\u9996\u5148\u6253\u5370\u51fa2\uff0c\u7136\u540e\u9047\u5230\u00a0Promise.resolve().then()\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff1b\n1. \u6267\u884c\u5b8c\u8fd9\u4e2a\u5b8f\u4efb\u52a1\uff0c\u5c31\u5f00\u59cb\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6253\u5370\u51fa3\uff1b\n1. \u7ee7\u7eed\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fa6\u3002\n\n### 30. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nPromise.resolve().then(() => {\n    console.log('1');\n    throw 'Error';\n}).then(() => {\n    console.log('2');\n}).catch(() => {\n    console.log('3');\n    throw 'Error';\n}).then(() => {\n    console.log('4');\n}).catch(() => {\n    console.log('5');\n}).then(() => {\n    console.log('6');\n});\n```\n\n\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```javascript\n1 \n3 \n5 \n6\n```\n\n\u5728\u8fd9\u9053\u9898\u76ee\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\uff0c\u65e0\u8bba\u662fthne\u8fd8\u662fcatch\u4e2d\uff0c\u53ea\u8981throw \u629b\u51fa\u4e86\u9519\u8bef\uff0c\u5c31\u4f1a\u88abcatch\u6355\u83b7\uff0c\u5982\u679c\u6ca1\u6709throw\u51fa\u9519\u8bef\uff0c\u5c31\u88ab\u7ee7\u7eed\u6267\u884c\u540e\u9762\u7684then\u3002\n\n### 31. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nsetTimeout(function () {\n  console.log(1);\n}, 100);\n\nnew Promise(function (resolve) {\n  console.log(2);\n  resolve();\n  console.log(3);\n}).then(function () {\n  console.log(4);\n  new Promise((resove, reject) => {\n    console.log(5);\n    setTimeout(() =>  {\n      console.log(6);\n    }, 10);\n  })\n});\nconsole.log(7);\nconsole.log(8);\n```\n\n\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a\n\n```javascript\n2\n3\n7\n8\n4\n5\n6\n1\n```\n\n\u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n1. \u9996\u5148\u9047\u5230\u5b9a\u65f6\u5668\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\uff1b\n1. \u9047\u5230Promise\uff0c\u9996\u5148\u6267\u884c\u91cc\u9762\u7684\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fa2\uff0c\u9047\u5230resolve\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u6267\u884c\u540e\u9762\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fa3\uff1b\n1. \u7ee7\u7eed\u6267\u884cscript\u4e2d\u7684\u4ee3\u7801\uff0c\u6253\u5370\u51fa7\u548c8\uff0c\u81f3\u6b64\u7b2c\u4e00\u8f6e\u4ee3\u7801\u6267\u884c\u5b8c\u6210\uff1b\n1. \u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4ee3\u7801\uff0c\u9996\u5148\u6253\u5370\u51fa4\uff0c\u5982\u9047\u5230Promise\uff0c\u6267\u884c\u5176\u4e2d\u7684\u540c\u6b65\u4ee3\u7801\uff0c\u6253\u5370\u51fa5\uff0c\u9047\u5230\u5b9a\u65f6\u5668\uff0c\u5c06\u5176\u52a0\u5165\u5230\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u6b64\u65f6\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u6709\u4e24\u4e2a\u5b9a\u65f6\u5668\uff1b\n1. \u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4ee3\u7801\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u6ce8\u610f\u662f\u7684\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668\u7684\u65f6\u95f4\u4e3a100ms\uff0c\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\u7684\u65f6\u95f4\u4e3a10ms\uff0c\u6240\u4ee5\u5148\u6267\u884c\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\uff0c\u6253\u5370\u51fa6\uff1b\n1. \u6b64\u65f6\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\uff0c\u7ee7\u7eed\u6267\u884c\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u6253\u5370\u51fa1\u3002\n\n\n\n\u505a\u5b8c\u8fd9\u9053\u9898\u76ee\uff0c\u6211\u4eec\u5c31\u9700\u8981\u683c\u5916\u6ce8\u610f\uff0c\u6bcf\u4e2a\u5b9a\u65f6\u5668\u7684\u65f6\u95f4\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u5b9a\u65f6\u5668\u7684\u65f6\u95f4\u90fd\u4e3a0\u54e6\u3002\n\n## \u4e8c\u3001this\n\n### 1. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction foo() {\n  console.log( this.a );\n}\n\nfunction doFoo() {\n  foo();\n}\n\nvar obj = {\n  a: 1,\n  doFoo: doFoo\n};\n\nvar a = 2; \nobj.doFoo()\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a2 \n\n\u5728Javascript\u4e2d\uff0cthis\u6307\u5411\u51fd\u6570\u6267\u884c\u65f6\u7684\u5f53\u524d\u5bf9\u8c61\u3002\u5728\u6267\u884cfoo\u7684\u65f6\u5019\uff0c\u6267\u884c\u73af\u5883\u5c31\u662fdoFoo\u51fd\u6570\uff0c\u6267\u884c\u73af\u5883\u4e3a\u5168\u5c40\u3002\u6240\u4ee5\uff0cfoo\u4e2d\u7684this\u662f\u6307\u5411window\u7684\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fa2\u3002\n\n### 2. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar a = 10\nvar obj = {\n  a: 20,\n  say: () => {\n    console.log(this.a)\n  }\n}\nobj.say() \n\nvar anotherObj = { a: 30 } \nobj.say.apply(anotherObj) \n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a10  10\n\n\u6211\u4e48\u77e5\u9053\uff0c\u7bad\u5934\u51fd\u6570\u65f6\u4e0d\u7ed1\u5b9athis\u7684\uff0c\u5b83\u7684this\u6765\u81ea\u539f\u5176\u7236\u7ea7\u6240\u5904\u7684\u4e0a\u4e0b\u6587\uff0c\u6240\u4ee5\u9996\u5148\u4f1a\u6253\u5370\u5168\u5c40\u4e2d\u7684 a \u7684\u503c10\u3002\u540e\u9762\u867d\u7136\u8ba9say\u65b9\u6cd5\u6307\u5411\u4e86\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f46\u662f\u4ecd\u4e0d\u80fd\u6539\u53d8\u7bad\u5934\u51fd\u6570\u7684\u7279\u6027\uff0c\u5b83\u7684this\u4ecd\u7136\u662f\u6307\u5411\u5168\u5c40\u7684\uff0c\u6240\u4ee5\u4f9d\u65e7\u4f1a\u8f93\u51fa10\u3002\n\n\n\u4f46\u662f\uff0c\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u4f1a\u6709\u5b8c\u5168\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\uff1a\n\n```javascript\nvar a = 10  \nvar obj = {  \n  a: 20,  \n  say(){\n    console.log(this.a)  \n  }  \n}  \nobj.say()   \nvar anotherObj={a:30}   \nobj.say.apply(anotherObj)\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a20 30\n\n\n\u8fd9\u65f6\uff0csay\u65b9\u6cd5\u4e2d\u7684this\u5c31\u4f1a\u6307\u5411\u4ed6\u6240\u5728\u7684\u5bf9\u8c61\uff0c\u8f93\u51fa\u5176\u4e2d\u7684a\u7684\u503c\u3002\n\n### 3. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction a() {\n  console.log(this);\n}\na.call(null);\n```\n\n\u6253\u5370\u7ed3\u679c\uff1awindow\u5bf9\u8c61\n\n\n\u6839\u636eECMAScript262\u89c4\u8303\u89c4\u5b9a\uff1a\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165\u7684\u5bf9\u8c61\u8c03\u7528\u8005\u662fnull\u6216\u8005undefined\uff0ccall\u65b9\u6cd5\u5c06\u628a\u5168\u5c40\u5bf9\u8c61\uff08\u6d4f\u89c8\u5668\u4e0a\u662fwindow\u5bf9\u8c61\uff09\u4f5c\u4e3athis\u7684\u503c\u3002\u6240\u4ee5\uff0c\u4e0d\u7ba1\u4f20\u5165null \u8fd8\u662f undefined\uff0c\u5176this\u90fd\u662f\u5168\u5c40\u5bf9\u8c61window\u3002\u6240\u4ee5\uff0c\u5728\u6d4f\u89c8\u5668\u4e0a\u7b54\u6848\u662f\u8f93\u51fa window \u5bf9\u8c61\u3002\n\n\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u4e25\u683c\u6a21\u5f0f\u4e2d\uff0cnull \u5c31\u662f null\uff0cundefined \u5c31\u662f undefined\uff1a\n\n```javascript\n'use strict';\n\nfunction a() {\n    console.log(this);\n}\na.call(null); // null\na.call(undefined); // undefined\n```\n\n### 4. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar obj = { \n  name : 'cuggz', \n  fun : function(){ \n    console.log(this.name); \n  } \n} \nobj.fun()     // cuggz\nnew obj.fun() // undefined\n```\n\n\u4f7f\u7528new\u6784\u9020\u51fd\u6570\u65f6\uff0c\u5176this\u6307\u5411\u7684\u662f\u5168\u5c40\u73af\u5883window\u3002\n\n### 6. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar obj = {\n   say: function() {\n     var f1 = () =>  {\n       console.log(\"1111\", this);\n     }\n     f1();\n   },\n   pro: {\n     getPro:() =>  {\n        console.log(this);\n     }\n   }\n}\nvar o = obj.say;\no();\nobj.say();\nobj.pro.getPro();\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a\n\n```javascript\n1111 window\u5bf9\u8c61\n1111 obj\u5bf9\u8c61\nwindow\u5bf9\u8c61\n```\n\n**\u89e3\u6790\uff1a**\n\n1. o()\uff0co\u662f\u5728\u5168\u5c40\u6267\u884c\u7684\uff0c\u800cf1\u662f\u7bad\u5934\u51fd\u6570\uff0c\u5b83\u662f\u6ca1\u6709\u7ed1\u5b9athis\u7684\uff0c\u5b83\u7684this\u6307\u5411\u5176\u7236\u7ea7\u7684this\uff0c\u5176\u7236\u7ea7say\u65b9\u6cd5\u7684this\u6307\u5411\u7684\u662f\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fawindow\uff1b\n1. obj.say()\uff0c\u8c01\u8c03\u7528say\uff0csay \u7684this\u5c31\u6307\u5411\u8c01\uff0c\u6240\u4ee5\u6b64\u65f6this\u6307\u5411\u7684\u662fobj\u5bf9\u8c61\uff1b\n1. obj.pro.getPro()\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u7bad\u5934\u51fd\u6570\u65f6\u4e0d\u7ed1\u5b9athis\u7684\uff0cgetPro\u5904\u4e8epro\u4e2d\uff0c\u800c\u5bf9\u8c61\u4e0d\u6784\u6210\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u7bad\u5934\u7684\u51fd\u6570\u7684this\u5c31\u6307\u5411\u4e86\u5168\u5c40\u4f5c\u7528\u57dfwindow\u3002\n\n### 7. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar myObject = {\n    foo: \"bar\",\n    func: function() {\n        var self = this;\n        console.log(this.foo);  \n        console.log(self.foo);  \n        (function() {\n            console.log(this.foo);  \n            console.log(self.foo);  \n        }());\n    }\n};\nmyObject.func();\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1abar bar undefined bar\n\n\n**\u89e3\u6790\uff1a**\n\n1. \u9996\u5148func\u662f\u7531myObject\u8c03\u7528\u7684\uff0cthis\u6307\u5411myObject\u3002\u53c8\u56e0\u4e3avar self = this;\u6240\u4ee5self\u6307\u5411myObject\u3002\n1. \u8fd9\u4e2a\u7acb\u5373\u6267\u884c\u533f\u540d\u51fd\u6570\u8868\u8fbe\u5f0f\u662f\u7531window\u8c03\u7528\u7684\uff0cthis\u6307\u5411window \u3002\u7acb\u5373\u6267\u884c\u533f\u540d\u51fd\u6570\u7684\u4f5c\u7528\u57df\u5904\u4e8emyObject.func\u7684\u4f5c\u7528\u57df\u4e2d\uff0c\u5728\u8fd9\u4e2a\u4f5c\u7528\u57df\u627e\u4e0d\u5230self\u53d8\u91cf\uff0c\u6cbf\u7740\u4f5c\u7528\u57df\u94fe\u5411\u4e0a\u67e5\u627eself\u53d8\u91cf\uff0c\u627e\u5230\u4e86\u6307\u5411 myObject\u5bf9\u8c61\u7684self\u3002\n\n### 8. \u4ee3\u7801\u8f93\u51fa\u95ee\u9898\n\n```javascript\nwindow.number = 2;\nvar obj = {\n\u00a0number: 3,\n\u00a0db1: (function(){\n\u00a0  console.log(this);\n\u00a0  this.number *= 4;\n\u00a0  return function(){\n\u00a0   \u00a0console.log(this);\n\u00a0   \u00a0this.number *= 5;\n\u00a0  }\n\u00a0})()\n}\nvar db1 = obj.db1;\ndb1();\nobj.db1();\nconsole.log(obj.number);     // 15\nconsole.log(window.number);  // 40\n```\n\n\u8fd9\u9053\u9898\u76ee\u770b\u6e05\u8d77\u6765\u6709\u70b9\u4e71\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u8003\u5bdfthis\u6307\u5411\u7684:\n\n1. \u6267\u884cdb1()\u65f6\uff0cthis\u6307\u5411\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u6240\u4ee5window.number * 4 = 8\uff0c\u7136\u540e\u6267\u884c\u533f\u540d\u51fd\u6570\uff0c \u6240\u4ee5window.number * 5 = 40\uff1b\n1. \u6267\u884cobj.db1();\u65f6\uff0cthis\u6307\u5411obj\u5bf9\u8c61\uff0c\u6267\u884c\u533f\u540d\u51fd\u6570\uff0c\u6240\u4ee5obj.numer * 5 = 15\u3002\n\n### 9. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar length = 10;\nfunction fn() {\n    console.log(this.length);\n}\n \nvar obj = {\n  length: 5,\n  method: function(fn) {\n    fn();\n    arguments[0]();\n  }\n};\n \nobj.method(fn, 1);\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a 10 2 \n\n\n**\u89e3\u6790\uff1a**\n\n1. \u7b2c\u4e00\u6b21\u6267\u884cfn()\uff0cthis\u6307\u5411window\u5bf9\u8c61\uff0c\u8f93\u51fa10\u3002\n1. \u7b2c\u4e8c\u6b21\u6267\u884carguments[0]()\uff0c\u76f8\u5f53\u4e8earguments\u8c03\u7528\u65b9\u6cd5\uff0cthis\u6307\u5411arguments\uff0c\u800c\u8fd9\u91cc\u4f20\u4e86\u4e24\u4e2a\u53c2\u6570\uff0c\u6545\u8f93\u51faarguments\u957f\u5ea6\u4e3a2\u3002\n\n### 10. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar a = 1;\nfunction printA(){\n  console.log(this.a);\n}\nvar obj={\n  a:2,\n  foo:printA,\n  bar:function(){\n    printA();\n  }\n}\n\nobj.foo(); // 2\nobj.bar(); // 1\nvar foo = obj.foo;\nfoo(); // 1\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a 2 1 1 \n\n\n**\u89e3\u6790\uff1a**\n\n1. obj.foo()\uff0cfoo \u7684this\u6307\u5411obj\u5bf9\u8c61\uff0c\u6240\u4ee5a\u4f1a\u8f93\u51fa2\uff1b\n1. obj.bar()\uff0cprintA\u5728bar\u65b9\u6cd5\u4e2d\u6267\u884c\uff0c\u6240\u4ee5\u6b64\u65f6printA\u7684this\u6307\u5411\u7684\u662fwindow\uff0c\u6240\u4ee5\u4f1a\u8f93\u51fa1\uff1b\n1. foo()\uff0cfoo\u662f\u5728\u5168\u5c40\u5bf9\u8c61\u4e2d\u6267\u884c\u7684\uff0c\u6240\u4ee5\u5176this\u6307\u5411\u7684\u662fwindow\uff0c\u6240\u4ee5\u4f1a\u8f93\u51fa1\uff1b\n\n### 11. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar x = 3;\nvar y = 4;\nvar obj = {\n    x: 1,\n    y: 6,\n    getX: function() {\n        var x = 5;\n        return function() {\n            return this.x;\n        }();\n    },\n    getY: function() {\n        var y = 7;\n        return this.y;\n    }\n}\nconsole.log(obj.getX()) // 3\nconsole.log(obj.getY()) // 6\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a3  6\n\n\n**\u89e3\u6790\uff1a**\n\n1. \u6211\u4eec\u77e5\u9053\uff0c\u533f\u540d\u51fd\u6570\u7684this\u662f\u6307\u5411\u5168\u5c40\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5this\u6307\u5411window\uff0c\u4f1a\u6253\u5370\u51fa3\uff1b\n1. getY\u662f\u7531obj\u8c03\u7528\u7684\uff0c\u6240\u4ee5\u5176this\u6307\u5411\u7684\u662fobj\u5bf9\u8c61\uff0c\u4f1a\u6253\u5370\u51fa6\u3002\n\n### 12. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\n var a = 10; \n var obt = { \n   a: 20, \n   fn: function(){ \n     var a = 30; \n     console.log(this.a)\n   } \n }\n obt.fn();  // 20\n obt.fn.call(); // 10\n (obt.fn)(); // 20\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a 20  10  20 \n\n\n**\u89e3\u6790\uff1a**\n\n1. \u00a0obt.fn()\uff0cfn\u662f\u7531obt\u8c03\u7528\u7684\uff0c\u6240\u4ee5\u5176this\u6307\u5411obt\u5bf9\u8c61\uff0c\u4f1a\u6253\u5370\u51fa20\uff1b\n1. \u00a0obt.fn.call()\uff0c\u8fd9\u91cccall\u7684\u53c2\u6570\u5565\u90fd\u6ca1\u5199\uff0c\u5c31\u8868\u793anull\uff0c\u6211\u4eec\u77e5\u9053\u5982\u679ccall\u7684\u53c2\u6570\u4e3aundefined\u6216null\uff0c\u90a3\u4e48this\u5c31\u4f1a\u6307\u5411\u5168\u5c40\u5bf9\u8c61this\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fa 10\uff1b\n1. \u00a0(obt.fn)()\uff0c \u8fd9\u91cc\u7ed9\u8868\u8fbe\u5f0f\u52a0\u4e86\u62ec\u53f7\uff0c\u800c\u62ec\u53f7\u7684\u4f5c\u7528\u662f\u6539\u53d8\u8868\u8fbe\u5f0f\u7684\u8fd0\u7b97\u987a\u5e8f\uff0c\u800c\u5728\u8fd9\u91cc\u52a0\u4e0e\u4e0d\u52a0\u62ec\u53f7\u5e76\u65e0\u5f71\u54cd\uff1b\u76f8\u5f53\u4e8e \u00a0obt.fn()\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fa 20\uff1b\n\n### 13. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction a(xx){\n  this.x = xx;\n  return this\n};\nvar x = a(5);\nvar y = a(6);\n\nconsole.log(x.x)  // undefined\nconsole.log(y.x)  // 6\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a undefined  6\n\n\n**\u89e3\u6790\uff1a**\n\n1. \u6700\u5173\u952e\u7684\u5c31\u662fvar x = a(5)\uff0c\u51fd\u6570a\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\u8c03\u7528\uff0c\u6240\u4ee5\u51fd\u6570\u5185\u90e8\u7684this\u6307\u5411window\u5bf9\u8c61\u3002**\u6240\u4ee5 this.x = 5 \u5c31\u76f8\u5f53\u4e8e\uff1awindow.x = 5\u3002**\u4e4b\u540e return this\uff0c\u4e5f\u5c31\u662f\u8bf4 var x = a(5) \u4e2d\u7684x\u53d8\u91cf\u7684\u503c\u662fwindow\uff0c\u8fd9\u91cc\u7684x\u5c06\u51fd\u6570\u5185\u90e8\u7684x\u7684\u503c\u8986\u76d6\u4e86\u3002\u7136\u540e\u6267\u884cconsole.log(x.x)\uff0c \u4e5f\u5c31\u662fconsole.log(window.x)\uff0c\u800cwindow\u5bf9\u8c61\u4e2d\u6ca1\u6709x\u5c5e\u6027\uff0c\u6240\u4ee5\u4f1a\u8f93\u51faundefined\u3002\n1. \u5f53\u6307\u5411y.x\u65f6\uff0c\u4f1a\u7ed9\u5168\u5c40\u53d8\u91cf\u4e2d\u7684x\u8d4b\u503c\u4e3a6\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fa6\u3002\n\n### 14. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction foo(something){\n    this.a = something\n}\n\nvar obj1 = {\n    foo: foo\n}\n\nvar obj2 = {}\n\nobj1.foo(2); \nconsole.log(obj1.a); // 2\n\nobj1.foo.call(obj2, 3);\nconsole.log(obj2.a); // 3\n\nvar bar = new obj1.foo(4)\nconsole.log(obj1.a); // 2\nconsole.log(bar.a); // 4\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a 2  3  2  4\n\n\n**\u89e3\u6790\uff1a**\n\n1. \u9996\u5148\u6267\u884cobj1.foo(2);\u00a0\u4f1a\u5728obj\u4e2d\u6dfb\u52a0a\u5c5e\u6027\uff0c\u5176\u503c\u4e3a2\u3002\u4e4b\u540e\u6267\u884cobj1.a\uff0ca\u662f\u53f3obj1\u8c03\u7528\u7684\uff0c\u6240\u4ee5this\u6307\u5411obj\uff0c\u6253\u5370\u51fa2\uff1b\n1. \u6267\u884c obj1.foo.call(obj2, 3) \u65f6\uff0c\u4f1a\u5c06foo\u7684this\u6307\u5411obj2\uff0c\u540e\u9762\u5c31\u548c\u4e0a\u9762\u4e00\u6837\u4e86\uff0c\u6240\u4ee5\u4f1a\u6253\u5370\u51fa3\uff1b\n1. obj1.a\u4f1a\u6253\u5370\u51fa2\uff1b\n1. \u6700\u540e\u5c31\u662f\u8003\u5bdfthis\u7ed1\u5b9a\u7684\u4f18\u5148\u7ea7\u4e86\uff0cnew \u7ed1\u5b9a\u662f\u6bd4\u9690\u5f0f\u7ed1\u5b9a\u4f18\u5148\u7ea7\u9ad8\uff0c\u6240\u4ee5\u4f1a\u8f93\u51fa4\u3002\n\n### 15. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction foo(something){\n    this.a = something\n}\n\nvar obj1 = {}\n\nvar bar = foo.bind(obj1);\nbar(2);\nconsole.log(obj1.a); // 2\n\nvar baz = new bar(3);\nconsole.log(obj1.a); // 2\nconsole.log(baz.a); // 3\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a 2  2  3\n\n\n\u8fd9\u9053\u9898\u76ee\u548c\u4e0a\u9762\u9898\u76ee\u5dee\u4e0d\u591a\uff0c\u4e3b\u8981\u90fd\u662f\u8003\u5bdfthis\u7ed1\u5b9a\u7684\u4f18\u5148\u7ea7\u3002\u8bb0\u4f4f\u4ee5\u4e0b\u7ed3\u8bba\u5373\u53ef\uff1a**this\u7ed1\u5b9a\u7684\u4f18\u5148\u7ea7\uff1anew\u7ed1\u5b9a > \u663e\u5f0f\u7ed1\u5b9a > \u9690\u5f0f\u7ed1\u5b9a > \u9ed8\u8ba4\u7ed1\u5b9a\u3002**\n\n## \u4e09\u3001\u4f5c\u7528\u57df&\u53d8\u91cf\u63d0\u5347&\u95ed\u5305\n\n### 1. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\n(function(){\n   var x = y = 1;\n})();\nvar z;\n\nconsole.log(y); // 1\nconsole.log(z); // undefined\nconsole.log(x); // Uncaught ReferenceError: x is not defined\n```\n\n\u8fd9\u6bb5\u4ee3\u7801\u7684\u5173\u952e\u5728\u4e8e\uff1avar x = y = 1; \u5b9e\u9645\u4e0a\u8fd9\u91cc\u662f\u4ece\u53f3\u5f80\u5de6\u6267\u884c\u7684\uff0c\u9996\u5148\u6267\u884cy = 1, \u56e0\u4e3ay\u6ca1\u6709\u4f7f\u7528var\u58f0\u660e\uff0c\u6240\u4ee5\u5b83\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u7136\u540e\u7b2c\u4e8c\u6b65\u662f\u5c06y\u8d4b\u503c\u7ed9x\uff0c\u8bb2\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u8d4b\u503c\u7ed9\u4e86\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0c\u6700\u7ec8\uff0cx\u662f\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0cy\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u6240\u4ee5\u6253\u5370x\u662f\u62a5\u9519\u3002\n\n### 2. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar a, b\n(function () {\n   console.log(a);\n   console.log(b);\n   var a = (b = 3);\n   console.log(a);\n   console.log(b);   \n})()\nconsole.log(a);\nconsole.log(b);\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a\n\n```javascript\nundefined \nundefined \n3 \n3 \nundefined \n3\n```\n\n\u8fd9\u4e2a\u9898\u76ee\u548c\u4e0a\u9762\u9898\u76ee\u8003\u5bdf\u7684\u77e5\u8bc6\u70b9\u7c7b\u4f3c\uff0cb\u8d4b\u503c\u4e3a3\uff0cb\u6b64\u65f6\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u800c\u5c063\u8d4b\u503c\u7ed9a\uff0ca\u662f\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff0c\u6240\u4ee5\u6700\u540e\u6253\u5370\u7684\u65f6\u5019\uff0ca\u4ecd\u65e7\u662fundefined\u3002\n\n### 3. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar friendName = 'World';\n(function() {\n  if (typeof friendName === 'undefined') {\n    var friendName = 'Jack';\n    console.log('Goodbye ' + friendName);\n  } else {\n    console.log('Hello ' + friendName);\n  }\n})();\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1aGoodbye Jack\n\n\n\u6211\u4eec\u77e5\u9053\uff0c\u5728 JavaScript\u4e2d\uff0c Function \u548c var \u90fd\u4f1a\u88ab\u63d0\u5347\uff08\u53d8\u91cf\u63d0\u5347\uff09\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u5c31\u76f8\u5f53\u4e8e\uff1a\n\n```javascript\nvar name = 'World!';\n(function () {\n    var name;\n    if (typeof name === 'undefined') {\n        name = 'Jack';\n        console.log('Goodbye ' + name);\n    } else {\n        console.log('Hello ' + name);\n    }\n})();\n```\n\n\u8fd9\u6837\uff0c\u7b54\u6848\u5c31\u4e00\u76ee\u4e86\u7136\u4e86\u3002\n\n### 4. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction\u00a0fn1(){\n\u00a0\u00a0console.log('fn1')\n}\nvar\u00a0fn2\n \nfn1()\nfn2()\n \nfn2\u00a0=\u00a0function() {\n\u00a0\u00a0console.log('fn2')\n}\n \nfn2()\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a \n\n```javascript\nfn1\nUncaught TypeError: fn2 is not a function\nfn2\n```\n\n\u8fd9\u91cc\u4e5f\u662f\u5728\u8003\u5bdf\u53d8\u91cf\u63d0\u5347\uff0c\u5173\u952e\u5728\u4e8e\u7b2c\u4e00\u4e2afn2()\uff0c\u8fd9\u65f6fn2\u4ecd\u662f\u4e00\u4e2aundefined\u7684\u53d8\u91cf\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519fn2\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u3002\n\n### 5. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction a() {\n    var temp = 10;\n    function b() {\n        console.log(temp); // 10\n    }\n    b();\n}\na();\n\nfunction a() {\n    var temp = 10;\n    b();\n}\nfunction b() {\n    console.log(temp); // \u62a5\u9519 Uncaught ReferenceError: temp is not defined\n}\na();\n```\n\n\u5728\u4e0a\u9762\u7684\u4e24\u6bb5\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u6bb5\u662f\u53ef\u4ee5\u6b63\u5e38\u8f93\u51fa\uff0c\u8fd9\u4e2a\u5e94\u8be5\u6ca1\u5565\u95ee\u9898\uff0c\u5173\u952e\u5728\u4e8e\u7b2c\u4e8c\u6bb5\u4ee3\u7801\uff0c\u5b83\u4f1a\u62a5\u9519Uncaught ReferenceError: temp is not defined\u3002\u8fd9\u65f6\u56e0\u4e3a\u5728b\u65b9\u6cd5\u6267\u884c\u65f6\uff0ctemp \u7684\u503c\u4e3aundefined\u3002\n\n### 6. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\n var a=3;\n function c(){\n    alert(a);\n }\n (function(){\n  var a=4;\n  c();\n })();\n```\n\njs\u4e2d\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u94fe\u4e0e\u5b9a\u4e49\u65f6\u7684\u73af\u5883\u6709\u5173\uff0c\u4e0e\u6267\u884c\u65f6\u65e0\u5173\u3002\u6267\u884c\u73af\u5883\u53ea\u4f1a\u6539\u53d8this\u3001\u4f20\u9012\u7684\u53c2\u6570\u3001\u5168\u5c40\u53d8\u91cf\u7b49\n\n### 7.  \u4ee3\u7801\u8f93\u51fa\u95ee\u9898\n\n```javascript\nfunction fun(n, o) {\n  console.log(o)\n  return {\n    fun: function(m){\n      return fun(m, n);\n    }\n  };\n}\nvar a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);\nvar b = fun(0).fun(1).fun(2).fun(3);\nvar c = fun(0).fun(1);  c.fun(2);  c.fun(3);\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a\n\n```javascript\nundefined  0  0  0\nundefined  0  1  2\nundefined  0  1  1\n```\n\n\u8fd9\u662f\u4e00\u9053\u5173\u4e8e\u95ed\u5305\u7684\u9898\u76ee\uff0c\u5bf9\u4e8efun\u65b9\u6cd5\uff0c\u8c03\u7528\u4e4b\u540e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u6211\u4eec\u77e5\u9053\uff0c\u5f53\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u4f20\u5165\u7684\u5b9e\u53c2\u6bd4\u51fd\u6570\u58f0\u660e\u65f6\u6307\u5b9a\u7684\u5f62\u53c2\u4e2a\u6570\u8981\u5c11\uff0c\u5269\u4e0b\u7684\u5f62\u53c2\u90fd\u5c06\u8bbe\u7f6e\u4e3aundefined\u503c\u3002\u6240\u4ee5 `console.log(o);`\u00a0\u4f1a\u8f93\u51faundefined\u3002\u800ca\u5c31\u662f\u662ffun(0)\u8fd4\u56de\u7684\u90a3\u4e2a\u5bf9\u8c61\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u51fd\u6570fun\u4e2d\u53c2\u6570 n \u7684\u503c\u662f0\uff0c\u800c\u8fd4\u56de\u7684\u90a3\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u9700\u8981\u4e00\u4e2a\u53c2\u6570n\uff0c\u800c\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4f5c\u7528\u57df\u4e2d\u6ca1\u6709n\uff0c\u5b83\u5c31\u7ee7\u7eed\u6cbf\u7740\u4f5c\u7528\u57df\u5411\u4e0a\u4e00\u7ea7\u7684\u4f5c\u7528\u57df\u4e2d\u5bfb\u627en\uff0c\u6700\u540e\u5728\u51fd\u6570fun\u4e2d\u627e\u5230\u4e86n\uff0cn\u7684\u503c\u662f0\u3002\u4e86\u89e3\u4e86\u8fd9\u4e00\u70b9\uff0c\u5176\u4ed6\u8fd0\u7b97\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n### 8. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nf = function() {return true;};   \ng = function() {return false;};   \n(function() {   \n   if (g() && [] == ![]) {   \n      f = function f() {return false;};   \n      function g() {return true;}   \n   }   \n})();   \nconsole.log(f());\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a false\n\n\u8fd9\u91cc\u9996\u5148\u5b9a\u4e49\u4e86\u4e24\u4e2a\u53d8\u91cff\u548cg\uff0c\u6211\u4eec\u77e5\u9053\u53d8\u91cf\u662f\u53ef\u4ee5\u91cd\u65b0\u8d4b\u503c\u7684\u3002\u540e\u9762\u662f\u4e00\u4e2a\u533f\u540d\u81ea\u6267\u884c\u51fd\u6570\uff0c\u5728 if \u6761\u4ef6\u4e2d\u8c03\u7528\u4e86\u51fd\u6570 g()\uff0c\u7531\u4e8e\u5728\u533f\u540d\u51fd\u6570\u4e2d\uff0c\u53c8\u91cd\u65b0\u5b9a\u4e49\u4e86\u51fd\u6570g\uff0c\u5c31\u8986\u76d6\u4e86\u5916\u90e8\u5b9a\u4e49\u7684\u53d8\u91cfg\uff0c\u6240\u4ee5\uff0c\u8fd9\u91cc\u8c03\u7528\u7684\u662f\u5185\u90e8\u51fd\u6570 g \u65b9\u6cd5\uff0c\u8fd4\u56de\u4e3a true\u3002\u7b2c\u4e00\u4e2a\u6761\u4ef6\u901a\u8fc7\uff0c\u8fdb\u5165\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u3002\n\n\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u662f[] == ![]\uff0c\u5148\u770b ![] \uff0c\u5728 JavaScript \u4e2d\uff0c\u5f53\u7528\u4e8e\u5e03\u5c14\u8fd0\u7b97\u65f6\uff0c\u6bd4\u5982\u5728\u8fd9\u91cc\uff0c\u5bf9\u8c61\u7684\u975e\u7a7a\u5f15\u7528\u88ab\u89c6\u4e3a true\uff0c\u7a7a\u5f15\u7528 null \u5219\u88ab\u89c6\u4e3a false\u3002\u7531\u4e8e\u8fd9\u91cc\u4e0d\u662f\u4e00\u4e2a null, \u800c\u662f\u4e00\u4e2a\u6ca1\u6709\u5143\u7d20\u7684\u6570\u7ec4\uff0c\u6240\u4ee5 [] \u88ab\u89c6\u4e3a true, \u800c ![] \u7684\u7ed3\u679c\u5c31\u662f false \u4e86\u3002\u5f53\u4e00\u4e2a\u5e03\u5c14\u503c\u53c2\u4e0e\u5230\u6761\u4ef6\u8fd0\u7b97\u7684\u65f6\u5019\uff0ctrue \u4f1a\u88ab\u770b\u4f5c 1, \u800c false \u4f1a\u88ab\u770b\u4f5c 0\u3002\u73b0\u5728\u6761\u4ef6\u53d8\u6210\u4e86 [] == 0 \u7684\u95ee\u9898\u4e86\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u53c2\u4e0e\u6761\u4ef6\u6bd4\u8f83\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u88ab\u6c42\u503c\uff0c\u6c42\u503c\u7684\u7ed3\u679c\u662f\u6570\u7ec4\u6210\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c[] \u7684\u7ed3\u679c\u5c31\u662f '' \uff0c\u800c '' \u4f1a\u88ab\u5f53\u4f5c 0 \uff0c\u6240\u4ee5\uff0c\u6761\u4ef6\u6210\u7acb\u3002\n\n\u4e24\u4e2a\u6761\u4ef6\u90fd\u6210\u7acb\uff0c\u6240\u4ee5\u4f1a\u6267\u884c\u6761\u4ef6\u4e2d\u7684\u4ee3\u7801\uff0c f \u5728\u5b9a\u4e49\u662f\u6ca1\u6709\u4f7f\u7528var\uff0c\u6240\u4ee5\u4ed6\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u4f1a\u901a\u8fc7\u95ed\u5305\u8bbf\u95ee\u5230\u5916\u90e8\u7684\u53d8\u91cf f, \u91cd\u65b0\u8d4b\u503c\uff0c\u73b0\u5728\u6267\u884c f \u51fd\u6570\u8fd4\u56de\u503c\u5df2\u7ecf\u6210\u4e3a false \u4e86\u3002\u800c g \u5219\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u91cc\u662f\u4e00\u4e2a\u51fd\u6570\u5185\u5b9a\u4e49\u7684 g\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5916\u90e8\u7684 g \u51fd\u6570\u3002\u6240\u4ee5\u6700\u540e\u7684\u7ed3\u679c\u5c31\u662f false\u3002\n\n## \u56db\u3001\u539f\u578b&\u7ee7\u627f\n\n### 1. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction Person(name) {\n    this.name = name\n}\nvar p2 = new Person('king');\nconsole.log(p2.__proto__) //Person.prototype\nconsole.log(p2.__proto__.__proto__) //Object.prototype\nconsole.log(p2.__proto__.__proto__.__proto__) // null\nconsole.log(p2.__proto__.__proto__.__proto__.__proto__)//null\u540e\u9762\u6ca1\u6709\u4e86\uff0c\u62a5\u9519\nconsole.log(p2.__proto__.__proto__.__proto__.__proto__.__proto__)//null\u540e\u9762\u6ca1\u6709\u4e86\uff0c\u62a5\u9519\nconsole.log(p2.constructor)//Person\nconsole.log(p2.prototype)//undefined p2\u662f\u5b9e\u4f8b\uff0c\u6ca1\u6709prototype\u5c5e\u6027\nconsole.log(Person.constructor)//Function \u4e00\u4e2a\u7a7a\u51fd\u6570\nconsole.log(Person.prototype)//\u6253\u5370\u51faPerson.prototype\u8fd9\u4e2a\u5bf9\u8c61\u91cc\u6240\u6709\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\nconsole.log(Person.prototype.constructor)//Person\nconsole.log(Person.prototype.__proto__)// Object.prototype\nconsole.log(Person.__proto__) //Function.prototype\nconsole.log(Function.prototype.__proto__)//Object.prototype\nconsole.log(Function.__proto__)//Function.prototype\nconsole.log(Object.__proto__)//Function.prototype\nconsole.log(Object.prototype.__proto__)//null\n```\n\n\u8fd9\u9053\u4e49\u9898\u76ee\u8003\u5bdf\u539f\u578b\u3001\u539f\u578b\u94fe\u7684\u57fa\u7840\uff0c\u8bb0\u4f4f\u5c31\u53ef\u4ee5\u4e86\u3002\n\n### 2. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\n// a\nfunction Foo () {\n getName = function () {\n   console.log(1);\n }\n return this;\n}\n// b\nFoo.getName = function () {\n console.log(2);\n}\n// c\nFoo.prototype.getName = function () {\n console.log(3);\n}\n// d\nvar getName = function () {\n console.log(4);\n}\n// e\nfunction getName () {\n console.log(5);\n}\n\nFoo.getName();           // 2\ngetName();               // 4\nFoo().getName();         // 1\ngetName();               // 1 \nnew Foo.getName();       // 2\nnew Foo().getName();     // 3\nnew new Foo().getName(); // 3\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a2  4  1  1  2  3  3\n\n\n**\u89e3\u6790\uff1a**\n\n1. **Foo.getName()\uff0c** Foo\u4e3a\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c\u5bf9\u8c61\u90fd\u53ef\u4ee5\u6709\u5c5e\u6027\uff0cb \u5904\u5b9a\u4e49Foo\u7684getName\u5c5e\u6027\u4e3a\u51fd\u6570\uff0c\u8f93\u51fa2\uff1b\n1. **getName()\uff0c** \u8fd9\u91cc\u770bd\u3001e\u5904\uff0cd\u4e3a\u51fd\u6570\u8868\u8fbe\u5f0f\uff0ce\u4e3a\u51fd\u6570\u58f0\u660e\uff0c\u4e24\u8005\u533a\u522b\u5728\u4e8e\u53d8\u91cf\u63d0\u5347\uff0c\u51fd\u6570\u58f0\u660e\u7684 5 \u4f1a\u88ab\u540e\u8fb9\u51fd\u6570\u8868\u8fbe\u5f0f\u7684 4 \u8986\u76d6\uff1b\n1. **\u00a0Foo().getName()\uff0c** \u8fd9\u91cc\u8981\u770ba\u5904\uff0c\u5728Foo\u5185\u90e8\u5c06\u5168\u5c40\u7684getName\u91cd\u65b0\u8d4b\u503c\u4e3a console.log(1) \u7684\u51fd\u6570\uff0c\u6267\u884cFoo()\u8fd4\u56de this\uff0c\u8fd9\u4e2athis\u6307\u5411window\uff0cFoo().getName() \u5373\u4e3awindow.getName()\uff0c\u8f93\u51fa 1\uff1b\n1. **getName()\uff0c** \u4e0a\u97623\u4e2d\uff0c\u5168\u5c40\u7684getName\u5df2\u7ecf\u88ab\u91cd\u65b0\u8d4b\u503c\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f9d\u7136\u8f93\u51fa 1\uff1b\n1. **new Foo.getName()\uff0c** \u8fd9\u91cc\u7b49\u4ef7\u4e8e\u00a0new (Foo.getName())\uff0c\u5148\u6267\u884c Foo.getName()\uff0c\u8f93\u51fa 2\uff0c\u7136\u540enew\u4e00\u4e2a\u5b9e\u4f8b\uff1b\n1. **new Foo().getName()\uff0c** \u8fd9 \u91cc\u7b49\u4ef7\u4e8e (new Foo()).getName(), \u5148new\u4e00\u4e2aFoo\u7684\u5b9e\u4f8b\uff0c\u518d\u6267\u884c\u8fd9\u4e2a\u5b9e\u4f8b\u7684getName\u65b9\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e2a\u5b9e\u4f8b\u672c\u8eab\u6ca1\u6709\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6240\u4ee5\u53bb\u539f\u578b\u94fe__protot__\u4e0a\u8fb9\u627e\uff0c\u5b9e\u4f8b.__protot__ === Foo.prototype\uff0c\u6240\u4ee5\u8f93\u51fa 3\uff1b\n1. **new new Foo().getName()\uff0c** \u8fd9\u91cc\u7b49\u4ef7\u4e8enew (new Foo().getName())\uff0c\u5982\u4e0a\u8ff06\uff0c\u5148\u8f93\u51fa 3\uff0c\u7136\u540enew \u4e00\u4e2a\u00a0new Foo().getName() \u7684\u5b9e\u4f8b\u3002\n\n### 3. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar F = function() {};\nObject.prototype.a = function() {\n  console.log('a');\n};\nFunction.prototype.b = function() {\n  console.log('b');\n}\nvar f = new F();\nf.a();\nf.b();\nF.a();\nF.b()\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a\n\n```javascript\na\nUncaught TypeError: f.b is not a function\na\nb\n```\n\n**\u89e3\u6790\uff1a**\n\n1. f \u5e76\u4e0d\u662f Function \u7684\u5b9e\u4f8b\uff0c\u56e0\u4e3a\u5b83\u672c\u6765\u5c31\u4e0d\u662f\u6784\u9020\u51fd\u6570\uff0c\u8c03\u7528\u7684\u662f Function \u539f\u578b\u94fe\u4e0a\u7684\u76f8\u5173\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u53ea\u80fd\u8bbf\u95ee\u5230 Object \u539f\u578b\u94fe\u3002\u6240\u4ee5 f.a() \u8f93\u51fa a\u00a0 \uff0c\u800c f.b() \u5c31\u62a5\u9519\u4e86\u3002\n1. F \u662f\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u800c F \u662f\u6784\u9020\u51fd\u6570 Function \u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002\u56e0\u4e3a F instanceof\u00a0 Object === true\uff0cF instanceof Function === true\uff0c\u7531\u6b64\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff1aF \u662f Object \u548c Function \u4e24\u4e2a\u7684\u5b9e\u4f8b\uff0c\u5373 F \u80fd\u8bbf\u95ee\u5230 a\uff0c \u4e5f\u80fd\u8bbf\u95ee\u5230 b\u3002\u6240\u4ee5 F.a() \u8f93\u51fa a \uff0cF.b() \u8f93\u51fa b\u3002\n\n### 4. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction Foo(){\n    Foo.a = function(){\n        console.log(1);\n    }\n    this.a = function(){\n        console.log(2)\n    }\n}\n\nFoo.prototype.a = function(){\n    console.log(3);\n}\n\nFoo.a = function(){\n    console.log(4);\n}\n\nFoo.a();\nlet obj = new Foo();\nobj.a();\nFoo.a();\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a4 2 1\n\n\n**\u89e3\u6790\uff1a**\n\n1. Foo.a() \u8fd9\u4e2a\u662f\u8c03\u7528 Foo \u51fd\u6570\u7684\u9759\u6001\u65b9\u6cd5 a\uff0c\u867d\u7136 Foo \u4e2d\u6709\u4f18\u5148\u7ea7\u66f4\u9ad8\u7684\u5c5e\u6027\u65b9\u6cd5 a\uff0c\u4f46 Foo \u6b64\u65f6\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u6240\u4ee5\u6b64\u65f6\u8f93\u51fa Foo \u7684\u9759\u6001\u65b9\u6cd5 a \u7684\u7ed3\u679c\uff1a4\n1. let obj = new Foo(); \u4f7f\u7528\u4e86 new \u65b9\u6cd5\u8c03\u7528\u4e86\u51fd\u6570\uff0c\u8fd4\u56de\u4e86\u51fd\u6570\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u6b64\u65f6 Foo \u51fd\u6570\u5185\u90e8\u7684\u5c5e\u6027\u65b9\u6cd5\u521d\u59cb\u5316\uff0c\u539f\u578b\u94fe\u5efa\u7acb\u3002\n1. obj.a() ; \u8c03\u7528 obj \u5b9e\u4f8b\u4e0a\u7684\u65b9\u6cd5 a\uff0c\u8be5\u5b9e\u4f8b\u4e0a\u76ee\u524d\u6709\u4e24\u4e2a a \u65b9\u6cd5\uff1a\u4e00\u4e2a\u662f\u5185\u90e8\u5c5e\u6027\u65b9\u6cd5\uff0c\u53e6\u4e00\u4e2a\u662f\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\u3002\u5f53\u8fd9\u4e24\u8005\u90fd\u5b58\u5728\u65f6\uff0c\u9996\u5148\u67e5\u627e ownProperty \uff0c\u5982\u679c\u6ca1\u6709\u624d\u53bb\u539f\u578b\u94fe\u4e0a\u627e\uff0c\u6240\u4ee5\u8c03\u7528\u5b9e\u4f8b\u4e0a\u7684 a \u8f93\u51fa\uff1a2\n1. Foo.a() ; \u6839\u636e\u7b2c2\u6b65\u53ef\u77e5 Foo \u51fd\u6570\u5185\u90e8\u7684\u5c5e\u6027\u65b9\u6cd5\u5df2\u521d\u59cb\u5316\uff0c\u8986\u76d6\u4e86\u540c\u540d\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u6240\u4ee5\u8f93\u51fa\uff1a1\n\n### 5. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction Dog() {\n  this.name = 'puppy'\n}\nDog.prototype.bark = () => {\n  console.log('woof!woof!')\n}\nconst dog = new Dog()\nconsole.log(Dog.prototype.constructor === Dog && dog.constructor === Dog && dog instanceof Dog)\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1atrue\n\n\n**\u89e3\u6790\uff1a**\n\u56e0\u4e3aconstructor\u662fprototype\u4e0a\u7684\u5c5e\u6027\uff0c\u6240\u4ee5dog.constructor\u5b9e\u9645\u4e0a\u5c31\u662f\u6307\u5411Dog.prototype.constructor\uff1bconstructor\u5c5e\u6027\u6307\u5411\u6784\u9020\u51fd\u6570\u3002instanceof\u800c\u5b9e\u9645\u68c0\u6d4b\u7684\u662f\u7c7b\u578b\u662f\u5426\u5728\u5b9e\u4f8b\u7684\u539f\u578b\u94fe\u4e0a\u3002\n\n\nconstructor\u662fprototype\u4e0a\u7684\u5c5e\u6027\uff0c\u8fd9\u4e00\u70b9\u5f88\u5bb9\u6613\u88ab\u5ffd\u7565\u6389\u3002constructor\u548cinstanceof \u7684\u4f5c\u7528\u662f\u4e0d\u540c\u7684\uff0c\u611f\u6027\u5730\u6765\u8bf4\uff0cconstructor\u7684\u9650\u5236\u6bd4\u8f83\u4e25\u683c\uff0c\u5b83\u53ea\u80fd\u4e25\u683c\u5bf9\u6bd4\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u662f\u4e0d\u662f\u6307\u5b9a\u7684\u503c\uff1b\u800cinstanceof\u6bd4\u8f83\u677e\u6563\uff0c\u53ea\u8981\u68c0\u6d4b\u7684\u7c7b\u578b\u5728\u539f\u578b\u94fe\u4e0a\uff0c\u5c31\u4f1a\u8fd4\u56detrue\u3002\n\n### 6. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nvar A = {n: 4399};\nvar B =  function(){this.n = 9999};\nvar C =  function(){var n = 8888};\nB.prototype = A;\nC.prototype = A;\nvar b = new B();\nvar c = new C();\nA.n++\nconsole.log(b.n);\nconsole.log(c.n);\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a9999  4400\n\n\n**\u89e3\u6790\uff1a**\n\n1. console.log(b.n)\uff0c\u5728\u67e5\u627eb.n\u662f\u9996\u5148\u67e5\u627e b \u5bf9\u8c61\u81ea\u8eab\u6709\u6ca1\u6709 n \u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u4f1a\u53bb\u539f\u578b\uff08prototype\uff09\u4e0a\u67e5\u627e\uff0c\u5f53\u6267\u884cvar b = new B()\u65f6\uff0c\u51fd\u6570\u5185\u90e8this.n=9999(\u6b64\u65f6this\u6307\u5411 b) \u8fd4\u56deb\u5bf9\u8c61\uff0cb\u5bf9\u8c61\u6709\u81ea\u8eab\u7684n\u5c5e\u6027\uff0c\u6240\u4ee5\u8fd4\u56de 9999\u3002\n1. console.log(c.n)\uff0c\u540c\u7406\uff0c\u5f53\u6267\u884cvar c = new C()\u65f6\uff0cc\u5bf9\u8c61\u6ca1\u6709\u81ea\u8eab\u7684n\u5c5e\u6027\uff0c\u5411\u4e0a\u67e5\u627e\uff0c\u627e\u5230\u539f\u578b \uff08prototype\uff09\u4e0a\u7684 n \u5c5e\u6027\uff0c\u56e0\u4e3a A.n++(\u6b64\u65f6\u5bf9\u8c61A\u4e2d\u7684n\u4e3a4400)\uff0c \u6240\u4ee5\u8fd4\u56de4400\u3002\n\n### 7. \u4ee3\u7801\u8f93\u51fa\u95ee\u9898\n\n```javascript\nfunction A(){\n}\nfunction B(a){\n\u3000\u3000this.a = a;\n}\nfunction C(a){\n\u3000\u3000if(a){\nthis.a = a;\n\u3000\u3000}\n}\nA.prototype.a = 1;\nB.prototype.a = 1;\nC.prototype.a = 1;\n \nconsole.log(new A().a);\nconsole.log(new B().a);\nconsole.log(new C(2).a);\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a1  undefined  2\n\n**\u89e3\u6790\uff1a**\n\n1. console.log(new A().a)\uff0cnew A()\u4e3a\u6784\u9020\u51fd\u6570\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u672c\u8eab\u6ca1\u6709a\u5c5e\u6027\uff0c\u6240\u4ee5\u5411\u5b83\u7684\u539f\u578b\u53bb\u627e\uff0c\u53d1\u73b0\u539f\u578b\u7684a\u5c5e\u6027\u7684\u5c5e\u6027\u503c\u4e3a1\uff0c\u6545\u8be5\u8f93\u51fa\u503c\u4e3a1\uff1b\n1. console.log(new B().a)\uff0cew B()\u4e3a\u6784\u9020\u51fd\u6570\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u8be5\u6784\u9020\u51fd\u6570\u6709\u53c2\u6570a\uff0c\u4f46\u8be5\u5bf9\u8c61\u6ca1\u6709\u4f20\u53c2\uff0c\u6545\u8be5\u8f93\u51fa\u503c\u4e3aundefined;\n1. console.log(new C(2).a)\uff0cnew C()\u4e3a\u6784\u9020\u51fd\u6570\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u8be5\u6784\u9020\u51fd\u6570\u6709\u53c2\u6570a\uff0c\u4e14\u4f20\u7684\u5b9e\u53c2\u4e3a2\uff0c\u6267\u884c\u51fd\u6570\u5185\u90e8\uff0c\u53d1\u73b0if\u4e3a\u771f\uff0c\u6267\u884cthis.a = 2,\u6545\u5c5e\u6027a\u7684\u503c\u4e3a2\u3002\n\n### 8 \u4ee3\u7801\u8f93\u51fa\u95ee\u9898\n\n```javascript\nfunction Parent() {\n    this.a = 1;\n    this.b = [1, 2, this.a];\n    this.c = { demo: 5 };\n    this.show = function () {\n        console.log(this.a , this.b , this.c.demo );\n    }\n}\n\nfunction Child() {\n    this.a = 2;\n    this.change = function () {\n        this.b.push(this.a);\n        this.a = this.b.length;\n        this.c.demo = this.a++;\n    }\n}\n\nChild.prototype = new Parent();\nvar parent = new Parent();\nvar child1 = new Child();\nvar child2 = new Child();\nchild1.a = 11;\nchild2.a = 12;\nparent.show();\nchild1.show();\nchild2.show();\nchild1.change();\nchild2.change();\nparent.show();\nchild1.show();\nchild2.show();\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1a\n\n```javascript\nparent.show(); // 1  [1,2,1] 5\n\nchild1.show(); // 11 [1,2,1] 5\nchild2.show(); // 12 [1,2,1] 5\n\nparent.show(); // 1 [1,2,1] 5\n\nchild1.show(); // 5 [1,2,1,11,12] 5\n\nchild2.show(); // 6 [1,2,1,11,12] 5\n```\n\n\u8fd9\u9053\u9898\u76ee\u503c\u5f97\u795e\u5e1d\uff0c\u4ed6\u6d89\u53ca\u5230\u7684\u77e5\u8bc6\u70b9\u5f88\u591a\uff0c\u4f8b\u5982**this\u7684\u6307\u5411\u3001\u539f\u578b\u3001\u539f\u578b\u94fe\u3001\u7c7b\u7684\u7ee7\u627f\u3001\u6570\u636e\u7c7b\u578b**\u7b49\u3002\n\n\n**\u89e3\u6790\uff1a**\n\n1. parent.show()\uff0c\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f97\u6240\u9700\u7684\u503c\uff0c\u6ca1\u5565\u597d\u8bf4\u7684\uff1b\n1. child1.show()\uff0c`Child`\u7684\u6784\u9020\u51fd\u6570\u539f\u672c\u662f\u6307\u5411`Child`\u7684\uff0c\u9898\u76ee\u663e\u5f0f\u5c06`Child`\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u6307\u5411\u4e86`Parent`\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u9700\u8981\u6ce8\u610f`Child.prototype`\u6307\u5411\u7684\u662f`Parent`\u7684\u5b9e\u4f8b`parent`\uff0c\u800c\u4e0d\u662f\u6307\u5411`Parent`\u8fd9\u4e2a\u7c7b\u3002\n1. child2.show()\uff0c\u8fd9\u4e2a\u4e5f\u6ca1\u5565\u597d\u8bf4\u7684\uff1b\n1. parent.show()\uff0c`parent`\u662f\u4e00\u4e2a`Parent`\u7c7b\u7684\u5b9e\u4f8b\uff0c`Child.prorotype`\u6307\u5411\u7684\u662f`Parent`\u7c7b\u7684\u53e6\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4e24\u8005\u5728\u5806\u5185\u5b58\u4e2d\u4e92\u4e0d\u5f71\u54cd\uff0c\u6240\u4ee5\u4e0a\u8ff0\u64cd\u4f5c\u4e0d\u5f71\u54cd`parent`\u5b9e\u4f8b\uff0c\u6240\u4ee5\u8f93\u51fa\u7ed3\u679c\u4e0d\u53d8\uff1b\n1. child1.show()\uff0c`child1`\u6267\u884c\u4e86`change()`\u65b9\u6cd5\u540e\uff0c\u53d1\u751f\u4e86\u600e\u6837\u7684\u53d8\u5316\u5462?\n\n- **this.b.push(this.a)\uff0c**\u7531\u4e8ethis\u7684\u52a8\u6001\u6307\u5411\u7279\u6027\uff0cthis.b\u4f1a\u6307\u5411`Child.prototype`\u4e0a\u7684**b**\u6570\u7ec4,this.a\u4f1a\u6307\u5411`child1`\u7684**a**\u5c5e\u6027,\u6240\u4ee5`Child.prototype.b`\u53d8\u6210\u4e86**[1,2,1,11]**;\n- **this.a = this.b.length\uff0c**\u8fd9\u6761\u8bed\u53e5\u4e2d`this.a`\u548c`this.b`\u7684\u6307\u5411\u4e0e\u4e0a\u4e00\u53e5\u4e00\u81f4\uff0c\u6545\u7ed3\u679c\u4e3a`child1.a`\u53d8\u4e3a**4**;\n- **this.c.demo = this.a++\uff0c**\u7531\u4e8e`child1`\u81ea\u8eab\u5c5e\u6027\u5e76\u6ca1\u6709**c**\u8fd9\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u6b64\u5904\u7684`this.c`\u4f1a\u6307\u5411`Child.prototype.c`\uff0c`this.a`\u503c\u4e3a**4**\uff0c\u4e3a\u539f\u59cb\u7c7b\u578b\uff0c\u6545\u8d4b\u503c\u64cd\u4f5c\u65f6\u4f1a\u76f4\u63a5\u8d4b\u503c\uff0c`Child.prototype.c.demo`\u7684\u7ed3\u679c\u4e3a**4**\uff0c\u800c`this.a`\u968f\u540e\u81ea\u589e\u4e3a**5(4 + 1 = 5)\u3002**\n\n6. `child2`\u6267\u884c\u4e86`change()`\u65b9\u6cd5, \u800c`child2`\u548c`child1`\u5747\u662f`Child`\u7c7b\u7684\u5b9e\u4f8b\uff0c\u6240\u4ee5\u4ed6\u4eec\u7684\u539f\u578b\u94fe\u6307\u5411\u540c\u4e00\u4e2a\u539f\u578b\u5bf9\u8c61`Child.prototype`,\u4e5f\u5c31\u662f\u540c\u4e00\u4e2a`parent`\u5b9e\u4f8b\uff0c\u6240\u4ee5`child2.change()`\u4e2d\u6240\u6709\u5f71\u54cd\u5230\u539f\u578b\u5bf9\u8c61\u7684\u8bed\u53e5\u90fd\u4f1a\u5f71\u54cd`child1`\u7684\u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u3002\n\n- **this.b.push(this.a)\uff0c**\u7531\u4e8ethis\u7684\u52a8\u6001\u6307\u5411\u7279\u6027\uff0cthis.b\u4f1a\u6307\u5411`Child.prototype`\u4e0a\u7684**b**\u6570\u7ec4,this.a\u4f1a\u6307\u5411`child2`\u7684**a**\u5c5e\u6027,\u6240\u4ee5`Child.prototype.b`\u53d8\u6210\u4e86**[1,2,1,11,12]**;\n- **this.a = this.b.length\uff0c**\u8fd9\u6761\u8bed\u53e5\u4e2d`this.a`\u548c`this.b`\u7684\u6307\u5411\u4e0e\u4e0a\u4e00\u53e5\u4e00\u81f4\uff0c\u6545\u7ed3\u679c\u4e3a`child2.a`\u53d8\u4e3a**5**;\n- **this.c.demo = this.a++\uff0c**\u7531\u4e8e`child2`\u81ea\u8eab\u5c5e\u6027\u5e76\u6ca1\u6709**c**\u8fd9\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u6b64\u5904\u7684`this.c`\u4f1a\u6307\u5411`Child.prototype.c`\uff0c\u6545\u6267\u884c\u7ed3\u679c\u4e3a`Child.prototype.c.demo`\u7684\u503c\u53d8\u4e3a`child2.a`\u7684\u503c**5**\uff0c\u800c`child2.a`\u6700\u7ec8\u81ea\u589e\u4e3a**6(5 + 1 = 6)\u3002**\n\n### 9. \u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\n\n```javascript\nfunction SuperType(){\n    this.property = true;\n}\n\nSuperType.prototype.getSuperValue = function(){\n    return this.property;\n};\n\nfunction SubType(){\n    this.subproperty = false;\n}\n\nSubType.prototype = new SuperType();\nSubType.prototype.getSubValue = function (){\n    return this.subproperty;\n};\n\nvar instance = new SubType();\nconsole.log(instance.getSuperValue());\n```\n\n\u8f93\u51fa\u7ed3\u679c\uff1atrue\n\n\n\u5b9e\u9645\u4e0a\uff0c\u8fd9\u6bb5\u4ee3\u7801\u5c31\u662f\u5728\u5b9e\u73b0\u539f\u578b\u94fe\u7ee7\u627f\uff0cSubType\u7ee7\u627f\u4e86SuperType\uff0c\u672c\u8d28\u662f\u91cd\u5199\u4e86SubType\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u4ee3\u4e4b\u4ee5\u4e00\u4e2a\u65b0\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002SubType\u7684\u539f\u578b\u88ab\u91cd\u5199\u4e86\uff0c\u6240\u4ee5instance.constructor\u6307\u5411\u7684\u662fSuperType\u3002\u5177\u4f53\u5982\u4e0b\uff1a\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-zoom-1.image)\n\n**\u5199\u5728\u6700\u540e\uff1a**\n\n\u611f\u8c22\u60a8\u7684\u8010\u5fc3\uff0c\u8bfb\u5b8c\u4e86\u8fd9\u4e48\u957f\u7684\u6587\u7ae0\u3002\u8bfb\u5230\u8fd9\u91cc\uff0c\u662f\u5426\u6709\u4e00\u70b9\u6536\u83b7\u5462\uff1f\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u4e9b\u9762\u8bd5\u9898\u771f\u662f\u8003\u9a8c\u4eba\u7684JavaScript\u57fa\u7840\u80fd\u529b\uff0c\u5c24\u5176\u662f\u540e\u9762\u7684\u539f\u578b\u548c\u7ee7\u627f\u76f8\u5173\u7684\u9898\u76ee\uff0c\u592a\u7ed5\u4e86\uff0c\u503c\u5f97\u4ed4\u7ec6\u7814\u7a76\uff01\n\n\u8fd1\u671f\uff0c\u7b14\u8005\u5728\u5fd9\u4e8e\u6bd5\u4e1a\u8bba\u6587\uff0c\u53ef\u80fd\u66f4\u65b0\u4f1a\u6bd4\u8f83\u6162\uff0c\u8fd8\u671b\u5927\u5bb6\u89c1\u8c05\u3002\n\n\u5982\u679c\u89c9\u5f97\u672c\u6587\u6709\u5e2e\u52a9\uff0c\u8bb0\u5f97\u70b9\u4e2a\u8d5e\u54e6\u3002\n\n"}, "author_user_info": {"user_id": "3544481220801815", "user_name": "CUGGZ", "company": "\u5728\u7ebf\u6559\u80b2", "job_title": "\u524d\u7aef\u5f00\u53d1\u5de5\u7a0b\u5e08", "avatar_large": "https://sf1-ttcdn-tos.pstatp.com/img/user-avatar/61130727b6e6bf9ed813434aeaed8ac3~300x300.image", "level": 4, "description": "\u89c6\u91ce\u6240\u53ca\uff0c\u552f\u6709\u524d\u7aef\uff01", "followee_count": 30, "follower_count": 1635, "post_article_count": 45, "digg_article_count": 73, "got_digg_count": 4552, "got_view_count": 275787, "post_shortmsg_count": 1, "digg_shortmsg_count": 6, "isfollowed": false, "favorable_author": 1, "power": 7309, "study_point": 0, "university": {"university_id": "0", "name": "", "logo": ""}, "major": {"major_id": "0", "parent_id": "0", "name": ""}, "student_status": 0, "select_event_count": 0, "select_online_course_count": 0, "identity": 0, "is_select_annual": false, "select_annual_rank": 0, "annual_list_type": 0, "extraMap": {}, "is_logout": 0}, "category": {"category_id": "6809637767543259144", "category_name": "\u524d\u7aef", "category_url": "frontend", "rank": 2, "back_ground": "https://lc-mhke0kuv.cn-n1.lcfile.com/8c95587526f346c0.png", "icon": "https://lc-mhke0kuv.cn-n1.lcfile.com/1c40f5eaba561e32.png", "ctime": 1457483942, "mtime": 1432503190, "show_type": 3, "item_type": 2, "promote_tag_cap": 4, "promote_priority": 2}, "tags": [{"id": 2546524, "tag_id": "6809640404791590919", "tag_name": "\u9762\u8bd5", "color": "#545454", "icon": "https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/85dd1ce8008458ac220c.png~tplv-t2oaga2asx-image.image", "back_ground": "", "show_navi": 0, "ctime": 1435971430, "mtime": 1632305205, "id_type": 9, "tag_alias": "", "post_article_count": 15897, "concern_user_count": 349675}, {"id": 2546526, "tag_id": "6809640407484334093", "tag_name": "\u524d\u7aef", "color": "#60ADFF", "icon": "https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/bac28828a49181c34110.png~tplv-t2oaga2asx-image.image", "back_ground": "", "show_navi": 1, "ctime": 1435971546, "mtime": 1632307033, "id_type": 9, "tag_alias": "", "post_article_count": 90163, "concern_user_count": 527783}], "user_interact": {"id": 6959043611161952269, "omitempty": 2, "user_id": 0, "is_digg": false, "is_follow": false, "is_collect": false}, "org": {"org_info": null, "org_user": null, "is_followed": false}, "req_id": "202109221837230102121641581E0119D4", "status": {"push_status": 0}}