{"article_id": "6941546135827775525", "article_info": {"article_id": "6941546135827775525", "user_id": "3544481220801815", "category_id": "6809637767543259144", "tag_ids": [6809640404791590919, 6809640407484334093], "visible_level": 0, "link_url": "", "cover_image": "https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62d2b75159fb41a693983d15ff368f18~tplv-k3u1fbpfcp-watermark.image", "is_gfw": 0, "title": "\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff08\u4e0a\uff09", "brief_content": "2021 \u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff0c\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u7cfb\u5217\u6587\u7ae0\u7684React\u7bc7\uff0c\u957f\u671f\u66f4\u65b0\uff0c\u6b22\u8fce\u6536\u85cf\u3001\u70b9\u8d5e\uff01", "is_english": 0, "is_original": 1, "user_index": 0, "original_type": 0, "original_author": "", "content": "", "ctime": "1616204832", "mtime": "1629157829", "rtime": "-62135596800", "draft_id": "6941545355188125710", "view_count": 15413, "collect_count": 264, "digg_count": 192, "comment_count": 6, "hot_index": 968, "is_hot": 0, "rank_index": 4.52e-06, "status": 1, "verify_status": 1, "audit_status": 2, "mark_content": "---\ntheme: fancy\n---\n\n\u8fd1\u671f\u6574\u7406\u4e86\u4e00\u4e0b\u9ad8\u9891\u7684\u524d\u7aef\u9762\u8bd5\u9898\uff0c\u5206\u4eab\u7ed9\u5927\u5bb6\u4e00\u8d77\u6765\u5b66\u4e60\u3002\u5982\u6709\u95ee\u9898\uff0c\u6b22\u8fce\u6307\u6b63\uff01\n\n\n#### \u524d\u7aef\u9762\u8bd5\u9898\u7cfb\u5217\u6587\u7ae0\uff1a\n\u30101\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bHTML\u7bc7](https://juejin.cn/post/6905294475539513352)\n\n\u30102\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bCSS\u7bc7](https://juejin.cn/post/6905539198107942919)\n\n\u30103\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bJavaScript\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6940945178899251230)\n\n\u30104\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bJavaScript\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6941194115392634888)\n\n\u30105\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bVue\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6919373017218809864)\n\n\u30106\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bVue\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6964779204462247950/)\n\n\u30107\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff08\u4e0a\uff09](https://juejin.cn/post/6941546135827775525)\n\n\u30108\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4bReact\u7bc7\uff08\u4e0b\uff09](https://juejin.cn/post/6940942549305524238)\n\n\u30109\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u8ba1\u7b97\u673a\u7f51\u7edc\u7bc7](https://juejin.cn/post/6908327746473033741)\n\n\u301010\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u6d4f\u89c8\u5668\u539f\u7406\u7bc7](https://juejin.cn/post/6916157109906341902/)\n\n\u301011\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u6027\u80fd\u4f18\u5316\u7bc7](https://juejin.cn/post/6941278592215515143)\n\n\u301012\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u624b\u5199\u4ee3\u7801\u7bc7](https://juejin.cn/post/6946136940164939813)\n\n\u301013\u3011[\u300c2021\u300d\u9ad8\u9891\u524d\u7aef\u9762\u8bd5\u9898\u6c47\u603b\u4e4b\u4ee3\u7801\u8f93\u51fa\u7ed3\u679c\u7bc7](https://juejin.cn/post/6959043611161952269)\n\n![React\u9762\u8bd5\u9898.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0598330567c146dd99ffb819efb8cc62~tplv-k3u1fbpfcp-zoom-1.image)\n\n## \u4e00\u3001\u7ec4\u4ef6\u57fa\u7840\n\n### 1. React \u4e8b\u4ef6\u673a\u5236\n\n```javascript\n<div onClick={this.handleClick.bind(this)}>\u70b9\u6211</div>\n```\n\nReact\u5e76\u4e0d\u662f\u5c06click\u4e8b\u4ef6\u7ed1\u5b9a\u5230\u4e86div\u7684\u771f\u5b9eDOM\u4e0a\uff0c\u800c\u662f\u5728document\u5904\u76d1\u542c\u4e86\u6240\u6709\u7684\u4e8b\u4ef6\uff0c\u5f53\u4e8b\u4ef6\u53d1\u751f\u5e76\u4e14\u5192\u6ce1\u5230document\u5904\u7684\u65f6\u5019\uff0cReact\u5c06\u4e8b\u4ef6\u5185\u5bb9\u5c01\u88c5\u5e76\u4ea4\u7531\u771f\u6b63\u7684\u5904\u7406\u51fd\u6570\u8fd0\u884c\u3002\u8fd9\u6837\u7684\u65b9\u5f0f\u4e0d\u4ec5\u4ec5\u51cf\u5c11\u4e86\u5185\u5b58\u7684\u6d88\u8017\uff0c\u8fd8\u80fd\u5728\u7ec4\u4ef6\u6302\u5728\u9500\u6bc1\u65f6\u7edf\u4e00\u8ba2\u9605\u548c\u79fb\u9664\u4e8b\u4ef6\u3002\n\n\n\u9664\u6b64\u4e4b\u5916\uff0c\u5192\u6ce1\u5230document\u4e0a\u7684\u4e8b\u4ef6\u4e5f\u4e0d\u662f\u539f\u751f\u7684\u6d4f\u89c8\u5668\u4e8b\u4ef6\uff0c\u800c\u662f\u7531react\u81ea\u5df1\u5b9e\u73b0\u7684\u5408\u6210\u4e8b\u4ef6\uff08SyntheticEvent\uff09\u3002\u56e0\u6b64\u5982\u679c\u4e0d\u60f3\u8981\u662f\u4e8b\u4ef6\u5192\u6ce1\u7684\u8bdd\u5e94\u8be5\u8c03\u7528event.preventDefault()\u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u8c03\u7528event.stopProppagation()\u65b9\u6cd5\u3002\n![77fa6b2a59c92e160bc171f9c80783e7.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e969caa9fc647cf8985c4c841a01f60~tplv-k3u1fbpfcp-zoom-1.image)\nJSX \u4e0a\u5199\u7684\u4e8b\u4ef6\u5e76\u6ca1\u6709\u7ed1\u5b9a\u5728\u5bf9\u5e94\u7684\u771f\u5b9e DOM \u4e0a\uff0c\u800c\u662f\u901a\u8fc7\u4e8b\u4ef6\u4ee3\u7406\u7684\u65b9\u5f0f\uff0c\u5c06\u6240\u6709\u7684\u4e8b\u4ef6\u90fd\u7edf\u4e00\u7ed1\u5b9a\u5728\u4e86 `document` \u4e0a\u3002\u8fd9\u6837\u7684\u65b9\u5f0f\u4e0d\u4ec5\u51cf\u5c11\u4e86\u5185\u5b58\u6d88\u8017\uff0c\u8fd8\u80fd\u5728\u7ec4\u4ef6\u6302\u8f7d\u9500\u6bc1\u65f6\u7edf\u4e00\u8ba2\u9605\u548c\u79fb\u9664\u4e8b\u4ef6\u3002\n\n\n\u53e6\u5916\u5192\u6ce1\u5230 `document` \u4e0a\u7684\u4e8b\u4ef6\u4e5f\u4e0d\u662f\u539f\u751f\u6d4f\u89c8\u5668\u4e8b\u4ef6\uff0c\u800c\u662f React \u81ea\u5df1\u5b9e\u73b0\u7684\u5408\u6210\u4e8b\u4ef6\uff08SyntheticEvent\uff09\u3002\u56e0\u6b64\u6211\u4eec\u5982\u679c\u4e0d\u60f3\u8981\u4e8b\u4ef6\u5192\u6ce1\u7684\u8bdd\uff0c\u8c03\u7528 `event.stopPropagation` \u662f\u65e0\u6548\u7684\uff0c\u800c\u5e94\u8be5\u8c03\u7528 `event.preventDefault`\u3002\n\n\n\u5b9e\u73b0\u5408\u6210\u4e8b\u4ef6\u7684\u76ee\u7684\u5982\u4e0b\uff1a\n\n- \u5408\u6210\u4e8b\u4ef6\u9996\u5148\u62b9\u5e73\u4e86\u6d4f\u89c8\u5668\u4e4b\u95f4\u7684\u517c\u5bb9\u95ee\u9898\uff0c\u53e6\u5916\u8fd9\u662f\u4e00\u4e2a\u8de8\u6d4f\u89c8\u5668\u539f\u751f\u4e8b\u4ef6\u5305\u88c5\u5668\uff0c\u8d4b\u4e88\u4e86\u8de8\u6d4f\u89c8\u5668\u5f00\u53d1\u7684\u80fd\u529b\uff1b\n- \u5bf9\u4e8e\u539f\u751f\u6d4f\u89c8\u5668\u4e8b\u4ef6\u6765\u8bf4\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ed9\u76d1\u542c\u5668\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\u3002\u5982\u679c\u4f60\u6709\u5f88\u591a\u7684\u4e8b\u4ef6\u76d1\u542c\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5206\u914d\u5f88\u591a\u7684\u4e8b\u4ef6\u5bf9\u8c61\uff0c\u9020\u6210\u9ad8\u989d\u7684\u5185\u5b58\u5206\u914d\u95ee\u9898\u3002\u4f46\u662f\u5bf9\u4e8e\u5408\u6210\u4e8b\u4ef6\u6765\u8bf4\uff0c\u6709\u4e00\u4e2a\u4e8b\u4ef6\u6c60\u4e13\u95e8\u6765\u7ba1\u7406\u5b83\u4eec\u7684\u521b\u5efa\u548c\u9500\u6bc1\uff0c\u5f53\u4e8b\u4ef6\u9700\u8981\u88ab\u4f7f\u7528\u65f6\uff0c\u5c31\u4f1a\u4ece\u6c60\u5b50\u4e2d\u590d\u7528\u5bf9\u8c61\uff0c\u4e8b\u4ef6\u56de\u8c03\u7ed3\u675f\u540e\uff0c\u5c31\u4f1a\u9500\u6bc1\u4e8b\u4ef6\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\uff0c\u4ece\u800c\u4fbf\u4e8e\u4e0b\u6b21\u590d\u7528\u4e8b\u4ef6\u5bf9\u8c61\u3002\n\n### 2. React\u7684\u4e8b\u4ef6\u548c\u666e\u901a\u7684HTML\u4e8b\u4ef6\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\n\n\u533a\u522b\uff1a\n\n- \u5bf9\u4e8e\u4e8b\u4ef6\u540d\u79f0\u547d\u540d\u65b9\u5f0f\uff0c\u539f\u751f\u4e8b\u4ef6\u4e3a\u5168\u5c0f\u5199\uff0creact \u4e8b\u4ef6\u91c7\u7528\u5c0f\u9a7c\u5cf0\uff1b\n- \u5bf9\u4e8e\u4e8b\u4ef6\u51fd\u6570\u5904\u7406\u8bed\u6cd5\uff0c\u539f\u751f\u4e8b\u4ef6\u4e3a\u5b57\u7b26\u4e32\uff0creact \u4e8b\u4ef6\u4e3a\u51fd\u6570\uff1b\n- react \u4e8b\u4ef6\u4e0d\u80fd\u91c7\u7528 return false \u7684\u65b9\u5f0f\u6765\u963b\u6b62\u6d4f\u89c8\u5668\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u800c\u5fc5\u987b\u8981\u5730\u660e\u786e\u5730\u8c03\u7528`preventDefault()`\u6765\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\u3002\n\n\n\n\u5408\u6210\u4e8b\u4ef6\u662f react \u6a21\u62df\u539f\u751f DOM \u4e8b\u4ef6\u6240\u6709\u80fd\u529b\u7684\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\uff0c\u5176\u4f18\u70b9\u5982\u4e0b\uff1a\n\n- \u517c\u5bb9\u6240\u6709\u6d4f\u89c8\u5668\uff0c\u66f4\u597d\u7684\u8de8\u5e73\u53f0\uff1b\n- \u5c06\u4e8b\u4ef6\u7edf\u4e00\u5b58\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\uff0c\u907f\u514d\u9891\u7e41\u7684\u65b0\u589e\u4e0e\u5220\u9664\uff08\u5783\u573e\u56de\u6536\uff09\u3002\n- \u65b9\u4fbf react \u7edf\u4e00\u7ba1\u7406\u548c\u4e8b\u52a1\u673a\u5236\u3002\n\n\n\n\u4e8b\u4ef6\u7684\u6267\u884c\u987a\u5e8f\u4e3a\u539f\u751f\u4e8b\u4ef6\u5148\u6267\u884c\uff0c\u5408\u6210\u4e8b\u4ef6\u540e\u6267\u884c\uff0c\u5408\u6210\u4e8b\u4ef6\u4f1a\u5192\u6ce1\u7ed1\u5b9a\u5230 document \u4e0a\uff0c\u6240\u4ee5\u5c3d\u91cf\u907f\u514d\u539f\u751f\u4e8b\u4ef6\u4e0e\u5408\u6210\u4e8b\u4ef6\u6df7\u7528\uff0c\u5982\u679c\u539f\u751f\u4e8b\u4ef6\u963b\u6b62\u5192\u6ce1\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5408\u6210\u4e8b\u4ef6\u4e0d\u6267\u884c\uff0c\u56e0\u4e3a\u9700\u8981\u5192\u6ce1\u5230document \u4e0a\u5408\u6210\u4e8b\u4ef6\u624d\u4f1a\u6267\u884c\u3002\n\n### 3. React \u7ec4\u4ef6\u4e2d\u600e\u4e48\u505a\u4e8b\u4ef6\u4ee3\u7406\uff1f\u5b83\u7684\u539f\u7406\u662f\u4ec0\u4e48\uff1f\n\nReact\u57fa\u4e8eVirtual DOM\u5b9e\u73b0\u4e86\u4e00\u4e2aSyntheticEvent\u5c42\uff08\u5408\u6210\u4e8b\u4ef6\u5c42\uff09\uff0c\u5b9a\u4e49\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u4f1a\u63a5\u6536\u5230\u4e00\u4e2a\u5408\u6210\u4e8b\u4ef6\u5bf9\u8c61\u7684\u5b9e\u4f8b\uff0c\u5b83\u7b26\u5408W3C\u6807\u51c6\uff0c\u4e14\u4e0e\u539f\u751f\u7684\u6d4f\u89c8\u5668\u4e8b\u4ef6\u62e5\u6709\u540c\u6837\u7684\u63a5\u53e3\uff0c\u652f\u6301\u5192\u6ce1\u673a\u5236\uff0c\u6240\u6709\u7684\u4e8b\u4ef6\u90fd\u81ea\u52a8\u7ed1\u5b9a\u5728\u6700\u5916\u5c42\u4e0a\u3002\n\n\n\u5728React\u5e95\u5c42\uff0c\u4e3b\u8981\u5bf9\u5408\u6210\u4e8b\u4ef6\u505a\u4e86\u4e24\u4ef6\u4e8b\uff1a\n\n- **\u4e8b\u4ef6\u59d4\u6d3e\uff1a** React\u4f1a\u628a\u6240\u6709\u7684\u4e8b\u4ef6\u7ed1\u5b9a\u5230\u7ed3\u6784\u7684\u6700\u5916\u5c42\uff0c\u4f7f\u7528\u7edf\u4e00\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\u4e0a\u7ef4\u6301\u4e86\u4e00\u4e2a\u6620\u5c04\u6765\u4fdd\u5b58\u6240\u6709\u7ec4\u4ef6\u5185\u90e8\u4e8b\u4ef6\u76d1\u542c\u548c\u5904\u7406\u51fd\u6570\u3002\n- **\u81ea\u52a8\u7ed1\u5b9a\uff1a** React\u7ec4\u4ef6\u4e2d\uff0c\u6bcf\u4e2a\u65b9\u6cd5\u7684\u4e0a\u4e0b\u6587\u90fd\u4f1a\u6307\u5411\u8be5\u7ec4\u4ef6\u7684\u5b9e\u4f8b\uff0c\u5373\u81ea\u52a8\u7ed1\u5b9athis\u4e3a\u5f53\u524d\u7ec4\u4ef6\u3002\n\n### 4. React \u9ad8\u9636\u7ec4\u4ef6\u3001Render props\u3001hooks \u6709\u4ec0\u4e48\u533a\u522b\uff0c\u4e3a\u4ec0\u4e48\u8981\u4e0d\u65ad\u8fed\u4ee3\n\n\u8fd9\u4e09\u8005\u662f\u76ee\u524dreact\u89e3\u51b3\u4ee3\u7801\u590d\u7528\u7684\u4e3b\u8981\u65b9\u5f0f\uff1a\n\n- \u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u662f React \u4e2d\u7528\u4e8e\u590d\u7528\u7ec4\u4ef6\u903b\u8f91\u7684\u4e00\u79cd\u9ad8\u7ea7\u6280\u5de7\u3002HOC \u81ea\u8eab\u4e0d\u662f React API \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e React \u7684\u7ec4\u5408\u7279\u6027\u800c\u5f62\u6210\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5177\u4f53\u800c\u8a00\uff0c\u9ad8\u9636\u7ec4\u4ef6\u662f\u53c2\u6570\u4e3a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u4e3a\u65b0\u7ec4\u4ef6\u7684\u51fd\u6570\u3002\n- render props\u662f\u6307\u4e00\u79cd\u5728 React \u7ec4\u4ef6\u4e4b\u95f4\u4f7f\u7528\u4e00\u4e2a\u503c\u4e3a\u51fd\u6570\u7684 prop \u5171\u4eab\u4ee3\u7801\u7684\u7b80\u5355\u6280\u672f\uff0c\u66f4\u5177\u4f53\u7684\u8bf4\uff0crender prop \u662f\u4e00\u4e2a\u7528\u4e8e\u544a\u77e5\u7ec4\u4ef6\u9700\u8981\u6e32\u67d3\u4ec0\u4e48\u5185\u5bb9\u7684\u51fd\u6570 prop\u3002\n- \u901a\u5e38\uff0crender props \u548c\u9ad8\u9636\u7ec4\u4ef6\u53ea\u6e32\u67d3\u4e00\u4e2a\u5b50\u8282\u70b9\u3002\u8ba9 Hook \u6765\u670d\u52a1\u8fd9\u4e2a\u4f7f\u7528\u573a\u666f\u66f4\u52a0\u7b80\u5355\u3002\u8fd9\u4e24\u79cd\u6a21\u5f0f\u4ecd\u6709\u7528\u6b66\u4e4b\u5730\uff0c\uff08\u4f8b\u5982\uff0c\u4e00\u4e2a\u865a\u62df\u6eda\u52a8\u6761\u7ec4\u4ef6\u6216\u8bb8\u4f1a\u6709\u4e00\u4e2a renderltem \u5c5e\u6027\uff0c\u6216\u662f\u4e00\u4e2a\u53ef\u89c1\u7684\u5bb9\u5668\u7ec4\u4ef6\u6216\u8bb8\u4f1a\u6709\u5b83\u81ea\u5df1\u7684 DOM \u7ed3\u6784\uff09\u3002\u4f46\u5728\u5927\u90e8\u5206\u573a\u666f\u4e0b\uff0cHook \u8db3\u591f\u4e86\uff0c\u5e76\u4e14\u80fd\u591f\u5e2e\u52a9\u51cf\u5c11\u5d4c\u5957\u3002\n\n\n\n**\uff081\uff09HOC**\n\u5b98\u65b9\u89e3\u91ca\u2236 \n\n> \u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u662f React \u4e2d\u7528\u4e8e\u590d\u7528\u7ec4\u4ef6\u903b\u8f91\u7684\u4e00\u79cd\u9ad8\u7ea7\u6280\u5de7\u3002HOC \u81ea\u8eab\u4e0d\u662f React API \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e React \u7684\u7ec4\u5408\u7279\u6027\u800c\u5f62\u6210\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\n\n\u7b80\u8a00\u4e4b\uff0cHOC\u662f\u4e00\u79cd\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0cHOC\u63a5\u53d7\u4e00\u4e2a\u7ec4\u4ef6\u548c\u989d\u5916\u7684\u53c2\u6570\uff08\u5982\u679c\u9700\u8981\uff09\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\u3002HOC \u662f\u7eaf\u51fd\u6570\uff0c\u6ca1\u6709\u526f\u4f5c\u7528\u3002\n\n```javascript\n// hoc\u7684\u5b9a\u4e49\nfunction withSubscription(WrappedComponent, selectData) {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        data: selectData(DataSource, props)\n      };\n    }\n    // \u4e00\u4e9b\u901a\u7528\u7684\u903b\u8f91\u5904\u7406\n    render() {\n      // ... \u5e76\u4f7f\u7528\u65b0\u6570\u636e\u6e32\u67d3\u88ab\u5305\u88c5\u7684\u7ec4\u4ef6!\n      return <WrappedComponent data={this.state.data} {...this.props} />;\n    }\n  };\n\n// \u4f7f\u7528\nconst BlogPostWithSubscription = withSubscription(BlogPost,\n  (DataSource, props) => DataSource.getBlogPost(props.id));\n```\n\nHOC\u7684\u4f18\u7f3a\u70b9\u2236\n\n- \u4f18\u70b9\u2236 \u903b\u8f91\u670d\u7528\u3001\u4e0d\u5f71\u54cd\u88ab\u5305\u88f9\u7ec4\u4ef6\u7684\u5185\u90e8\u903b\u8f91\u3002 \n- \u7f3a\u70b9\u2236 hoc\u4f20\u9012\u7ed9\u88ab\u5305\u88f9\u7ec4\u4ef6\u7684props\u5bb9\u6613\u548c\u88ab\u5305\u88f9\u540e\u7684\u7ec4\u4ef6\u91cd\u540d\uff0c\u8fdb\u800c\u88ab\u8986\u76d6 \n\n\n\n**\uff082\uff09Render props**\n\u5b98\u65b9\u89e3\u91ca\u2236\n\n> \"render prop\"\u662f\u6307\u4e00\u79cd\u5728 React \u7ec4\u4ef6\u4e4b\u95f4\u4f7f\u7528\u4e00\u4e2a\u503c\u4e3a\u51fd\u6570\u7684 prop \u5171\u4eab\u4ee3\u7801\u7684\u7b80\u5355\u6280\u672f\n\n\u5177\u6709render prop \u7684\u7ec4\u4ef6\u63a5\u53d7\u4e00\u4e2a\u8fd4\u56deReact\u5143\u7d20\u7684\u51fd\u6570\uff0c\u5c06render\u7684\u6e32\u67d3\u903b\u8f91\u6ce8\u5165\u5230\u7ec4\u4ef6\u5185\u90e8\u3002\u5728\u8fd9\u91cc\uff0c\"render\"\u7684\u547d\u540d\u53ef\u4ee5\u662f\u4efb\u4f55\u5176\u4ed6\u6709\u6548\u7684\u6807\u8bc6\u7b26\u3002\n\n```javascript\n// DataProvider\u7ec4\u4ef6\u5185\u90e8\u7684\u6e32\u67d3\u903b\u8f91\u5982\u4e0b\nclass DataProvider extends React.Components {\n     state = {\n    name: 'Tom'\n  }\n\n    render() {\n    return (\n        <div>\n          <p>\u5171\u4eab\u6570\u636e\u7ec4\u4ef6\u81ea\u5df1\u5185\u90e8\u7684\u6e32\u67d3\u903b\u8f91</p>\n          { this.props.render(this.state) }\n      </div>\n    );\n  }\n}\n\n// \u8c03\u7528\u65b9\u5f0f\n<DataProvider render={data => (\n  <h1>Hello {data.name}</h1>\n)}/>\n\n```\n\n\u7531\u6b64\u53ef\u4ee5\u770b\u5230\uff0crender props\u7684\u4f18\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\u2236\n\n- \u4f18\u70b9\uff1a\u6570\u636e\u5171\u4eab\u3001\u4ee3\u7801\u590d\u7528\uff0c\u5c06\u7ec4\u4ef6\u5185\u7684state\u4f5c\u4e3aprops\u4f20\u9012\u7ed9\u8c03\u7528\u8005\uff0c\u5c06\u6e32\u67d3\u903b\u8f91\u4ea4\u7ed9\u8c03\u7528\u8005\u3002\n- \u7f3a\u70b9\uff1a\u65e0\u6cd5\u5728 return \u8bed\u53e5\u5916\u8bbf\u95ee\u6570\u636e\u3001\u5d4c\u5957\u5199\u6cd5\u4e0d\u591f\u4f18\u96c5\n\n\n\n**\uff083\uff09Hooks**\n\u5b98\u65b9\u89e3\u91ca\u2236\n\n> Hook\u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002\u901a\u8fc7\u81ea\u5b9a\u4e49hook\uff0c\u53ef\u4ee5\u590d\u7528\u4ee3\u7801\u903b\u8f91\u3002\n\n```javascript\n// \u81ea\u5b9a\u4e49\u4e00\u4e2a\u83b7\u53d6\u8ba2\u9605\u6570\u636e\u7684hook\nfunction useSubscription() {\n  const data = DataSource.getComments();\n  return [data];\n}\n// \nfunction CommentList(props) {\n  const {data} = props;\n  const [subData] = useSubscription();\n    ...\n}\n// \u4f7f\u7528\n<CommentList data='hello' />\n```\n\n\u4ee5\u4e0a\u53ef\u4ee5\u770b\u51fa\uff0chook\u89e3\u51b3\u4e86hoc\u7684prop\u8986\u76d6\u7684\u95ee\u9898\uff0c\u540c\u65f6\u4f7f\u7528\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86render props\u7684\u5d4c\u5957\u5730\u72f1\u7684\u95ee\u9898\u3002hook\u7684\u4f18\u70b9\u5982\u4e0b\u2236 \n\n- \u4f7f\u7528\u76f4\u89c2\uff1b\n- \u89e3\u51b3hoc\u7684prop \u91cd\u540d\u95ee\u9898\uff1b\n- \u89e3\u51b3render props \u56e0\u5171\u4eab\u6570\u636e \u800c\u51fa\u73b0\u5d4c\u5957\u5730\u72f1\u7684\u95ee\u9898\uff1b\n- \u80fd\u5728return\u4e4b\u5916\u4f7f\u7528\u6570\u636e\u7684\u95ee\u9898\u3002\n\n\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1ahook\u53ea\u80fd\u5728\u7ec4\u4ef6\u9876\u5c42\u4f7f\u7528\uff0c\u4e0d\u53ef\u5728\u5206\u652f\u8bed\u53e5\u4e2d\u4f7f\u7528\u3002\n\n\n**\u603b\u7ed3\u2236**\nHoc\u3001render props\u548chook\u90fd\u662f\u4e3a\u4e86\u89e3\u51b3\u4ee3\u7801\u590d\u7528\u7684\u95ee\u9898\uff0c\u4f46\u662fhoc\u548crender props\u90fd\u6709\u7279\u5b9a\u7684\u4f7f\u7528\u573a\u666f\u548c\u660e\u663e\u7684\u7f3a\u70b9\u3002hook\u662freact16.8\u66f4\u65b0\u7684\u65b0\u7684API\uff0c\u8ba9\u7ec4\u4ef6\u903b\u8f91\u590d\u7528\u66f4\u7b80\u6d01\u660e\u4e86\uff0c\u540c\u65f6\u4e5f\u89e3\u51b3\u4e86hoc\u548crender props\u7684\u4e00\u4e9b\u7f3a\u70b9\u3002\n\n### 5. \u5bf9React-Fiber\u7684\u7406\u89e3\uff0c\u5b83\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f\n\nReact V15 \u5728\u6e32\u67d3\u65f6\uff0c\u4f1a\u9012\u5f52\u6bd4\u5bf9 VirtualDOM \u6811\uff0c\u627e\u51fa\u9700\u8981\u53d8\u52a8\u7684\u8282\u70b9\uff0c\u7136\u540e\u540c\u6b65\u66f4\u65b0\u5b83\u4eec\uff0c \u4e00\u6c14\u5475\u6210\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u671f\u95f4\uff0c React \u4f1a\u5360\u636e\u6d4f\u89c8\u5668\u8d44\u6e90\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7528\u6237\u89e6\u53d1\u7684\u4e8b\u4ef6\u5f97\u4e0d\u5230\u54cd\u5e94\uff0c\u5e76\u4e14\u4f1a\u5bfc\u81f4\u6389\u5e27\uff0c**\u5bfc\u81f4\u7528\u6237\u611f\u89c9\u5230\u5361\u987f**\u3002\n\n\n\u4e3a\u4e86\u7ed9\u7528\u6237\u5236\u9020\u4e00\u79cd\u5e94\u7528\u5f88\u5feb\u7684\u201c\u5047\u8c61\u201d\uff0c\u4e0d\u80fd\u8ba9\u4e00\u4e2a\u4efb\u52a1\u957f\u671f\u9738\u5360\u7740\u8d44\u6e90\u3002 \u53ef\u4ee5\u5c06\u6d4f\u89c8\u5668\u7684\u6e32\u67d3\u3001\u5e03\u5c40\u3001\u7ed8\u5236\u3001\u8d44\u6e90\u52a0\u8f7d(\u4f8b\u5982 HTML \u89e3\u6790)\u3001\u4e8b\u4ef6\u54cd\u5e94\u3001\u811a\u672c\u6267\u884c\u89c6\u4f5c\u64cd\u4f5c\u7cfb\u7edf\u7684\u201c\u8fdb\u7a0b\u201d\uff0c\u9700\u8981\u901a\u8fc7\u67d0\u4e9b\u8c03\u5ea6\u7b56\u7565\u5408\u7406\u5730\u5206\u914d CPU \u8d44\u6e90\uff0c\u4ece\u800c\u63d0\u9ad8\u6d4f\u89c8\u5668\u7684\u7528\u6237\u54cd\u5e94\u901f\u7387, \u540c\u65f6\u517c\u987e\u4efb\u52a1\u6267\u884c\u6548\u7387\u3002\n\n\n\u6240\u4ee5 React \u901a\u8fc7Fiber \u67b6\u6784\uff0c\u8ba9\u8fd9\u4e2a\u6267\u884c\u8fc7\u7a0b\u53d8\u6210\u53ef\u88ab\u4e2d\u65ad\u3002\u201c\u9002\u65f6\u201d\u5730\u8ba9\u51fa CPU \u6267\u884c\u6743\uff0c\u9664\u4e86\u53ef\u4ee5\u8ba9\u6d4f\u89c8\u5668\u53ca\u65f6\u5730\u54cd\u5e94\u7528\u6237\u7684\u4ea4\u4e92\uff0c\u8fd8\u6709\u5176\u4ed6\u597d\u5904:\n\n- \u5206\u6279\u5ef6\u65f6\u5bf9DOM\u8fdb\u884c\u64cd\u4f5c\uff0c\u907f\u514d\u4e00\u6b21\u6027\u64cd\u4f5c\u5927\u91cf DOM \u8282\u70b9\uff0c\u53ef\u4ee5\u5f97\u5230\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\uff1b\n- \u7ed9\u6d4f\u89c8\u5668\u4e00\u70b9\u5598\u606f\u7684\u673a\u4f1a\uff0c\u5b83\u4f1a\u5bf9\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u4f18\u5316\uff08JIT\uff09\u53ca\u8fdb\u884c\u70ed\u4ee3\u7801\u4f18\u5316\uff0c\u6216\u8005\u5bf9 reflow \u8fdb\u884c\u4fee\u6b63\u3002\n\n\n**\u6838\u5fc3\u601d\u60f3:** Fiber \u4e5f\u79f0\u534f\u7a0b\u6216\u8005\u7ea4\u7a0b\u3002\u5b83\u548c\u7ebf\u7a0b\u5e76\u4e0d\u4e00\u6837\uff0c\u534f\u7a0b\u672c\u8eab\u662f\u6ca1\u6709\u5e76\u53d1\u6216\u8005\u5e76\u884c\u80fd\u529b\u7684\uff08\u9700\u8981\u914d\u5408\u7ebf\u7a0b\uff09\uff0c\u5b83\u53ea\u662f\u4e00\u79cd\u63a7\u5236\u6d41\u7a0b\u7684\u8ba9\u51fa\u673a\u5236\u3002\u8ba9\u51fa CPU \u7684\u6267\u884c\u6743\uff0c\u8ba9 CPU \u80fd\u5728\u8fd9\u6bb5\u65f6\u95f4\u6267\u884c\u5176\u4ed6\u7684\u64cd\u4f5c\u3002\u6e32\u67d3\u7684\u8fc7\u7a0b\u53ef\u4ee5\u88ab\u4e2d\u65ad\uff0c\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u4ea4\u56de\u6d4f\u89c8\u5668\uff0c\u8ba9\u4f4d\u7ed9\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\uff0c\u6d4f\u89c8\u5668\u7a7a\u95f2\u540e\u518d\u6062\u590d\u6e32\u67d3\u3002\n\n### 6. React.Component \u548c React.PureComponent \u7684\u533a\u522b\n\nPureComponent\u8868\u793a\u4e00\u4e2a\u7eaf\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u4f18\u5316React\u7a0b\u5e8f\uff0c\u51cf\u5c11render\u51fd\u6570\u6267\u884c\u7684\u6b21\u6570\uff0c\u4ece\u800c\u63d0\u9ad8\u7ec4\u4ef6\u7684\u6027\u80fd\u3002\n\n\n\u5728React\u4e2d\uff0c\u5f53prop\u6216\u8005state\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728shouldComponentUpdate\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u6267\u884creturn false\u6765\u963b\u6b62\u9875\u9762\u7684\u66f4\u65b0\uff0c\u4ece\u800c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684render\u6267\u884c\u3002React.PureComponent\u4f1a\u81ea\u52a8\u6267\u884c\u00a0shouldComponentUpdate\u3002\n\n\n\u4e0d\u8fc7\uff0cpureComponent\u4e2d\u7684 shouldComponentUpdate()\u00a0\u8fdb\u884c\u7684\u662f**\u6d45\u6bd4\u8f83**\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u662f\u5f15\u7528\u6570\u636e\u7c7b\u578b\u7684\u6570\u636e\uff0c\u53ea\u4f1a\u6bd4\u8f83\u4e0d\u662f\u540c\u4e00\u4e2a\u5730\u5740\uff0c\u800c\u4e0d\u4f1a\u6bd4\u8f83\u8fd9\u4e2a\u5730\u5740\u91cc\u9762\u7684\u6570\u636e\u662f\u5426\u4e00\u81f4\u3002\u6d45\u6bd4\u8f83\u4f1a\u5ffd\u7565\u5c5e\u6027\u548c\u6216\u72b6\u6001\u7a81\u53d8\u60c5\u51b5\uff0c\u5176\u5b9e\u4e5f\u5c31\u662f\u6570\u636e\u5f15\u7528\u6307\u9488\u6ca1\u6709\u53d8\u5316\uff0c\u800c\u6570\u636e\u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019render\u662f\u4e0d\u4f1a\u6267\u884c\u7684\u3002\u5982\u679c\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u90a3\u4e48\u5c31\u9700\u8981\u91cd\u65b0\u5f00\u8f9f\u7a7a\u95f4\u5f15\u7528\u6570\u636e\u3002PureComponent\u4e00\u822c\u4f1a\u7528\u5728\u4e00\u4e9b\u7eaf\u5c55\u793a\u7ec4\u4ef6\u4e0a\u3002\n\n\n\u4f7f\u7528pureComponent\u7684**\u597d\u5904**\uff1a\u5f53\u7ec4\u4ef6\u66f4\u65b0\u65f6\uff0c\u5982\u679c\u7ec4\u4ef6\u7684props\u6216\u8005state\u90fd\u6ca1\u6709\u6539\u53d8\uff0crender\u51fd\u6570\u5c31\u4e0d\u4f1a\u89e6\u53d1\u3002\u7701\u53bb\u865a\u62dfDOM\u7684\u751f\u6210\u548c\u5bf9\u6bd4\u8fc7\u7a0b\uff0c\u8fbe\u5230\u63d0\u5347\u6027\u80fd\u7684\u76ee\u7684\u3002\u8fd9\u662f\u56e0\u4e3areact\u81ea\u52a8\u505a\u4e86\u4e00\u5c42\u6d45\u6bd4\u8f83\u3002\n\n### 7. Component, Element, Instance \u4e4b\u95f4\u6709\u4ec0\u4e48\u533a\u522b\u548c\u8054\u7cfb\uff1f\n\n- **\u5143\u7d20\uff1a** \u4e00\u4e2a\u5143\u7d20`element`\u662f\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61(plain object)\uff0c\u63cf\u8ff0\u4e86\u5bf9\u4e8e\u4e00\u4e2aDOM\u8282\u70b9\u6216\u8005\u5176\u4ed6\u7ec4\u4ef6`component`\uff0c\u4f60\u60f3\u8ba9\u5b83\u5728\u5c4f\u5e55\u4e0a\u5448\u73b0\u6210\u4ec0\u4e48\u6837\u5b50\u3002\u5143\u7d20`element`\u53ef\u4ee5\u5728\u5b83\u7684\u5c5e\u6027`props`\u4e2d\u5305\u542b\u5176\u4ed6\u5143\u7d20(\u8bd1\u6ce8:\u7528\u4e8e\u5f62\u6210\u5143\u7d20\u6811)\u3002\u521b\u5efa\u4e00\u4e2aReact\u5143\u7d20`element`\u6210\u672c\u5f88\u4f4e\u3002\u5143\u7d20`element`\u521b\u5efa\u4e4b\u540e\u662f\u4e0d\u53ef\u53d8\u7684\u3002\n- **\u7ec4\u4ef6\uff1a** \u4e00\u4e2a\u7ec4\u4ef6`component`\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u58f0\u660e\u3002\u53ef\u4ee5\u662f\u5e26\u6709\u4e00\u4e2a`render()`\u65b9\u6cd5\u7684\u7c7b\uff0c\u7b80\u5355\u70b9\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u90fd\u628a\u5c5e\u6027`props`\u4f5c\u4e3a\u8f93\u5165\uff0c\u628a\u8fd4\u56de\u7684\u4e00\u68f5\u5143\u7d20\u6811\u4f5c\u4e3a\u8f93\u51fa\u3002\n- **\u5b9e\u4f8b\uff1a** \u4e00\u4e2a\u5b9e\u4f8b`instance`\u662f\u4f60\u5728\u6240\u5199\u7684\u7ec4\u4ef6\u7c7b`component class`\u4e2d\u4f7f\u7528\u5173\u952e\u5b57`this`\u6240\u6307\u5411\u7684\u4e1c\u897f(\u8bd1\u6ce8:\u7ec4\u4ef6\u5b9e\u4f8b)\u3002\u5b83\u7528\u6765\u5b58\u50a8\u672c\u5730\u72b6\u6001\u548c\u54cd\u5e94\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u5f88\u6709\u7528\u3002\n\n\n\n\u51fd\u6570\u5f0f\u7ec4\u4ef6(`Functional component`)\u6839\u672c\u6ca1\u6709\u5b9e\u4f8b`instance`\u3002\u7c7b\u7ec4\u4ef6(`Class component`)\u6709\u5b9e\u4f8b`instance`\uff0c\u4f46\u662f\u6c38\u8fdc\u4e5f\u4e0d\u9700\u8981\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u7ec4\u4ef6\u7684\u5b9e\u4f8b\uff0c\u56e0\u4e3aReact\u5e2e\u6211\u4eec\u505a\u4e86\u8fd9\u4e9b\u3002\n\n### 8. React.createClass\u548cextends Component\u7684\u533a\u522b\u6709\u54ea\u4e9b\uff1f\n\nReact.createClass\u548cextends Component\u7684bai\u533a\u522b\u4e3b\u8981\u5728\u4e8e\uff1a\n\n**\uff081\uff09\u8bed\u6cd5\u533a\u522b**\n\n- createClass\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5de5\u5382\u51fd\u6570\uff0cextends\u7684\u65b9\u5f0f\u66f4\u52a0\u63a5\u8fd1\u6700\u65b0\u7684ES6\u89c4\u8303\u7684class\u5199\u6cd5\u3002\u4e24\u79cd\u65b9\u5f0f\u5728\u8bed\u6cd5\u4e0a\u7684\u5dee\u522b\u4e3b\u8981\u4f53\u73b0\u5728\u65b9\u6cd5\u7684\u5b9a\u4e49\u548c\u9759\u6001\u5c5e\u6027\u7684\u58f0\u660e\u4e0a\u3002\n- createClass\u65b9\u5f0f\u7684\u65b9\u6cd5\u5b9a\u4e49\u4f7f\u7528\u9017\u53f7\uff0c\u9694\u5f00\uff0c\u56e0\u4e3acreatClass\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f20\u9012\u7ed9\u5b83\u7684\u662f\u4e00\u4e2aObject\uff1b\u800cclass\u7684\u65b9\u5f0f\u5b9a\u4e49\u65b9\u6cd5\u65f6\u52a1\u5fc5\u8c28\u8bb0\u4e0d\u8981\u4f7f\u7528\u9017\u53f7\u9694\u5f00\uff0c\u8fd9\u662fES6 class\u7684\u8bed\u6cd5\u89c4\u8303\u3002\n\n\n\n**\uff082\uff09propType \u548c getDefaultProps**\n\n- React.createClass\uff1a\u901a\u8fc7proTypes\u5bf9\u8c61\u548cgetDefaultProps()\u65b9\u6cd5\u6765\u8bbe\u7f6e\u548c\u83b7\u53d6props.\n- React.Component\uff1a\u901a\u8fc7\u8bbe\u7f6e\u4e24\u4e2a\u5c5e\u6027propTypes\u548cdefaultProps\n\n\n\n**\uff083\uff09\u72b6\u6001\u7684\u533a\u522b**\n\n- React.createClass\uff1a\u901a\u8fc7getInitialState()\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u521d\u59cb\u503c\u7684\u5bf9\u8c61\n- React.Component\uff1a\u901a\u8fc7constructor\u8bbe\u7f6e\u521d\u59cb\u72b6\u6001\n\n\n\n**\uff084\uff09this\u533a\u522b**\n\n- React.createClass\uff1a\u4f1a\u6b63\u786e\u7ed1\u5b9athis\n- React.Component\uff1a\u7531\u4e8e\u4f7f\u7528\u4e86 ES6\uff0c\u8fd9\u91cc\u4f1a\u6709\u4e9b\u5fae\u4e0d\u540c\uff0c\u5c5e\u6027\u5e76\u4e0d\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u5230 React \u7c7b\u7684\u5b9e\u4f8b\u4e0a\u3002\n\n\n\n**\uff085\uff09Mixins**\n\n- React.createClass\uff1a\u4f7f\u7528 React.createClass \u7684\u8bdd\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u7ec4\u4ef6\u65f6\u6dfb\u52a0\u4e00\u4e2a\u53eb\u505a mixins \u7684\u5c5e\u6027\uff0c\u5e76\u5c06\u53ef\u4f9b\u6df7\u5408\u7684\u7c7b\u7684\u96c6\u5408\u4ee5\u6570\u7ec4\u7684\u5f62\u5f0f\u8d4b\u7ed9 mixins\u3002\n- \u5982\u679c\u4f7f\u7528 ES6 \u7684\u65b9\u5f0f\u6765\u521b\u5efa\u7ec4\u4ef6\uff0c\u90a3\u4e48 `React mixins` \u7684\u7279\u6027\u5c06\u4e0d\u80fd\u88ab\u4f7f\u7528\u4e86\u3002\n\n### 9. React \u9ad8\u9636\u7ec4\u4ef6\u662f\u4ec0\u4e48\uff0c\u548c\u666e\u901a\u7ec4\u4ef6\u6709\u4ec0\u4e48\u533a\u522b\uff0c\u9002\u7528\u4ec0\u4e48\u573a\u666f\n\n\u5b98\u65b9\u89e3\u91ca\u2236 \n\n> \u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u662f React \u4e2d\u7528\u4e8e\u590d\u7528\u7ec4\u4ef6\u903b\u8f91\u7684\u4e00\u79cd\u9ad8\u7ea7\u6280\u5de7\u3002HOC \u81ea\u8eab\u4e0d\u662f React API \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e React \u7684\u7ec4\u5408\u7279\u6027\u800c\u5f62\u6210\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\n\n\u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e14\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u7ec4\u4ef6\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\uff0c\u5b83\u53ea\u662f\u4e00\u79cd\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u662f\u7531react\u81ea\u8eab\u7684\u7ec4\u5408\u6027\u8d28\u5fc5\u7136\u4ea7\u751f\u7684\u3002\u6211\u4eec\u5c06\u5b83\u4eec\u79f0\u4e3a\u7eaf\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u52a8\u6001\u63d0\u4f9b\u7684\u5b50\u7ec4\u4ef6\uff0c\u4f46\u5b83\u4eec\u4e0d\u4f1a\u4fee\u6539\u6216\u590d\u5236\u5176\u8f93\u5165\u7ec4\u4ef6\u4e2d\u7684\u4efb\u4f55\u884c\u4e3a\u3002\n\n```javascript\n// hoc\u7684\u5b9a\u4e49\nfunction withSubscription(WrappedComponent, selectData) {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        data: selectData(DataSource, props)\n      };\n    }\n    // \u4e00\u4e9b\u901a\u7528\u7684\u903b\u8f91\u5904\u7406\n    render() {\n      // ... \u5e76\u4f7f\u7528\u65b0\u6570\u636e\u6e32\u67d3\u88ab\u5305\u88c5\u7684\u7ec4\u4ef6!\n      return <WrappedComponent data={this.state.data} {...this.props} />;\n    }\n  };\n\n// \u4f7f\u7528\nconst BlogPostWithSubscription = withSubscription(BlogPost,\n  (DataSource, props) => DataSource.getBlogPost(props.id));\n```\n\n**1\uff09HOC\u7684\u4f18\u7f3a\u70b9**\n\n- \u4f18\u70b9\u2236 \u903b\u8f91\u670d\u7528\u3001\u4e0d\u5f71\u54cd\u88ab\u5305\u88f9\u7ec4\u4ef6\u7684\u5185\u90e8\u903b\u8f91\u3002\n- \u7f3a\u70b9\u2236hoc\u4f20\u9012\u7ed9\u88ab\u5305\u88f9\u7ec4\u4ef6\u7684props\u5bb9\u6613\u548c\u88ab\u5305\u88f9\u540e\u7684\u7ec4\u4ef6\u91cd\u540d\uff0c\u8fdb\u800c\u88ab\u8986\u76d6\n\n\n\n**2\uff09\u9002\u7528\u573a\u666f**\n\n- \u4ee3\u7801\u590d\u7528\uff0c\u903b\u8f91\u62bd\u8c61 \n- \u6e32\u67d3\u52ab\u6301 \n- State \u62bd\u8c61\u548c\u66f4\u6539 \n- Props \u66f4\u6539 \n\n\n\n**3\uff09\u5177\u4f53\u5e94\u7528\u4f8b\u5b50**\n\n- **\u6743\u9650\u63a7\u5236\uff1a** \u5229\u7528\u9ad8\u9636\u7ec4\u4ef6\u7684 **\u6761\u4ef6\u6e32\u67d3** \u7279\u6027\u53ef\u4ee5\u5bf9\u9875\u9762\u8fdb\u884c\u6743\u9650\u63a7\u5236\uff0c\u6743\u9650\u63a7\u5236\u4e00\u822c\u5206\u4e3a\u4e24\u4e2a\u7ef4\u5ea6\uff1a\u9875\u9762\u7ea7\u522b\u548c \u9875\u9762\u5143\u7d20\u7ea7\u522b\n\n```javascript\n// HOC.js\nfunction withAdminAuth(WrappedComponent) {\n    return class extends React.Component {\n        state = {\n            isAdmin: false,\n        }\n        async UNSAFE_componentWillMount() {\n            const currentRole = await getCurrentUserRole();\n            this.setState({\n                isAdmin: currentRole === 'Admin',\n            });\n        }\n        render() {\n            if (this.state.isAdmin) {\n                return <WrappedComponent {...this.props} />;\n            } else {\n                return (<div>\u60a8\u6ca1\u6709\u6743\u9650\u67e5\u770b\u8be5\u9875\u9762\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01</div>);\n            }\n        }\n    };\n}\n\n// pages/page-a.js\nclass PageA extends React.Component {\n    constructor(props) {\n        super(props);\n        // something here...\n    }\n    UNSAFE_componentWillMount() {\n        // fetching data\n    }\n    render() {\n        // render page with data\n    }\n}\nexport default withAdminAuth(PageA);\n\n\n// pages/page-b.js\nclass PageB extends React.Component {\n    constructor(props) {\n        super(props);\n    // something here...\n        }\n    UNSAFE_componentWillMount() {\n    // fetching data\n    }\n    render() {\n    // render page with data\n    }\n}\nexport default withAdminAuth(PageB);\n```\n\n- **\u7ec4\u4ef6\u6e32\u67d3\u6027\u80fd\u8ffd\u8e2a\uff1a** \u501f\u52a9\u7236\u7ec4\u4ef6\u5b50\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u89c4\u5219\u6355\u83b7\u5b50\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u5bf9\u67d0\u4e2a\u7ec4\u4ef6\u7684\u6e32\u67d3\u65f6\u95f4\u8fdb\u884c\u8bb0\u5f55\u2236\n\n```javascript\nclass Home extends React.Component {\n        render() {\n            return (<h1>Hello World.</h1>);\n        }\n    }\n    function withTiming(WrappedComponent) {\n        return class extends WrappedComponent {\n            constructor(props) {\n                super(props);\n                this.start = 0;\n                this.end = 0;\n            }\n            UNSAFE_componentWillMount() {\n                super.componentWillMount && super.componentWillMount();\n                this.start = Date.now();\n            }\n            componentDidMount() {\n                super.componentDidMount && super.componentDidMount();\n                this.end = Date.now();\n                console.log(`${WrappedComponent.name} \u7ec4\u4ef6\u6e32\u67d3\u65f6\u95f4\u4e3a ${this.end - this.start} ms`);\n            }\n            render() {\n                return super.render();\n            }\n        };\n    }\n\n    export default withTiming(Home);   \n\n\n```\n\n\u6ce8\u610f\uff1awithTiming \u662f\u5229\u7528 \u53cd\u5411\u7ee7\u627f \u5b9e\u73b0\u7684\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\uff0c\u529f\u80fd\u662f\u8ba1\u7b97\u88ab\u5305\u88f9\u7ec4\u4ef6\uff08\u8fd9\u91cc\u662f Home \u7ec4\u4ef6\uff09\u7684\u6e32\u67d3\u65f6\u95f4\u3002\n\n- **\u9875\u9762\u590d\u7528**\n\n```javascript\nconst withFetching = fetching => WrappedComponent => {\n    return class extends React.Component {\n        state = {\n            data: [],\n        }\n        async UNSAFE_componentWillMount() {\n            const data = await fetching();\n            this.setState({\n                data,\n            });\n        }\n        render() {\n            return <WrappedComponent data={this.state.data} {...this.props} />;\n        }\n    }\n}\n\n// pages/page-a.js\nexport default withFetching(fetching('science-fiction'))(MovieList);\n// pages/page-b.js\nexport default withFetching(fetching('action'))(MovieList);\n// pages/page-other.js\nexport default withFetching(fetching('some-other-type'))(MovieList);\n```\n\n### 10. \u5bf9componentWillReceiveProps \u7684\u7406\u89e3\n\n\u8be5\u65b9\u6cd5\u5f53`props`\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c\uff0c\u521d\u59cb\u5316`render`\u65f6\u4e0d\u6267\u884c\uff0c\u5728\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u91cc\u9762\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5c5e\u6027\u7684\u53d8\u5316\uff0c\u901a\u8fc7\u8c03\u7528`this.setState()`\u6765\u66f4\u65b0\u4f60\u7684\u7ec4\u4ef6\u72b6\u6001\uff0c\u65e7\u7684\u5c5e\u6027\u8fd8\u662f\u53ef\u4ee5\u901a\u8fc7`this.props`\u6765\u83b7\u53d6,\u8fd9\u91cc\u8c03\u7528\u66f4\u65b0\u72b6\u6001\u662f\u5b89\u5168\u7684\uff0c\u5e76\u4e0d\u4f1a\u89e6\u53d1\u989d\u5916\u7684`render`\u8c03\u7528\u3002\n\n\n**\u4f7f\u7528\u597d\u5904\uff1a** \u5728\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u4e2d\uff0c\u53ef\u4ee5\u5728\u5b50\u7ec4\u4ef6\u7684render\u51fd\u6570\u6267\u884c\u524d\u83b7\u53d6\u65b0\u7684props\uff0c\u4ece\u800c\u66f4\u65b0\u5b50\u7ec4\u4ef6\u81ea\u5df1\u7684state\u3002\u00a0\u53ef\u4ee5\u5c06\u6570\u636e\u8bf7\u6c42\u653e\u5728\u8fd9\u91cc\u8fdb\u884c\u6267\u884c\uff0c\u9700\u8981\u4f20\u7684\u53c2\u6570\u5219\u4ececomponentWillReceiveProps(nextProps)\u4e2d\u83b7\u53d6\u3002\u800c\u4e0d\u5fc5\u5c06\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u653e\u5728\u7236\u7ec4\u4ef6\u4e2d\u3002\u4e8e\u662f\u8be5\u8bf7\u6c42\u53ea\u4f1a\u5728\u8be5\u7ec4\u4ef6\u6e32\u67d3\u65f6\u624d\u4f1a\u53d1\u51fa\uff0c\u4ece\u800c\u51cf\u8f7b\u8bf7\u6c42\u8d1f\u62c5\u3002\n\ncomponentWillReceiveProps\u5728\u521d\u59cb\u5316render\u7684\u65f6\u5019\u4e0d\u4f1a\u6267\u884c\uff0c\u5b83\u4f1a\u5728Component\u63a5\u53d7\u5230\u65b0\u7684\u72b6\u6001(Props)\u65f6\u88ab\u89e6\u53d1\uff0c\u4e00\u822c\u7528\u4e8e\u7236\u7ec4\u4ef6\u72b6\u6001\u66f4\u65b0\u65f6\u5b50\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002\n\n### 11. \u54ea\u4e9b\u65b9\u6cd5\u4f1a\u89e6\u53d1 React \u91cd\u65b0\u6e32\u67d3\uff1f\u91cd\u65b0\u6e32\u67d3 render \u4f1a\u505a\u4e9b\u4ec0\u4e48\uff1f\n\n**\uff081\uff09\u54ea\u4e9b\u65b9\u6cd5\u4f1a\u89e6\u53d1 react \u91cd\u65b0\u6e32\u67d3?**\n\n- **setState\uff08\uff09\u65b9\u6cd5\u88ab\u8c03\u7528**\n\nsetState \u662f React \u4e2d\u6700\u5e38\u7528\u7684\u547d\u4ee4\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6267\u884c setState \u4f1a\u89e6\u53d1 render\u3002\u4f46\u662f\u8fd9\u91cc\u6709\u4e2a\u70b9\u503c\u5f97\u5173\u6ce8\uff0c\u6267\u884c setState \u7684\u65f6\u5019\u4e0d\u4e00\u5b9a\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u5f53 setState \u4f20\u5165 null \u65f6\uff0c\u5e76\u4e0d\u4f1a\u89e6\u53d1 render\u3002\n\n```javascript\nclass App extends React.Component {\n  state = {\n    a: 1\n  };\n\n  render() {\n    console.log(\"render\");\n    return (\n      <React.Fragement>\n        <p>{this.state.a}</p>\n        <button\n          onClick={() => {\n            this.setState({ a: 1 }); // \u8fd9\u91cc\u5e76\u6ca1\u6709\u6539\u53d8 a \u7684\u503c\n          }}\n        >\n          Click me\n        </button>\n        <button onClick={() => this.setState(null)}>setState null</button>\n        <Child />\n      </React.Fragement>\n    );\n  }\n}\n```\n\n- **\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3**\n\n\u53ea\u8981\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u4e86\uff0c\u5373\u4f7f\u4f20\u5165\u5b50\u7ec4\u4ef6\u7684 props \u672a\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u5b50\u7ec4\u4ef6\u4e5f\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\u8fdb\u800c\u89e6\u53d1 render\n\n\n**\uff082\uff09\u91cd\u65b0\u6e32\u67d3 render \u4f1a\u505a\u4e9b\u4ec0\u4e48?**\n\n- \u4f1a\u5bf9\u65b0\u65e7 VNode \u8fdb\u884c\u5bf9\u6bd4\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684Diff\u7b97\u6cd5\u3002\n- \u5bf9\u65b0\u65e7\u4e24\u68f5\u6811\u8fdb\u884c\u4e00\u4e2a\u6df1\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u8fd9\u6837\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u4f1a\u4e00\u4e2a\u6807\u8bb0\uff0c\u5728\u5230\u6df1\u5ea6\u904d\u5386\u7684\u65f6\u5019\uff0c\u6bcf\u904d\u5386\u5230\u4e00\u548c\u4e2a\u8282\u70b9\uff0c\u5c31\u628a\u8be5\u8282\u70b9\u548c\u65b0\u7684\u8282\u70b9\u6811\u8fdb\u884c\u5bf9\u6bd4\uff0c\u5982\u679c\u6709\u5dee\u5f02\u5c31\u653e\u5230\u4e00\u4e2a\u5bf9\u8c61\u91cc\u9762\n- \u904d\u5386\u5dee\u5f02\u5bf9\u8c61\uff0c\u6839\u636e\u5dee\u5f02\u7684\u7c7b\u578b\uff0c\u6839\u636e\u5bf9\u5e94\u5bf9\u89c4\u5219\u66f4\u65b0VNode\n\n\n\nReact \u7684\u5904\u7406 render \u7684\u57fa\u672c\u601d\u7ef4\u6a21\u5f0f\u662f\u6bcf\u6b21\u4e00\u6709\u53d8\u52a8\u5c31\u4f1a\u53bb\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a\u5e94\u7528\u3002\u5728 Virtual DOM \u6ca1\u6709\u51fa\u73b0\u4e4b\u524d\uff0c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u8c03\u7528 innerHTML\u3002Virtual DOM\u5389\u5bb3\u7684\u5730\u65b9\u5e76\u4e0d\u662f\u8bf4\u5b83\u6bd4\u76f4\u63a5\u64cd\u4f5c DOM \u5feb\uff0c\u800c\u662f\u8bf4\u4e0d\u7ba1\u6570\u636e\u600e\u4e48\u53d8\uff0c\u90fd\u4f1a\u5c3d\u91cf\u4ee5\u6700\u5c0f\u7684\u4ee3\u4ef7\u53bb\u66f4\u65b0 DOM\u3002React \u5c06 render \u51fd\u6570\u8fd4\u56de\u7684\u865a\u62df DOM \u6811\u4e0e\u8001\u7684\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ece\u800c\u786e\u5b9a DOM \u8981\u4e0d\u8981\u66f4\u65b0\u3001\u600e\u4e48\u66f4\u65b0\u3002\u5f53 DOM \u6811\u5f88\u5927\u65f6\uff0c\u904d\u5386\u4e24\u68f5\u6811\u8fdb\u884c\u5404\u79cd\u6bd4\u5bf9\u8fd8\u662f\u76f8\u5f53\u8017\u6027\u80fd\u7684\uff0c\u7279\u522b\u662f\u5728\u9876\u5c42 setState \u4e00\u4e2a\u5fae\u5c0f\u7684\u4fee\u6539\uff0c\u9ed8\u8ba4\u4f1a\u53bb\u904d\u5386\u6574\u68f5\u6811\u3002\u5c3d\u7ba1 React \u4f7f\u7528\u9ad8\u5ea6\u4f18\u5316\u7684 Diff \u7b97\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e2a\u8fc7\u7a0b\u4ecd\u7136\u4f1a\u635f\u8017\u6027\u80fd.\n\n### 12. React\u5982\u4f55\u5224\u65ad\u4ec0\u4e48\u65f6\u5019\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\uff1f\n\n\u7ec4\u4ef6\u72b6\u6001\u7684\u6539\u53d8\u53ef\u4ee5\u56e0\u4e3a`props`\u7684\u6539\u53d8\uff0c\u6216\u8005\u76f4\u63a5\u901a\u8fc7`setState`\u65b9\u6cd5\u6539\u53d8\u3002\u7ec4\u4ef6\u83b7\u5f97\u65b0\u7684\u72b6\u6001\uff0c\u7136\u540eReact\u51b3\u5b9a\u662f\u5426\u5e94\u8be5\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u3002\u53ea\u8981\u7ec4\u4ef6\u7684state\u53d1\u751f\u53d8\u5316\uff0cReact\u5c31\u4f1a\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\u3002\u8fd9\u662f\u56e0\u4e3aReact\u4e2d\u7684`shouldComponentUpdate`\u65b9\u6cd5\u9ed8\u8ba4\u8fd4\u56de`true`\uff0c\u8fd9\u5c31\u662f\u5bfc\u81f4\u6bcf\u6b21\u66f4\u65b0\u90fd\u91cd\u65b0\u6e32\u67d3\u7684\u539f\u56e0\u3002\n\n\n\u5f53React\u5c06\u8981\u6e32\u67d3\u7ec4\u4ef6\u65f6\u4f1a\u6267\u884c`shouldComponentUpdate`\u65b9\u6cd5\u6765\u770b\u5b83\u662f\u5426\u8fd4\u56de`true`\uff08\u7ec4\u4ef6\u5e94\u8be5\u66f4\u65b0\uff0c\u4e5f\u5c31\u662f\u91cd\u65b0\u6e32\u67d3\uff09\u3002\u6240\u4ee5\u9700\u8981\u91cd\u5199`shouldComponentUpdate`\u65b9\u6cd5\u8ba9\u5b83\u6839\u636e\u60c5\u51b5\u8fd4\u56de`true`\u6216\u8005`false`\u6765\u544a\u8bc9React\u4ec0\u4e48\u65f6\u5019\u91cd\u65b0\u6e32\u67d3\u4ec0\u4e48\u65f6\u5019\u8df3\u8fc7\u91cd\u65b0\u6e32\u67d3\u3002\n\n### 13. React\u58f0\u660e\u7ec4\u4ef6\u6709\u54ea\u51e0\u79cd\u65b9\u6cd5\uff0c\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\n\nReact \u58f0\u660e\u7ec4\u4ef6\u7684\u4e09\u79cd\u65b9\u5f0f\uff1a\n\n- \u51fd\u6570\u5f0f\u5b9a\u4e49\u7684`\u65e0\u72b6\u6001\u7ec4\u4ef6`\n- ES5\u539f\u751f\u65b9\u5f0f`React.createClass`\u5b9a\u4e49\u7684\u7ec4\u4ef6\n- ES6\u5f62\u5f0f\u7684`extends React.Component`\u5b9a\u4e49\u7684\u7ec4\u4ef6\n\n\n\n**\uff081\uff09\u65e0\u72b6\u6001\u51fd\u6570\u5f0f\u7ec4\u4ef6**\n\u5b83\u662f\u4e3a\u4e86\u521b\u5efa\u7eaf\u5c55\u793a\u7ec4\u4ef6\uff0c\u8fd9\u79cd\u7ec4\u4ef6\u53ea\u8d1f\u8d23\u6839\u636e\u4f20\u5165\u7684props\u6765\u5c55\u793a\uff0c\u4e0d\u6d89\u53ca\u5230state\u72b6\u6001\u7684\u64cd\u4f5c\n\u7ec4\u4ef6\u4e0d\u4f1a\u88ab\u5b9e\u4f8b\u5316\uff0c\u6574\u4f53\u6e32\u67d3\u6027\u80fd\u5f97\u5230\u63d0\u5347\uff0c\u4e0d\u80fd\u8bbf\u95eethis\u5bf9\u8c61\uff0c\u4e0d\u80fd\u8bbf\u95ee\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5\n\n\n**\uff082\uff09ES5 \u539f\u751f\u65b9\u5f0f React.createClass // RFC**\nReact.createClass\u4f1a\u81ea\u7ed1\u5b9a\u51fd\u6570\u65b9\u6cd5\uff0c\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u6027\u80fd\u5f00\u9500\uff0c\u589e\u52a0\u4ee3\u7801\u8fc7\u65f6\u7684\u53ef\u80fd\u6027\u3002\n\n\n**\uff083\uff09E6\u7ee7\u627f\u5f62\u5f0f React.Component // RCC**\n\u76ee\u524d\u6781\u4e3a\u63a8\u8350\u7684\u521b\u5efa\u6709\u72b6\u6001\u7ec4\u4ef6\u7684\u65b9\u5f0f\uff0c\u6700\u7ec8\u4f1a\u53d6\u4ee3React.createClass\u5f62\u5f0f\uff1b\u76f8\u5bf9\u4e8e React.createClass\u53ef\u4ee5\u66f4\u597d\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u3002\n\n\n**\u65e0\u72b6\u6001\u7ec4\u4ef6\u76f8\u5bf9\u4e8e\u4e8e\u540e\u8005\u7684\u533a\u522b\uff1a**\n\u4e0e\u65e0\u72b6\u6001\u7ec4\u4ef6\u76f8\u6bd4\uff0cReact.createClass\u548cReact.Component\u90fd\u662f\u521b\u5efa\u6709\u72b6\u6001\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u662f\u8981\u88ab\u5b9e\u4f8b\u5316\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002\n\n\n**React.createClass\u4e0eReact.Component\u533a\u522b\uff1a**\n\n**\u2460 \u51fd\u6570this\u81ea\u7ed1\u5b9a**\n\n- React.createClass\u521b\u5efa\u7684\u7ec4\u4ef6\uff0c\u5176\u6bcf\u4e00\u4e2a\u6210\u5458\u51fd\u6570\u7684this\u90fd\u6709React\u81ea\u52a8\u7ed1\u5b9a\uff0c\u51fd\u6570\u4e2d\u7684this\u4f1a\u88ab\u6b63\u786e\u8bbe\u7f6e\u3002\n- React.Component\u521b\u5efa\u7684\u7ec4\u4ef6\uff0c\u5176\u6210\u5458\u51fd\u6570\u4e0d\u4f1a\u81ea\u52a8\u7ed1\u5b9athis\uff0c\u9700\u8981\u5f00\u53d1\u8005\u624b\u52a8\u7ed1\u5b9a\uff0c\u5426\u5219this\u4e0d\u80fd\u83b7\u53d6\u5f53\u524d\u7ec4\u4ef6\u5b9e\u4f8b\u5bf9\u8c61\u3002\n\n**\u2461 \u7ec4\u4ef6\u5c5e\u6027\u7c7b\u578bpropTypes\u53ca\u5176\u9ed8\u8ba4props\u5c5e\u6027defaultProps\u914d\u7f6e\u4e0d\u540c**\n\n- React.createClass\u5728\u521b\u5efa\u7ec4\u4ef6\u65f6\uff0c\u6709\u5173\u7ec4\u4ef6props\u7684\u5c5e\u6027\u7c7b\u578b\u53ca\u7ec4\u4ef6\u9ed8\u8ba4\u7684\u5c5e\u6027\u4f1a\u4f5c\u4e3a\u7ec4\u4ef6\u5b9e\u4f8b\u7684\u5c5e\u6027\u6765\u914d\u7f6e\uff0c\u5176\u4e2ddefaultProps\u662f\u4f7f\u7528getDefaultProps\u7684\u65b9\u6cd5\u6765\u83b7\u53d6\u9ed8\u8ba4\u7ec4\u4ef6\u5c5e\u6027\u7684\n- React.Component\u5728\u521b\u5efa\u7ec4\u4ef6\u65f6\u914d\u7f6e\u8fd9\u4e24\u4e2a\u5bf9\u5e94\u4fe1\u606f\u65f6\uff0c\u4ed6\u4eec\u662f\u4f5c\u4e3a\u7ec4\u4ef6\u7c7b\u7684\u5c5e\u6027\uff0c\u4e0d\u662f\u7ec4\u4ef6\u5b9e\u4f8b\u7684\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u7c7b\u7684\u9759\u6001\u5c5e\u6027\u6765\u914d\u7f6e\u7684\u3002\n\n**\u2462 \u7ec4\u4ef6\u521d\u59cb\u72b6\u6001state\u7684\u914d\u7f6e\u4e0d\u540c**\n\n- React.createClass\u521b\u5efa\u7684\u7ec4\u4ef6\uff0c\u5176\u72b6\u6001state\u662f\u901a\u8fc7getInitialState\u65b9\u6cd5\u6765\u914d\u7f6e\u7ec4\u4ef6\u76f8\u5173\u7684\u72b6\u6001\uff1b\n- React.Component\u521b\u5efa\u7684\u7ec4\u4ef6\uff0c\u5176\u72b6\u6001state\u662f\u5728constructor\u4e2d\u50cf\u521d\u59cb\u5316\u7ec4\u4ef6\u5c5e\u6027\u4e00\u6837\u58f0\u660e\u7684\u3002\n\n### 14. \u5bf9\u6709\u72b6\u6001\u7ec4\u4ef6\u548c\u65e0\u72b6\u6001\u7ec4\u4ef6\u7684\u7406\u89e3\u53ca\u4f7f\u7528\u573a\u666f\n\n**\uff081\uff09\u6709\u72b6\u6001\u7ec4\u4ef6**\n\n**\u7279\u70b9\uff1a**\n\n- \u662f\u7c7b\u7ec4\u4ef6 \n- \u6709\u7ee7\u627f \n- \u53ef\u4ee5\u4f7f\u7528this\n- \u53ef\u4ee5\u4f7f\u7528react\u7684\u751f\u547d\u5468\u671f\n- \u4f7f\u7528\u8f83\u591a\uff0c\u5bb9\u6613\u9891\u7e41\u89e6\u53d1\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\uff0c\u5f71\u54cd\u6027\u80fd\n- \u5185\u90e8\u4f7f\u7528 state\uff0c\u7ef4\u62a4\u81ea\u8eab\u72b6\u6001\u7684\u53d8\u5316\uff0c\u6709\u72b6\u6001\u7ec4\u4ef6\u6839\u636e\u5916\u90e8\u7ec4\u4ef6\u4f20\u5165\u7684 props \u548c\u81ea\u8eab\u7684 state\u8fdb\u884c\u6e32\u67d3\u3002\n\n\n\n**\u4f7f\u7528\u573a\u666f\uff1a**\n\n- \u9700\u8981\u4f7f\u7528\u5230\u72b6\u6001\u7684\u3002 \n- \u9700\u8981\u4f7f\u7528\u72b6\u6001\u64cd\u4f5c\u7ec4\u4ef6\u7684\uff08\u65e0\u72b6\u6001\u7ec4\u4ef6\u7684\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u65b0\u7248\u672creact hooks\u4e5f\u53ef\u5b9e\u73b0\uff09\n\n\n\n**\u603b\u7ed3\uff1a**\n\u7c7b\u7ec4\u4ef6\u53ef\u4ee5\u7ef4\u62a4\u81ea\u8eab\u7684\u72b6\u6001\u53d8\u91cf\uff0c\u5373\u7ec4\u4ef6\u7684 state \uff0c\u7c7b\u7ec4\u4ef6\u8fd8\u6709\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8ba9\u5f00\u53d1\u8005\u80fd\u591f\u5728\u7ec4\u4ef6\u7684\u4e0d\u540c\u9636\u6bb5\uff08\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\uff09\uff0c\u5bf9\u7ec4\u4ef6\u505a\u66f4\u591a\u7684\u63a7\u5236\u3002\u7c7b\u7ec4\u4ef6\u5219\u65e2\u53ef\u4ee5\u5145\u5f53\u65e0\u72b6\u6001\u7ec4\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u5145\u5f53\u6709\u72b6\u6001\u7ec4\u4ef6\u3002\u5f53\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\u4e0d\u9700\u8981\u7ba1\u7406\u81ea\u8eab\u72b6\u6001\u65f6\uff0c\u4e5f\u53ef\u79f0\u4e3a\u65e0\u72b6\u6001\u7ec4\u4ef6\u3002\n\n\n**\uff082\uff09\u65e0\u72b6\u6001\u7ec4\u4ef6**\n**\u7279\u70b9\uff1a**\n\n- \u4e0d\u4f9d\u8d56\u81ea\u8eab\u7684\u72b6\u6001state\n- \u53ef\u4ee5\u662f\u7c7b\u7ec4\u4ef6\u6216\u8005\u51fd\u6570\u7ec4\u4ef6\u3002\n- \u53ef\u4ee5\u5b8c\u5168\u907f\u514d\u4f7f\u7528 this \u5173\u952e\u5b57\u3002\uff08\u7531\u4e8e\u4f7f\u7528\u7684\u662f\u7bad\u5934\u51fd\u6570\u4e8b\u4ef6\u65e0\u9700\u7ed1\u5b9a\uff09\n- \u6709\u66f4\u9ad8\u7684\u6027\u80fd\u3002\u5f53\u4e0d\u9700\u8981\u4f7f\u7528\u751f\u547d\u5468\u671f\u94a9\u5b50\u65f6\uff0c\u5e94\u8be5\u9996\u5148\u4f7f\u7528\u65e0\u72b6\u6001\u51fd\u6570\u7ec4\u4ef6\n- \u7ec4\u4ef6\u5185\u90e8\u4e0d\u7ef4\u62a4 state \uff0c\u53ea\u6839\u636e\u5916\u90e8\u7ec4\u4ef6\u4f20\u5165\u7684 props \u8fdb\u884c\u6e32\u67d3\u7684\u7ec4\u4ef6\uff0c\u5f53 props \u6539\u53d8\u65f6\uff0c\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002\n\n\n\n**\u4f7f\u7528\u573a\u666f\uff1a**\n\n- \u7ec4\u4ef6\u4e0d\u9700\u8981\u7ba1\u7406 state\uff0c\u7eaf\u5c55\u793a \n\n\n\n**\u4f18\u70b9\uff1a**\n\n- \u7b80\u5316\u4ee3\u7801\u3001\u4e13\u6ce8\u4e8e render\n- \u7ec4\u4ef6\u4e0d\u9700\u8981\u88ab\u5b9e\u4f8b\u5316\uff0c\u65e0\u751f\u547d\u5468\u671f\uff0c\u63d0\u5347\u6027\u80fd\u3002 \u8f93\u51fa\uff08\u6e32\u67d3\uff09\u53ea\u53d6\u51b3\u4e8e\u8f93\u5165\uff08\u5c5e\u6027\uff09\uff0c\u65e0\u526f\u4f5c\u7528\n- \u89c6\u56fe\u548c\u6570\u636e\u7684\u89e3\u8026\u5206\u79bb\n\n\n\n**\u7f3a\u70b9\uff1a**\n\n- \u65e0\u6cd5\u4f7f\u7528 ref \n- \u65e0\u751f\u547d\u5468\u671f\u65b9\u6cd5\n- \u65e0\u6cd5\u63a7\u5236\u7ec4\u4ef6\u7684\u91cd\u6e32\u67d3\uff0c\u56e0\u4e3a\u65e0\u6cd5\u4f7f\u7528shouldComponentUpdate \u65b9\u6cd5\uff0c\u5f53\u7ec4\u4ef6\u63a5\u53d7\u5230\u65b0\u7684\u5c5e\u6027\u65f6\u5219\u4f1a\u91cd\u6e32\u67d3\n\n\n\n**\u603b\u7ed3\uff1a**\n\u7ec4\u4ef6\u5185\u90e8\u72b6\u6001\u4e14\u4e0e\u5916\u90e8\u65e0\u5173\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u8003\u8651\u7528\u72b6\u6001\u7ec4\u4ef6\uff0c\u8fd9\u6837\u72b6\u6001\u6811\u5c31\u4e0d\u4f1a\u8fc7\u4e8e\u590d\u6742\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u7ba1\u7406\u3002\u5f53\u4e00\u4e2a\u7ec4\u4ef6\u4e0d\u9700\u8981\u7ba1\u7406\u81ea\u8eab\u72b6\u6001\u65f6\uff0c\u4e5f\u5c31\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6\uff0c\u5e94\u8be5\u4f18\u5148\u8bbe\u8ba1\u4e3a\u51fd\u6570\u7ec4\u4ef6\u3002\u6bd4\u5982\u81ea\u5b9a\u4e49\u7684 `<Button/>`\u3001 `<Input />` \u7b49\u7ec4\u4ef6\u3002\n\n### 15. \u5bf9React\u4e2dFragment\u7684\u7406\u89e3\uff0c\u5b83\u7684\u4f7f\u7528\u573a\u666f\u662f\u4ec0\u4e48\uff1f\n\n\u5728React\u4e2d\uff0c\u7ec4\u4ef6\u8fd4\u56de\u7684\u5143\u7d20\u53ea\u80fd\u6709\u4e00\u4e2a\u6839\u5143\u7d20\u3002\u4e3a\u4e86\u4e0d\u6dfb\u52a0\u591a\u4f59\u7684DOM\u8282\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Fragment\u6807\u7b7e\u6765\u5305\u88f9\u6240\u6709\u7684\u5143\u7d20\uff0cFragment\u6807\u7b7e\u4e0d\u4f1a\u6e32\u67d3\u51fa\u4efb\u4f55\u5143\u7d20\u3002React\u5b98\u65b9\u5bf9Fragment\u7684\u89e3\u91ca\uff1a\n\n> React \u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u6a21\u5f0f\u662f\u4e00\u4e2a\u7ec4\u4ef6\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u3002Fragments \u5141\u8bb8\u4f60\u5c06\u5b50\u5217\u8868\u5206\u7ec4\uff0c\u800c\u65e0\u9700\u5411 DOM \u6dfb\u52a0\u989d\u5916\u8282\u70b9\u3002\n\n```javascript\nimport React, { Component, Fragment } from 'react'\n\n// \u4e00\u822c\u5f62\u5f0f\nrender() {\n  return (\n    <React.Fragment>\n      <ChildA />\n      <ChildB />\n      <ChildC />\n    </React.Fragment>\n  );\n}\n// \u4e5f\u53ef\u4ee5\u5199\u6210\u4ee5\u4e0b\u5f62\u5f0f\nrender() {\n  return (\n    <>\n      <ChildA />\n      <ChildB />\n      <ChildC />\n    </>\n  );\n}\n```\n\n### 16. React\u5982\u4f55\u83b7\u53d6\u7ec4\u4ef6\u5bf9\u5e94\u7684DOM\u5143\u7d20\uff1f\n\n\u53ef\u4ee5\u7528ref\u6765\u83b7\u53d6\u67d0\u4e2a\u5b50\u8282\u70b9\u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u901a\u8fc7\u5f53\u524dclass\u7ec4\u4ef6\u5b9e\u4f8b\u7684\u4e00\u4e9b\u7279\u5b9a\u5c5e\u6027\u6765\u76f4\u63a5\u83b7\u53d6\u5b50\u8282\u70b9\u5b9e\u4f8b\u3002ref\u6709\u4e09\u79cd\u5b9e\u73b0\u65b9\u6cd5:\n\n- **\u5b57\u7b26\u4e32\u683c\u5f0f**\uff1a\u5b57\u7b26\u4e32\u683c\u5f0f\uff0c\u8fd9\u662fReact16\u7248\u672c\u4e4b\u524d\u7528\u5f97\u6700\u591a\u7684\uff0c\u4f8b\u5982\uff1a`<p ref=\"info\">span</p>`\n- **\u51fd\u6570\u683c\u5f0f**\uff1aref\u5bf9\u5e94\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u5bf9\u5e94\u7684\u8282\u70b9\u5b9e\u4f8b\uff0c\u4f8b\u5982\uff1a`<p ref={ele => this.info = ele}></p>`\n- **createRef\u65b9\u6cd5**\uff1aReact 16\u63d0\u4f9b\u7684\u4e00\u4e2aAPI\uff0c\u4f7f\u7528React.createRef()\u6765\u5b9e\u73b0 \u3000\u3000\u3000\u3000\u3000\u3000\u00a0\u00a0\n\n### 17. React\u4e2d\u53ef\u4ee5\u5728render\u8bbf\u95eerefs\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f\n\n```javascript\n<>\n  <span id=\"name\" ref={this.spanRef}>{this.state.title}</span>\n  <span>{\n     this.spanRef.current ? '\u6709\u503c' : '\u65e0\u503c'\n  }</span>\n</>\n```\n\n\u4e0d\u53ef\u4ee5\uff0crender \u9636\u6bb5 DOM \u8fd8\u6ca1\u6709\u751f\u6210\uff0c\u65e0\u6cd5\u83b7\u53d6 DOM\u3002DOM \u7684\u83b7\u53d6\u9700\u8981\u5728 pre-commit \u9636\u6bb5\u548c commit \u9636\u6bb5\uff1a\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/98a52a67abd14d8cb2ba1fc00c0662a2~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 18. \u5bf9React\u7684\u63d2\u69fd(Portals)\u7684\u7406\u89e3\uff0c\u5982\u4f55\u4f7f\u7528\uff0c\u6709\u54ea\u4e9b\u4f7f\u7528\u573a\u666f\n\nReact \u5b98\u65b9\u5bf9 Portals \u7684\u5b9a\u4e49\uff1a\n\n> Portal \u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06\u5b50\u8282\u70b9\u6e32\u67d3\u5230\u5b58\u5728\u4e8e\u7236\u7ec4\u4ef6\u4ee5\u5916\u7684 DOM \u8282\u70b9\u7684\u4f18\u79c0\u7684\u65b9\u6848\n\nPortals \u662fReact 16\u63d0\u4f9b\u7684\u5b98\u65b9\u89e3\u51b3\u65b9\u6848\uff0c\u4f7f\u5f97\u7ec4\u4ef6\u53ef\u4ee5\u8131\u79bb\u7236\u7ec4\u4ef6\u5c42\u7ea7\u6302\u8f7d\u5728DOM\u6811\u7684\u4efb\u4f55\u4f4d\u7f6e\u3002\u901a\u4fd7\u6765\u8bb2\uff0c\u5c31\u662f\u6211\u4eec render \u4e00\u4e2a\u7ec4\u4ef6\uff0c\u4f46\u8fd9\u4e2a\u7ec4\u4ef6\u7684 DOM \u7ed3\u6784\u5e76\u4e0d\u5728\u672c\u7ec4\u4ef6\u5185\u3002\n\n\nPortals\u8bed\u6cd5\u5982\u4e0b\uff1a\n\n```javascript\nReactDOM.createPortal(child, container);\n```\n\n- \u7b2c\u4e00\u4e2a\u53c2\u6570 child \u662f\u53ef\u6e32\u67d3\u7684 React \u5b50\u9879\uff0c\u6bd4\u5982\u5143\u7d20\uff0c\u5b57\u7b26\u4e32\u6216\u8005\u7247\u6bb5\u7b49;\n- \u7b2c\u4e8c\u4e2a\u53c2\u6570 container \u662f\u4e00\u4e2a DOM \u5143\u7d20\u3002\n\n\n\n\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u7ec4\u4ef6\u7684render\u51fd\u6570\u8fd4\u56de\u7684\u5143\u7d20\u4f1a\u88ab\u6302\u8f7d\u5728\u5b83\u7684\u7236\u7ea7\u7ec4\u4ef6\u4e0a\uff1a\n\n```javascript\nimport DemoComponent from './DemoComponent';\nrender() {\n  // DemoComponent\u5143\u7d20\u4f1a\u88ab\u6302\u8f7d\u5728id\u4e3aparent\u7684div\u7684\u5143\u7d20\u4e0a\n  return (\n    <div id=\"parent\">\n        <DemoComponent />\n    </div>\n  );\n}\n```\n\n\u7136\u800c\uff0c\u6709\u4e9b\u5143\u7d20\u9700\u8981\u88ab\u6302\u8f7d\u5728\u66f4\u9ad8\u5c42\u7ea7\u7684\u4f4d\u7f6e\u3002\u6700\u5178\u578b\u7684\u5e94\u7528\u573a\u666f\uff1a\u5f53\u7236\u7ec4\u4ef6\u5177\u6709`overflow: hidden`\u6216\u8005`z-index`\u7684\u6837\u5f0f\u8bbe\u7f6e\u65f6\uff0c\u7ec4\u4ef6\u6709\u53ef\u80fd\u88ab\u5176\u4ed6\u5143\u7d20\u906e\u6321\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u8003\u8651\u8981\u4e0d\u8981\u4f7f\u7528Portal\u4f7f\u7ec4\u4ef6\u7684\u6302\u8f7d\u8131\u79bb\u7236\u7ec4\u4ef6\u3002\u4f8b\u5982\uff1a\u5bf9\u8bdd\u6846\uff0c\u6a21\u6001\u7a97\u3002\n\n```javascript\nimport DemoComponent from './DemoComponent';\nrender() {\n  // DemoComponent\u5143\u7d20\u4f1a\u88ab\u6302\u8f7d\u5728id\u4e3aparent\u7684div\u7684\u5143\u7d20\u4e0a\n  return (\n    <div id=\"parent\">\n        <DemoComponent />\n    </div>\n  );\n}\n```\n\n### 19. \u5728React\u4e2d\u5982\u4f55\u907f\u514d\u4e0d\u5fc5\u8981\u7684render\uff1f\n\nReact \u57fa\u4e8e\u865a\u62df DOM \u548c\u9ad8\u6548 Diff \u7b97\u6cd5\u7684\u5b8c\u7f8e\u914d\u5408\uff0c\u5b9e\u73b0\u4e86\u5bf9 DOM \u6700\u5c0f\u7c92\u5ea6\u7684\u66f4\u65b0\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cReact \u5bf9 DOM \u7684\u6e32\u67d3\u6548\u7387\u8db3\u4ee5\u4e1a\u52a1\u65e5\u5e38\u3002\u4f46\u5728\u4e2a\u522b\u590d\u6742\u4e1a\u52a1\u573a\u666f\u4e0b\uff0c\u6027\u80fd\u95ee\u9898\u4f9d\u7136\u4f1a\u56f0\u6270\u6211\u4eec\u3002\u6b64\u65f6\u9700\u8981\u91c7\u53d6\u4e00\u4e9b\u63aa\u65bd\u6765\u63d0\u5347\u8fd0\u884c\u6027\u80fd\uff0c\u5176\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u65b9\u5411\uff0c\u5c31\u662f\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\uff08Render\uff09\u3002\u8fd9\u91cc\u63d0\u4e0b\u4f18\u5316\u7684\u70b9\uff1a\n\n- **shouldComponentUpdate \u548c PureComponent**\n\n\u5728 React \u7c7b\u7ec4\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u5229\u7528 shouldComponentUpdate\u6216\u8005 PureComponent \u6765\u51cf\u5c11\u56e0\u7236\u7ec4\u4ef6\u66f4\u65b0\u800c\u89e6\u53d1\u5b50\u7ec4\u4ef6\u7684 render\uff0c\u4ece\u800c\u8fbe\u5230\u76ee\u7684\u3002shouldComponentUpdate \u6765\u51b3\u5b9a\u662f\u5426\u7ec4\u4ef6\u662f\u5426\u91cd\u65b0\u6e32\u67d3\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u8fd4\u56de false \u5373\u53ef\u3002\n\n- **\u5229\u7528\u9ad8\u9636\u7ec4\u4ef6**\n\n\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u5e76\u6ca1\u6709 shouldComponentUpdate \u8fd9\u4e2a\u751f\u547d\u5468\u671f\uff0c\u53ef\u4ee5\u5229\u7528\u9ad8\u9636\u7ec4\u4ef6\uff0c\u5c01\u88c5\u4e00\u4e2a\u7c7b\u4f3c PureComponet \u7684\u529f\u80fd\n\n- **\u4f7f\u7528 React.memo**\n\nReact.memo \u662f React 16.6 \u65b0\u7684\u4e00\u4e2a API\uff0c\u7528\u6765\u7f13\u5b58\u7ec4\u4ef6\u7684\u6e32\u67d3\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u66f4\u65b0\uff0c\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\uff0c\u4e0e PureComponent \u5341\u5206\u7c7b\u4f3c\uff0c\u4f46\u4e0d\u540c\u7684\u662f\uff0c React.memo\u53ea\u80fd\u7528\u4e8e\u51fd\u6570\u7ec4\u4ef6\u3002\n\n### 20. \u5bf9 React-Intl \u7684\u7406\u89e3\uff0c\u5b83\u7684\u5de5\u4f5c\u539f\u7406\uff1f\n\nReact-intl\u662f\u96c5\u864e\u7684\u8bed\u8a00\u56fd\u9645\u5316\u5f00\u6e90\u9879\u76eeFormatJS\u7684\u4e00\u90e8\u5206\uff0c\u901a\u8fc7\u5176\u63d0\u4f9b\u7684\u7ec4\u4ef6\u548cAPI\u53ef\u4ee5\u4e0eReactJS\u7ed1\u5b9a\u3002\n\n\nReact-intl\u63d0\u4f9b\u4e86\u4e24\u79cd\u4f7f\u7528\u65b9\u6cd5\uff0c\u4e00\u79cd\u662f\u5f15\u7528React\u7ec4\u4ef6\uff0c\u53e6\u4e00\u79cd\u662f\u76f4\u63a5\u8c03\u53d6API\uff0c\u5b98\u65b9\u66f4\u52a0\u63a8\u8350\u5728React\u9879\u76ee\u4e2d\u4f7f\u7528\u524d\u8005\uff0c\u53ea\u6709\u5728\u65e0\u6cd5\u4f7f\u7528React\u7ec4\u4ef6\u7684\u5730\u65b9\uff0c\u624d\u5e94\u8be5\u8c03\u7528\u6846\u67b6\u63d0\u4f9b\u7684API\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684React\u7ec4\u4ef6\uff0c\u5305\u62ec\u6570\u5b57\u683c\u5f0f\u5316\u3001\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u3001\u65e5\u671f\u683c\u5f0f\u5316\u7b49\u3002\n\n\n\u5728React-intl\u4e2d\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e0d\u540c\u7684\u8bed\u8a00\u5305\uff0c\u4ed6\u7684\u5de5\u4f5c\u539f\u7406\u5c31\u662f\u6839\u636e\u9700\u8981\uff0c\u5728\u8bed\u8a00\u5305\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002\n\n### 21. \u5bf9 React context \u7684\u7406\u89e3\n\n\u5728React\u4e2d\uff0c\u6570\u636e\u4f20\u9012\u4e00\u822c\u4f7f\u7528props\u4f20\u9012\u6570\u636e\uff0c\u7ef4\u6301\u5355\u5411\u6570\u636e\u6d41\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u7ec4\u4ef6\u4e4b\u95f4\u7684\u5173\u7cfb\u53d8\u5f97\u7b80\u5355\u4e14\u53ef\u9884\u6d4b\uff0c\u4f46\u662f\u5355\u9879\u6570\u636e\u6d41\u5728\u67d0\u4e9b\u573a\u666f\u4e2d\u5e76\u4e0d\u9002\u7528\u3002\u5355\u7eaf\u4e00\u5bf9\u7684\u7236\u5b50\u7ec4\u4ef6\u4f20\u9012\u5e76\u65e0\u95ee\u9898\uff0c\u4f46\u8981\u662f\u7ec4\u4ef6\u4e4b\u95f4\u5c42\u5c42\u4f9d\u8d56\u6df1\u5165\uff0cprops\u5c31\u9700\u8981\u5c42\u5c42\u4f20\u9012\u663e\u7136\uff0c\u8fd9\u6837\u505a\u592a\u7e41\u7410\u4e86\u3002\n\n\nContext \u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6b64\u7c7b\u503c\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u5fc5\u663e\u5f0f\u5730\u901a\u8fc7\u7ec4\u4ef6\u6811\u7684\u9010\u5c42\u4f20\u9012 props\u3002\n\n\n\u53ef\u4ee5\u628acontext\u5f53\u505a\u662f\u7279\u5b9a\u4e00\u4e2a\u7ec4\u4ef6\u6811\u5185\u5171\u4eab\u7684store\uff0c\u7528\u6765\u505a\u6570\u636e\u4f20\u9012\u3002**\u7b80\u5355\u8bf4\u5c31\u662f\uff0c\u5f53\u4f60\u4e0d\u60f3\u5728\u7ec4\u4ef6\u6811\u4e2d\u901a\u8fc7\u9010\u5c42\u4f20\u9012props\u6216\u8005state\u7684\u65b9\u5f0f\u6765\u4f20\u9012\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528Context\u6765\u5b9e\u73b0\u8de8\u5c42\u7ea7\u7684\u7ec4\u4ef6\u6570\u636e\u4f20\u9012\u3002**\n\n\nJS\u7684\u4ee3\u7801\u5757\u5728\u6267\u884c\u671f\u95f4\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u76f8\u5e94\u7684\u4f5c\u7528\u57df\u94fe\uff0c\u8fd9\u4e2a\u4f5c\u7528\u57df\u94fe\u8bb0\u5f55\u7740\u8fd0\u884c\u65f6JS\u4ee3\u7801\u5757\u6267\u884c\u671f\u95f4\u6240\u80fd\u8bbf\u95ee\u7684\u6d3b\u52a8\u5bf9\u8c61\uff0c\u5305\u62ec\u53d8\u91cf\u548c\u51fd\u6570\uff0cJS\u7a0b\u5e8f\u901a\u8fc7\u4f5c\u7528\u57df\u94fe\u8bbf\u95ee\u5230\u4ee3\u7801\u5757\u5185\u90e8\u6216\u8005\u5916\u90e8\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002\n\n\n\u5047\u5982\u4ee5JS\u7684\u4f5c\u7528\u57df\u94fe\u4f5c\u4e3a\u7c7b\u6bd4\uff0cReact\u7ec4\u4ef6\u63d0\u4f9b\u7684Context\u5bf9\u8c61\u5176\u5b9e\u5c31\u597d\u6bd4\u4e00\u4e2a\u63d0\u4f9b\u7ed9\u5b50\u7ec4\u4ef6\u8bbf\u95ee\u7684\u4f5c\u7528\u57df\uff0c\u800c Context\u5bf9\u8c61\u7684\u5c5e\u6027\u53ef\u4ee5\u770b\u6210\u4f5c\u7528\u57df\u4e0a\u7684\u6d3b\u52a8\u5bf9\u8c61\u3002\u7531\u4e8e\u7ec4\u4ef6 \u7684 Context \u7531\u5176\u7236\u8282\u70b9\u94fe\u4e0a\u6240\u6709\u7ec4\u4ef6\u901a \u8fc7 getChildContext\uff08\uff09\u8fd4\u56de\u7684Context\u5bf9\u8c61\u7ec4\u5408\u800c\u6210\uff0c\u6240\u4ee5\uff0c\u7ec4\u4ef6\u901a\u8fc7Context\u662f\u53ef\u4ee5\u8bbf\u95ee\u5230\u5176\u7236\u7ec4\u4ef6\u94fe\u4e0a\u6240\u6709\u8282\u70b9\u7ec4\u4ef6\u63d0\u4f9b\u7684Context\u7684\u5c5e\u6027\u3002\n\n### 22. \u4e3a\u4ec0\u4e48React\u5e76\u4e0d\u63a8\u8350\u4f18\u5148\u8003\u8651\u4f7f\u7528Context\uff1f\n\n- Context\u76ee\u524d\u8fd8\u5904\u4e8e\u5b9e\u9a8c\u9636\u6bb5\uff0c\u53ef\u80fd\u4f1a\u5728\u540e\u9762\u7684\u53d1\u884c\u7248\u672c\u4e2d\u6709\u5f88\u5927\u7684\u53d8\u5316\uff0c\u4e8b\u5b9e\u4e0a\u8fd9\u79cd\u60c5\u51b5\u5df2\u7ecf\u53d1\u751f\u4e86\uff0c\u6240\u4ee5\u4e3a\u4e86\u907f\u514d\u7ed9\u4eca\u540e\u5347\u7ea7\u5e26\u6765\u5927\u7684\u5f71\u54cd\u548c\u9ebb\u70e6\uff0c\u4e0d\u5efa\u8bae\u5728app\u4e2d\u4f7f\u7528context\u3002\n- \u5c3d\u7ba1\u4e0d\u5efa\u8bae\u5728app\u4e2d\u4f7f\u7528context\uff0c\u4f46\u662f\u72ec\u6709\u7ec4\u4ef6\u800c\u8a00\uff0c\u7531\u4e8e\u5f71\u54cd\u8303\u56f4\u5c0f\u4e8eapp\uff0c\u5982\u679c\u53ef\u4ee5\u505a\u5230\u9ad8\u5185\u805a\uff0c\u4e0d\u7834\u574f\u7ec4\u4ef6\u6811\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528context\n- \u5bf9\u4e8e\u7ec4\u4ef6\u4e4b\u95f4\u7684\u6570\u636e\u901a\u4fe1\u6216\u8005\u72b6\u6001\u7ba1\u7406\uff0c\u6709\u6548\u4f7f\u7528props\u6216\u8005state\u89e3\u51b3\uff0c\u7136\u540e\u518d\u8003\u8651\u4f7f\u7528\u7b2c\u4e09\u65b9\u7684\u6210\u719f\u5e93\u8fdb\u884c\u89e3\u51b3\uff0c\u4ee5\u4e0a\u7684\u65b9\u6cd5\u90fd\u4e0d\u662f\u6700\u4f73\u7684\u65b9\u6848\u7684\u65f6\u5019\uff0c\u5728\u8003\u8651context\u3002\n- context\u7684\u66f4\u65b0\u9700\u8981\u901a\u8fc7setState()\u89e6\u53d1\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u662f\u5f88\u53ef\u9760\u7684\uff0cContext\u652f\u6301\u8de8\u7ec4\u4ef6\u7684\u8bbf\u95ee\uff0c\u4f46\u662f\u5982\u679c\u4e2d\u95f4\u7684\u5b50\u7ec4\u4ef6\u901a\u8fc7\u4e00\u4e9b\u65b9\u6cd5\u4e0d\u5f71\u54cd\u66f4\u65b0\uff0c\u6bd4\u5982 shouldComponentUpdate() \u8fd4\u56defalse \u90a3\u4e48\u4e0d\u80fd\u4fdd\u8bc1Context\u7684\u66f4\u65b0\u4e00\u5b9a\u53ef\u4ee5\u4f7f\u7528Context\u7684\u5b50\u7ec4\u4ef6\uff0c\u56e0\u6b64\uff0cContext\u7684\u53ef\u9760\u6027\u9700\u8981\u5173\u6ce8\n\n### 23. React\u4e2d\u4ec0\u4e48\u662f\u53d7\u63a7\u7ec4\u4ef6\u548c\u975e\u63a7\u7ec4\u4ef6\uff1f\n\n**\uff081\uff09\u53d7\u63a7\u7ec4\u4ef6**\n\u5728\u4f7f\u7528\u8868\u5355\u6765\u6536\u96c6\u7528\u6237\u8f93\u5165\u65f6\uff0c\u4f8b\u5982`<input><select><textearea>`\u7b49\u5143\u7d20\u90fd\u8981\u7ed1\u5b9a\u4e00\u4e2achange\u4e8b\u4ef6\uff0c\u5f53\u8868\u5355\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u5c31\u4f1a\u89e6\u53d1onChange\u4e8b\u4ef6\uff0c\u66f4\u65b0\u7ec4\u4ef6\u7684state\u3002\u8fd9\u79cd\u7ec4\u4ef6\u5728React\u4e2d\u88ab\u79f0\u4e3a**\u53d7\u63a7\u7ec4\u4ef6**\uff0c\u5728\u53d7\u63a7\u7ec4\u4ef6\u4e2d\uff0c\u7ec4\u4ef6\u6e32\u67d3\u51fa\u7684\u72b6\u6001\u4e0e\u5b83\u7684value\u6216checked\u5c5e\u6027\u76f8\u5bf9\u5e94\uff0creact\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6d88\u9664\u4e86\u7ec4\u4ef6\u7684\u5c40\u90e8\u72b6\u6001\uff0c\u4f7f\u6574\u4e2a\u72b6\u6001\u53ef\u63a7\u3002react\u5b98\u65b9\u63a8\u8350\u4f7f\u7528\u53d7\u63a7\u8868\u5355\u7ec4\u4ef6\u3002\n\n\n\u53d7\u63a7\u7ec4\u4ef6\u66f4\u65b0state\u7684\u6d41\u7a0b\uff1a\n\n- \u53ef\u4ee5\u901a\u8fc7\u521d\u59cbstate\u4e2d\u8bbe\u7f6e\u8868\u5355\u7684\u9ed8\u8ba4\u503c\n- \u6bcf\u5f53\u8868\u5355\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8c03\u7528onChange\u4e8b\u4ef6\u5904\u7406\u5668\n- \u4e8b\u4ef6\u5904\u7406\u5668\u901a\u8fc7\u4e8b\u4ef6\u5bf9\u8c61e\u62ff\u5230\u6539\u53d8\u540e\u7684\u72b6\u6001\uff0c\u5e76\u66f4\u65b0\u7ec4\u4ef6\u7684state\n- \u4e00\u65e6\u901a\u8fc7setState\u65b9\u6cd5\u66f4\u65b0state\uff0c\u5c31\u4f1a\u89e6\u53d1\u89c6\u56fe\u7684\u91cd\u65b0\u6e32\u67d3\uff0c\u5b8c\u6210\u8868\u5355\u7ec4\u4ef6\u7684\u66f4\u65b0\n\n\n\n**\u53d7\u63a7\u7ec4\u4ef6\u7f3a\u9677\uff1a**\n\u8868\u5355\u5143\u7d20\u7684\u503c\u90fd\u662f\u7531React\u7ec4\u4ef6\u8fdb\u884c\u7ba1\u7406\uff0c\u5f53\u6709\u591a\u4e2a\u8f93\u5165\u6846\uff0c\u6216\u8005\u591a\u4e2a\u8fd9\u79cd\u7ec4\u4ef6\u65f6\uff0c\u5982\u679c\u60f3\u540c\u65f6\u83b7\u53d6\u5230\u5168\u90e8\u7684\u503c\u5c31\u5fc5\u987b\u6bcf\u4e2a\u90fd\u8981\u7f16\u5199\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u8fd9\u4f1a\u8ba9\u4ee3\u7801\u770b\u7740\u5f88\u81c3\u80bf\uff0c\u6240\u4ee5\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u60c5\u51b5\uff0c\u51fa\u73b0\u4e86\u975e\u53d7\u63a7\u7ec4\u4ef6\u3002\n\n\n**\uff082\uff09\u975e\u53d7\u63a7\u7ec4\u4ef6**\n\u5982\u679c\u4e00\u4e2a\u8868\u5355\u7ec4\u4ef6\u6ca1\u6709value props\uff08\u5355\u9009\u548c\u590d\u9009\u6309\u94ae\u5bf9\u5e94\u7684\u662fchecked props\uff09\u65f6\uff0c\u5c31\u53ef\u4ee5\u79f0\u4e3a\u975e\u53d7\u63a7\u7ec4\u4ef6\u3002\u5728\u975e\u53d7\u63a7\u7ec4\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2aref\u6765\u4eceDOM\u83b7\u5f97\u8868\u5355\u503c\u3002\u800c\u4e0d\u662f\u4e3a\u6bcf\u4e2a\u72b6\u6001\u66f4\u65b0\u7f16\u5199\u4e00\u4e2a\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u3002\n\n\nReact\u5b98\u65b9\u7684\u89e3\u91ca\uff1a\n\n> \u8981\u7f16\u5199\u4e00\u4e2a\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u4e3a\u6bcf\u4e2a\u72b6\u6001\u66f4\u65b0\u90fd\u7f16\u5199\u6570\u636e\u5904\u7406\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ref\u6765\u4ece DOM \u8282\u70b9\u4e2d\u83b7\u53d6\u8868\u5355\u6570\u636e\u3002\n> \u56e0\u4e3a\u975e\u53d7\u63a7\u7ec4\u4ef6\u5c06\u771f\u5b9e\u6570\u636e\u50a8\u5b58\u5728 DOM \u8282\u70b9\u4e2d\uff0c\u6240\u4ee5\u5728\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\u65f6\uff0c\u6709\u65f6\u5019\u53cd\u800c\u66f4\u5bb9\u6613\u540c\u65f6\u96c6\u6210 React \u548c\u975e React \u4ee3\u7801\u3002\u5982\u679c\u4f60\u4e0d\u4ecb\u610f\u4ee3\u7801\u7f8e\u89c2\u6027\uff0c\u5e76\u4e14\u5e0c\u671b\u5feb\u901f\u7f16\u5199\u4ee3\u7801\uff0c\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\u5f80\u5f80\u53ef\u4ee5\u51cf\u5c11\u4f60\u7684\u4ee3\u7801\u91cf\u3002\u5426\u5219\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528\u53d7\u63a7\u7ec4\u4ef6\u3002\n\n\n\n\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u5728\u975e\u53d7\u63a7\u7ec4\u4ef6\u4e2d\u63a5\u6536\u5355\u4e2a\u5c5e\u6027\uff1a\n\n```javascript\nclass NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleSubmit(event) {\n    alert('A name was submitted: ' + this.input.value);\n    event.preventDefault();\n  }\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Name:\n          <input type=\"text\" ref={(input) => this.input = input} />\n        </label>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    );\n  }\n}\n```\n\n**\u603b\u7ed3\uff1a** \u9875\u9762\u4e2d\u6240\u6709\u8f93\u5165\u7c7b\u7684DOM\u5982\u679c\u662f\u73b0\u7528\u73b0\u53d6\u7684\u79f0\u4e3a\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u800c\u901a\u8fc7setState\u5c06\u8f93\u5165\u7684\u503c\u7ef4\u62a4\u5230\u4e86state\u4e2d\uff0c\u9700\u8981\u65f6\u518d\u4ecestate\u4e2d\u53d6\u51fa\uff0c\u8fd9\u91cc\u7684\u6570\u636e\u5c31\u53d7\u5230\u4e86state\u7684\u63a7\u5236\uff0c\u79f0\u4e3a\u53d7\u63a7\u7ec4\u4ef6\u3002\n\n### 24. React\u4e2drefs\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\u6709\u54ea\u4e9b\u5e94\u7528\u573a\u666f\uff1f\n\nRefs \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u7528\u4e8e\u8bbf\u95ee\u5728 render \u65b9\u6cd5\u4e2d\u521b\u5efa\u7684 React \u5143\u7d20\u6216 DOM \u8282\u70b9\u3002Refs \u5e94\u8be5\u8c28\u614e\u4f7f\u7528\uff0c\u5982\u4e0b\u573a\u666f\u4f7f\u7528 Refs \u6bd4\u8f83\u9002\u5408\uff1a\n\n- \u5904\u7406\u7126\u70b9\u3001\u6587\u672c\u9009\u62e9\u6216\u8005\u5a92\u4f53\u7684\u63a7\u5236\n- \u89e6\u53d1\u5fc5\u8981\u7684\u52a8\u753b\n- \u96c6\u6210\u7b2c\u4e09\u65b9 DOM \u5e93\n\n\n\nRefs \u662f\u4f7f\u7528 `React.createRef()` \u65b9\u6cd5\u521b\u5efa\u7684\uff0c\u4ed6\u901a\u8fc7 `ref` \u5c5e\u6027\u9644\u52a0\u5230 React \u5143\u7d20\u4e0a\u3002\u8981\u5728\u6574\u4e2a\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Refs\uff0c\u9700\u8981\u5c06 `ref` \u5728\u6784\u9020\u51fd\u6570\u4e2d\u5206\u914d\u7ed9\u5176\u5b9e\u4f8b\u5c5e\u6027\uff1a\n\n```javascript\nclass MyComponent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef()\n  }\n  render() {\n    return <div ref={this.myRef} />\n  }\n}\n```\n\n\u7531\u4e8e\u51fd\u6570\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\uff0c\u56e0\u6b64\u4e0d\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u76f4\u63a5\u4f7f\u7528 `ref`\uff1a\n\n```javascript\nfunction MyFunctionalComponent() {\n  return <input />;\n}\nclass Parent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.textInput = React.createRef();\n  }\n  render() {\n    // \u8fd9\u5c06\u4e0d\u4f1a\u5de5\u4f5c\uff01\n    return (\n      <MyFunctionalComponent ref={this.textInput} />\n    );\n  }\n}\n```\n\n\u4f46\u53ef\u4ee5\u901a\u8fc7\u95ed\u5408\u7684\u5e2e\u52a9\u5728\u51fd\u6570\u7ec4\u4ef6\u5185\u90e8\u8fdb\u884c\u4f7f\u7528 Refs\uff1a\n\n```javascript\nfunction CustomTextInput(props) {\n  // \u8fd9\u91cc\u5fc5\u987b\u58f0\u660e textInput\uff0c\u8fd9\u6837 ref \u56de\u8c03\u624d\u53ef\u4ee5\u5f15\u7528\u5b83\n  let textInput = null;\n  function handleClick() {\n    textInput.focus();\n  }\n  return (\n    <div>\n      <input\n        type=\"text\"\n        ref={(input) => { textInput = input; }} />\n      <input\n        type=\"button\"\n        value=\"Focus the text input\"\n        onClick={handleClick}\n      />\n    </div>\n  );  \n}\n```\n\n**\u6ce8\u610f\uff1a**\n\n- \u4e0d\u5e94\u8be5\u8fc7\u5ea6\u7684\u4f7f\u7528 Refs\n- `ref` \u7684\u8fd4\u56de\u503c\u53d6\u51b3\u4e8e\u8282\u70b9\u7684\u7c7b\u578b\uff1a    \n  - \u5f53 `ref` \u5c5e\u6027\u88ab\u7528\u4e8e\u4e00\u4e2a\u666e\u901a\u7684 HTML \u5143\u7d20\u65f6\uff0c`React.createRef()` \u5c06\u63a5\u6536\u5e95\u5c42 DOM \u5143\u7d20\u4f5c\u4e3a\u4ed6\u7684 `current` \u5c5e\u6027\u4ee5\u521b\u5efa `ref`\u3002\n  - \u5f53 `ref` \u5c5e\u6027\u88ab\u7528\u4e8e\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u7c7b\u7ec4\u4ef6\u65f6\uff0c`ref` \u5bf9\u8c61\u5c06\u63a5\u6536\u8be5\u7ec4\u4ef6\u5df2\u6302\u8f7d\u7684\u5b9e\u4f8b\u4f5c\u4e3a\u4ed6\u7684 `current`\u3002\n- \u5f53\u5728\u7236\u7ec4\u4ef6\u4e2d\u9700\u8981\u8bbf\u95ee\u5b50\u7ec4\u4ef6\u4e2d\u7684 `ref` \u65f6\u53ef\u4f7f\u7528\u4f20\u9012 Refs \u6216\u56de\u8c03 Refs\u3002\n### 26. React\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f\u5b83\u662f\u5fc5\u987b\u7684\u5417\uff1f\n\n\u6784\u9020\u51fd\u6570\u4e3b\u8981\u7528\u4e8e\u4e24\u4e2a\u76ee\u7684\uff1a\n\n- \u901a\u8fc7\u5c06\u5bf9\u8c61\u5206\u914d\u7ed9this.state\u6765\u521d\u59cb\u5316\u672c\u5730\u72b6\u6001 \n- \u5c06\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u65b9\u6cd5\u7ed1\u5b9a\u5230\u5b9e\u4f8b\u4e0a\n\n\n\n\u6240\u4ee5\uff0c\u5f53\u5728React class\u4e2d\u9700\u8981\u8bbe\u7f6estate\u7684\u521d\u59cb\u503c\u6216\u8005\u7ed1\u5b9a\u4e8b\u4ef6\u65f6\uff0c\u9700\u8981\u52a0\u4e0a\u6784\u9020\u51fd\u6570\uff0c\u5b98\u65b9Demo\uff1a\n\n```javascript\nclass LikeButton extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      liked: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick() {\n    this.setState({liked: !this.state.liked});\n  }\n  render() {\n    const text = this.state.liked ? 'liked' : 'haven\\'t liked';\n    return (\n      <div onClick={this.handleClick}>\n        You {text} this. Click to toggle.\n      </div>\n    );\n  }\n}\nReactDOM.render(\n  <LikeButton />,\n  document.getElementById('example')\n);\n```\n\n\u6784\u9020\u51fd\u6570\u7528\u6765\u65b0\u5efa\u7236\u7c7b\u7684this\u5bf9\u8c61\uff1b\u5b50\u7c7b\u5fc5\u987b\u5728constructor\u65b9\u6cd5\u4e2d\u8c03\u7528super\u65b9\u6cd5\uff1b\u5426\u5219\u65b0\u5efa\u5b9e\u4f8b\u65f6\u4f1a\u62a5\u9519\uff1b\u56e0\u4e3a\u5b50\u7c7b\u6ca1\u6709\u81ea\u5df1\u7684this\u5bf9\u8c61\uff0c\u800c\u662f\u7ee7\u627f\u7236\u7c7b\u7684this\u5bf9\u8c61\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u52a0\u5de5\u3002\u5982\u679c\u4e0d\u8c03\u7528super\u65b9\u6cd5\uff1b\u5b50\u7c7b\u5c31\u5f97\u4e0d\u5230this\u5bf9\u8c61\u3002\n\n\n**\u6ce8\u610f\uff1a**\n\n- constructor () \u5fc5\u987b\u914d\u4e0a super(), \u5982\u679c\u8981\u5728constructor \u5185\u90e8\u4f7f\u7528 this.props \u5c31\u8981 \u4f20\u5165props , \u5426\u5219\u4e0d\u7528\n- JavaScript\u4e2d\u7684 bind \u6bcf\u6b21\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570, \u4e3a\u4e86\u6027\u80fd\u7b49\u8003\u8651, \u5c3d\u91cf\u5728constructor\u4e2d\u7ed1\u5b9a\u4e8b\u4ef6\n\n### 27. React.forwardRef\u662f\u4ec0\u4e48\uff1f\u5b83\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f\n\nReact.forwardRef \u4f1a\u521b\u5efa\u4e00\u4e2aReact\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u80fd\u591f\u5c06\u5176\u63a5\u53d7\u7684 ref \u5c5e\u6027\u8f6c\u53d1\u5230\u5176\u7ec4\u4ef6\u6811\u4e0b\u7684\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u3002\u8fd9\u79cd\u6280\u672f\u5e76\u4e0d\u5e38\u89c1\uff0c\u4f46\u5728\u4ee5\u4e0b\u4e24\u79cd\u573a\u666f\u4e2d\u7279\u522b\u6709\u7528\uff1a\n\n- \u8f6c\u53d1 refs \u5230 DOM \u7ec4\u4ef6\n- \u5728\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u8f6c\u53d1 refs\n\n### 28. \u7c7b\u7ec4\u4ef6\u4e0e\u51fd\u6570\u7ec4\u4ef6\u6709\u4ec0\u4e48\u5f02\u540c\uff1f\n\n**\u76f8\u540c\u70b9\uff1a**\n\u7ec4\u4ef6\u662f React \u53ef\u590d\u7528\u7684\u6700\u5c0f\u4ee3\u7801\u7247\u6bb5\uff0c\u5b83\u4eec\u4f1a\u8fd4\u56de\u8981\u5728\u9875\u9762\u4e2d\u6e32\u67d3\u7684 React \u5143\u7d20\u3002\u4e5f\u6b63\u56e0\u4e3a\u7ec4\u4ef6\u662f React \u7684\u6700\u5c0f\u7f16\u7801\u5355\u4f4d\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u51fd\u6570\u7ec4\u4ef6\u8fd8\u662f\u7c7b\u7ec4\u4ef6\uff0c\u5728\u4f7f\u7528\u65b9\u5f0f\u548c\u6700\u7ec8\u5448\u73b0\u6548\u679c\u4e0a\u90fd\u662f\u5b8c\u5168\u4e00\u81f4\u7684\u3002\n\n\n\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u5c06\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\u6539\u5199\u6210\u51fd\u6570\u7ec4\u4ef6\uff0c\u6216\u8005\u628a\u51fd\u6570\u7ec4\u4ef6\u6539\u5199\u6210\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\uff08\u867d\u7136\u5e76\u4e0d\u63a8\u8350\u8fd9\u79cd\u91cd\u6784\u884c\u4e3a\uff09\u3002\u4ece\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u800c\u8a00\uff0c\u5f88\u96be\u4ece\u4f7f\u7528\u4f53\u9a8c\u4e0a\u533a\u5206\u4e24\u8005\uff0c\u800c\u4e14\u5728\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d\uff0c\u95ed\u5305\u548c\u7c7b\u7684\u6027\u80fd\u53ea\u5728\u6781\u7aef\u573a\u666f\u4e0b\u624d\u4f1a\u6709\u660e\u663e\u7684\u5dee\u522b\u3002\u6240\u4ee5\uff0c\u57fa\u672c\u53ef\u8ba4\u4e3a\u4e24\u8005\u4f5c\u4e3a\u7ec4\u4ef6\u662f\u5b8c\u5168\u4e00\u81f4\u7684\u3002\n\n\n**\u4e0d\u540c\u70b9\uff1a**\n\n- \u5b83\u4eec\u5728\u5f00\u53d1\u65f6\u7684\u5fc3\u667a\u6a21\u578b\u4e0a\u5374\u5b58\u5728\u5de8\u5927\u7684\u5dee\u5f02\u3002\u7c7b\u7ec4\u4ef6\u662f\u57fa\u4e8e\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\uff0c\u5b83\u4e3b\u6253\u7684\u662f\u7ee7\u627f\u3001\u751f\u547d\u5468\u671f\u7b49\u6838\u5fc3\u6982\u5ff5\uff1b\u800c\u51fd\u6570\u7ec4\u4ef6\u5185\u6838\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\uff0c\u4e3b\u6253\u7684\u662f immutable\u3001\u6ca1\u6709\u526f\u4f5c\u7528\u3001\u5f15\u7528\u900f\u660e\u7b49\u7279\u70b9\u3002\n- \u4e4b\u524d\uff0c\u5728\u4f7f\u7528\u573a\u666f\u4e0a\uff0c\u5982\u679c\u5b58\u5728\u9700\u8981\u4f7f\u7528\u751f\u547d\u5468\u671f\u7684\u7ec4\u4ef6\uff0c\u90a3\u4e48\u4e3b\u63a8\u7c7b\u7ec4\u4ef6\uff1b\u8bbe\u8ba1\u6a21\u5f0f\u4e0a\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u7ee7\u627f\uff0c\u90a3\u4e48\u4e3b\u63a8\u7c7b\u7ec4\u4ef6\u3002\u4f46\u73b0\u5728\u7531\u4e8e React Hooks \u7684\u63a8\u51fa\uff0c\u751f\u547d\u5468\u671f\u6982\u5ff5\u7684\u6de1\u51fa\uff0c\u51fd\u6570\u7ec4\u4ef6\u53ef\u4ee5\u5b8c\u5168\u53d6\u4ee3\u7c7b\u7ec4\u4ef6\u3002\u5176\u6b21\u7ee7\u627f\u5e76\u4e0d\u662f\u7ec4\u4ef6\u6700\u4f73\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5b98\u65b9\u66f4\u63a8\u5d07\u201c\u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f\u201d\u7684\u8bbe\u8ba1\u6982\u5ff5\uff0c\u6240\u4ee5\u7c7b\u7ec4\u4ef6\u5728\u8fd9\u65b9\u9762\u7684\u4f18\u52bf\u4e5f\u5728\u6de1\u51fa\u3002\n- \u6027\u80fd\u4f18\u5316\u4e0a\uff0c\u7c7b\u7ec4\u4ef6\u4e3b\u8981\u4f9d\u9760 shouldComponentUpdate\u00a0\u963b\u65ad\u6e32\u67d3\u6765\u63d0\u5347\u6027\u80fd\uff0c\u800c\u51fd\u6570\u7ec4\u4ef6\u4f9d\u9760 React.memo \u7f13\u5b58\u6e32\u67d3\u7ed3\u679c\u6765\u63d0\u5347\u6027\u80fd\u3002\n- \u4ece\u4e0a\u624b\u7a0b\u5ea6\u800c\u8a00\uff0c\u7c7b\u7ec4\u4ef6\u66f4\u5bb9\u6613\u4e0a\u624b\uff0c\u4ece\u672a\u6765\u8d8b\u52bf\u4e0a\u770b\uff0c\u7531\u4e8eReact Hooks \u7684\u63a8\u51fa\uff0c\u51fd\u6570\u7ec4\u4ef6\u6210\u4e86\u793e\u533a\u672a\u6765\u4e3b\u63a8\u7684\u65b9\u6848\u3002\n- \u7c7b\u7ec4\u4ef6\u5728\u672a\u6765\u65f6\u95f4\u5207\u7247\u4e0e\u5e76\u53d1\u6a21\u5f0f\u4e2d\uff0c\u7531\u4e8e\u751f\u547d\u5468\u671f\u5e26\u6765\u7684\u590d\u6742\u5ea6\uff0c\u5e76\u4e0d\u6613\u4e8e\u4f18\u5316\u3002\u800c\u51fd\u6570\u7ec4\u4ef6\u672c\u8eab\u8f7b\u91cf\u7b80\u5355\uff0c\u4e14\u5728 Hooks \u7684\u57fa\u7840\u4e0a\u63d0\u4f9b\u4e86\u6bd4\u539f\u5148\u66f4\u7ec6\u7c92\u5ea6\u7684\u903b\u8f91\u7ec4\u7ec7\u4e0e\u590d\u7528\uff0c\u66f4\u80fd\u9002\u5e94 React \u7684\u672a\u6765\u53d1\u5c55\u3002\n\n## \u4e8c\u3001\u6570\u636e\u7ba1\u7406\n\n### 1. React setState \u8c03\u7528\u7684\u539f\u7406\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e15b888f3bd4a1db8b72259331a4747~tplv-k3u1fbpfcp-zoom-1.image)\n\u5177\u4f53\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff08\u6e90\u7801\u7ea7\u89e3\u6790\uff09\uff1a\n\n- \u9996\u5148\u8c03\u7528\u4e86`setState` \u5165\u53e3\u51fd\u6570\uff0c\u5165\u53e3\u51fd\u6570\u5728\u8fd9\u91cc\u5c31\u662f\u5145\u5f53\u4e00\u4e2a\u5206\u53d1\u5668\u7684\u89d2\u8272\uff0c\u6839\u636e\u5165\u53c2\u7684\u4e0d\u540c\uff0c\u5c06\u5176\u5206\u53d1\u5230\u4e0d\u540c\u7684\u529f\u80fd\u51fd\u6570\u4e2d\u53bb\uff1b\n\n```javascript\nReactComponent.prototype.setState = function (partialState, callback) {\n  this.updater.enqueueSetState(this, partialState);\n  if (callback) {\n    this.updater.enqueueCallback(this, callback, 'setState');\n  }\n};\n```\n\n- `enqueueSetState` \u65b9\u6cd5\u5c06\u65b0\u7684 `state` \u653e\u8fdb\u7ec4\u4ef6\u7684\u72b6\u6001\u961f\u5217\u91cc\uff0c\u5e76\u8c03\u7528 `enqueueUpdate` \u6765\u5904\u7406\u5c06\u8981\u66f4\u65b0\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff1b\n\n```javascript\nenqueueSetState: function (publicInstance, partialState) {\n  // \u6839\u636e this \u62ff\u5230\u5bf9\u5e94\u7684\u7ec4\u4ef6\u5b9e\u4f8b\n  var internalInstance = getInternalInstanceReadyForUpdate(publicInstance, 'setState');\n  // \u8fd9\u4e2a queue \u5bf9\u5e94\u7684\u5c31\u662f\u4e00\u4e2a\u7ec4\u4ef6\u5b9e\u4f8b\u7684 state \u6570\u7ec4\n  var queue = internalInstance._pendingStateQueue || (internalInstance._pendingStateQueue = []);\n  queue.push(partialState);\n  //  enqueueUpdate \u7528\u6765\u5904\u7406\u5f53\u524d\u7684\u7ec4\u4ef6\u5b9e\u4f8b\n  enqueueUpdate(internalInstance);\n}\n```\n\n-  \u5728 `enqueueUpdate` \u65b9\u6cd5\u4e2d\u5f15\u51fa\u4e86\u4e00\u4e2a\u5173\u952e\u7684\u5bf9\u8c61\u2014\u2014`batchingStrategy`\uff0c\u8be5\u5bf9\u8c61\u6240\u5177\u5907\u7684`isBatchingUpdates` \u5c5e\u6027\u76f4\u63a5\u51b3\u5b9a\u4e86\u5f53\u4e0b\u662f\u8981\u8d70\u66f4\u65b0\u6d41\u7a0b\uff0c\u8fd8\u662f\u5e94\u8be5\u6392\u961f\u7b49\u5f85\uff1b\u5982\u679c\u8f6e\u5230\u6267\u884c\uff0c\u5c31\u8c03\u7528 `batchedUpdates` \u65b9\u6cd5\u6765\u76f4\u63a5\u53d1\u8d77\u66f4\u65b0\u6d41\u7a0b\u3002\u7531\u6b64\u53ef\u4ee5\u63a8\u6d4b\uff0c`batchingStrategy` \u6216\u8bb8\u6b63\u662f React \u5185\u90e8\u4e13\u95e8\u7528\u4e8e\u7ba1\u63a7\u6279\u91cf\u66f4\u65b0\u7684\u5bf9\u8c61\u3002\n\n```javascript\nfunction enqueueUpdate(component) {\n  ensureInjected();\n  // \u6ce8\u610f\u8fd9\u4e00\u53e5\u662f\u95ee\u9898\u7684\u5173\u952e\uff0cisBatchingUpdates\u6807\u8bc6\u7740\u5f53\u524d\u662f\u5426\u5904\u4e8e\u6279\u91cf\u521b\u5efa/\u66f4\u65b0\u7ec4\u4ef6\u7684\u9636\u6bb5\n  if (!batchingStrategy.isBatchingUpdates) {\n    // \u82e5\u5f53\u524d\u6ca1\u6709\u5904\u4e8e\u6279\u91cf\u521b\u5efa/\u66f4\u65b0\u7ec4\u4ef6\u7684\u9636\u6bb5\uff0c\u5219\u7acb\u5373\u66f4\u65b0\u7ec4\u4ef6\n    batchingStrategy.batchedUpdates(enqueueUpdate, component);\n    return;\n  }\n  // \u5426\u5219\uff0c\u5148\u628a\u7ec4\u4ef6\u585e\u5165 dirtyComponents \u961f\u5217\u91cc\uff0c\u8ba9\u5b83\u201c\u518d\u7b49\u7b49\u201d\n  dirtyComponents.push(component);\n  if (component._updateBatchNumber == null) {\n    component._updateBatchNumber = updateBatchNumber + 1;\n  }\n}\n```\n\n**\u6ce8\u610f\uff1a**`batchingStrategy` \u5bf9\u8c61\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u9501\u7ba1\u7406\u5668\u201d\u3002\u8fd9\u91cc\u7684\u201c\u9501\u201d\uff0c\u662f\u6307 React \u5168\u5c40\u552f\u4e00\u7684 `isBatchingUpdates` \u53d8\u91cf\uff0c`isBatchingUpdates` \u7684\u521d\u59cb\u503c\u662f `false`\uff0c\u610f\u5473\u7740\u201c\u5f53\u524d\u5e76\u672a\u8fdb\u884c\u4efb\u4f55\u6279\u91cf\u66f4\u65b0\u64cd\u4f5c\u201d\u3002\u6bcf\u5f53 React \u8c03\u7528 `batchedUpdate` \u53bb\u6267\u884c\u66f4\u65b0\u52a8\u4f5c\u65f6\uff0c\u4f1a\u5148\u628a\u8fd9\u4e2a\u9501\u7ed9\u201c\u9501\u4e0a\u201d\uff08\u7f6e\u4e3a `true`\uff09\uff0c\u8868\u660e\u201c\u73b0\u5728\u6b63\u5904\u4e8e\u6279\u91cf\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u201d\u3002\u5f53\u9501\u88ab\u201c\u9501\u4e0a\u201d\u7684\u65f6\u5019\uff0c\u4efb\u4f55\u9700\u8981\u66f4\u65b0\u7684\u7ec4\u4ef6\u90fd\u53ea\u80fd\u6682\u65f6\u8fdb\u5165 `dirtyComponents` \u91cc\u6392\u961f\u7b49\u5019\u4e0b\u4e00\u6b21\u7684\u6279\u91cf\u66f4\u65b0\uff0c\u800c\u4e0d\u80fd\u968f\u610f\u201c\u63d2\u961f\u201d\u3002\u6b64\u5904\u4f53\u73b0\u7684\u201c\u4efb\u52a1\u9501\u201d\u7684\u601d\u60f3\uff0c\u662f React \u9762\u5bf9\u5927\u91cf\u72b6\u6001\u4ecd\u7136\u80fd\u591f\u5b9e\u73b0\u6709\u5e8f\u5206\u6279\u5904\u7406\u7684\u57fa\u77f3\u3002\n\n### 2. React setState \u8c03\u7528\u4e4b\u540e\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f\u662f\u540c\u6b65\u8fd8\u662f\u5f02\u6b65\uff1f\n\n**\uff081\uff09React\u4e2dsetState\u540e\u53d1\u751f\u4e86\u4ec0\u4e48**\n\n\u5728\u4ee3\u7801\u4e2d\u8c03\u7528setState\u51fd\u6570\u4e4b\u540e\uff0cReact \u4f1a\u5c06\u4f20\u5165\u7684\u53c2\u6570\u5bf9\u8c61\u4e0e\u7ec4\u4ef6\u5f53\u524d\u7684\u72b6\u6001\u5408\u5e76\uff0c\u7136\u540e\u89e6\u53d1\u8c03\u548c\u8fc7\u7a0b(Reconciliation)\u3002\u7ecf\u8fc7\u8c03\u548c\u8fc7\u7a0b\uff0cReact \u4f1a\u4ee5\u76f8\u5bf9\u9ad8\u6548\u7684\u65b9\u5f0f\u6839\u636e\u65b0\u7684\u72b6\u6001\u6784\u5efa React \u5143\u7d20\u6811\u5e76\u4e14\u7740\u624b\u91cd\u65b0\u6e32\u67d3\u6574\u4e2aUI\u754c\u9762\u3002\n\n\n\u5728 React \u5f97\u5230\u5143\u7d20\u6811\u4e4b\u540e\uff0cReact \u4f1a\u81ea\u52a8\u8ba1\u7b97\u51fa\u65b0\u7684\u6811\u4e0e\u8001\u6811\u7684\u8282\u70b9\u5dee\u5f02\uff0c\u7136\u540e\u6839\u636e\u5dee\u5f02\u5bf9\u754c\u9762\u8fdb\u884c\u6700\u5c0f\u5316\u91cd\u6e32\u67d3\u3002\u5728\u5dee\u5f02\u8ba1\u7b97\u7b97\u6cd5\u4e2d\uff0cReact \u80fd\u591f\u76f8\u5bf9\u7cbe\u786e\u5730\u77e5\u9053\u54ea\u4e9b\u4f4d\u7f6e\u53d1\u751f\u4e86\u6539\u53d8\u4ee5\u53ca\u5e94\u8be5\u5982\u4f55\u6539\u53d8\uff0c\u8fd9\u5c31\u4fdd\u8bc1\u4e86\u6309\u9700\u66f4\u65b0\uff0c\u800c\u4e0d\u662f\u5168\u90e8\u91cd\u65b0\u6e32\u67d3\u3002\n\n\n\u5982\u679c\u5728\u77ed\u65f6\u95f4\u5185\u9891\u7e41setState\u3002React\u4f1a\u5c06state\u7684\u6539\u53d8\u538b\u5165\u6808\u4e2d\uff0c\u5728\u5408\u9002\u7684\u65f6\u673a\uff0c\u6279\u91cf\u66f4\u65b0state\u548c\u89c6\u56fe\uff0c\u8fbe\u5230\u63d0\u9ad8\u6027\u80fd\u7684\u6548\u679c\u3002\n\n\n**\uff082\uff09setState \u662f\u540c\u6b65\u8fd8\u662f\u5f02\u6b65\u7684**\n\n\u5047\u5982\u6240\u6709setState\u662f\u540c\u6b65\u7684\uff0c\u610f\u5473\u7740\u6bcf\u6267\u884c\u4e00\u6b21setState\u65f6\uff08\u6709\u53ef\u80fd\u4e00\u4e2a\u540c\u6b65\u4ee3\u7801\u4e2d\uff0c\u591a\u6b21setState\uff09\uff0c\u90fd\u91cd\u65b0vnode diff + dom\u4fee\u6539\uff0c\u8fd9\u5bf9\u6027\u80fd\u6765\u8bf4\u662f\u6781\u4e3a\u4e0d\u597d\u7684\u3002\u5982\u679c\u662f\u5f02\u6b65\uff0c\u5219\u53ef\u4ee5\u628a\u4e00\u4e2a\u540c\u6b65\u4ee3\u7801\u4e2d\u7684\u591a\u4e2asetState\u5408\u5e76\u6210\u4e00\u6b21\u7ec4\u4ef6\u66f4\u65b0\u3002\u6240\u4ee5\u9ed8\u8ba4\u662f\u5f02\u6b65\u7684\uff0c\u4f46\u662f\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\u662f\u540c\u6b65\u7684\u3002\n\n\nsetState \u5e76\u4e0d\u662f\u5355\u7eaf\u540c\u6b65/\u5f02\u6b65\u7684\uff0c\u5b83\u7684\u8868\u73b0\u4f1a\u56e0\u8c03\u7528\u573a\u666f\u7684\u4e0d\u540c\u800c\u4e0d\u540c\u3002\u5728\u6e90\u7801\u4e2d\uff0c\u901a\u8fc7 isBatchingUpdates \u6765\u5224\u65adsetState \u662f\u5148\u5b58\u8fdb state \u961f\u5217\u8fd8\u662f\u76f4\u63a5\u66f4\u65b0\uff0c\u5982\u679c\u503c\u4e3a true \u5219\u6267\u884c\u5f02\u6b65\u64cd\u4f5c\uff0c\u4e3a false \u5219\u76f4\u63a5\u66f4\u65b0\u3002\n\n- **\u5f02\u6b65\uff1a** \u5728 React \u53ef\u4ee5\u63a7\u5236\u7684\u5730\u65b9\uff0c\u5c31\u4e3a true\uff0c\u6bd4\u5982\u5728 React \u751f\u547d\u5468\u671f\u4e8b\u4ef6\u548c\u5408\u6210\u4e8b\u4ef6\u4e2d\uff0c\u90fd\u4f1a\u8d70\u5408\u5e76\u64cd\u4f5c\uff0c\u5ef6\u8fdf\u66f4\u65b0\u7684\u7b56\u7565\u3002\n- **\u540c\u6b65\uff1a** \u5728 React \u65e0\u6cd5\u63a7\u5236\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u539f\u751f\u4e8b\u4ef6\uff0c\u5177\u4f53\u5c31\u662f\u5728 addEventListener\u00a0\u3001setTimeout\u3001setInterval \u7b49\u4e8b\u4ef6\u4e2d\uff0c\u5c31\u53ea\u80fd\u540c\u6b65\u66f4\u65b0\u3002\n\n\n\n\u4e00\u822c\u8ba4\u4e3a\uff0c\u505a\u5f02\u6b65\u8bbe\u8ba1\u662f\u4e3a\u4e86\u6027\u80fd\u4f18\u5316\u3001\u51cf\u5c11\u6e32\u67d3\u6b21\u6570\uff1a\n\n- `setState`\u8bbe\u8ba1\u4e3a\u5f02\u6b65\uff0c\u53ef\u4ee5\u663e\u8457\u7684\u63d0\u5347\u6027\u80fd\u3002\u5982\u679c\u6bcf\u6b21\u8c03\u7528 `setState`\u90fd\u8fdb\u884c\u4e00\u6b21\u66f4\u65b0\uff0c\u90a3\u4e48\u610f\u5473\u7740`render`\u51fd\u6570\u4f1a\u88ab\u9891\u7e41\u8c03\u7528\uff0c\u754c\u9762\u91cd\u65b0\u6e32\u67d3\uff0c\u8fd9\u6837\u6548\u7387\u662f\u5f88\u4f4e\u7684\uff1b\u6700\u597d\u7684\u529e\u6cd5\u5e94\u8be5\u662f\u83b7\u53d6\u5230\u591a\u4e2a\u66f4\u65b0\uff0c\u4e4b\u540e\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\uff1b \n- \u5982\u679c\u540c\u6b65\u66f4\u65b0\u4e86`state`\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u6267\u884c`render`\u51fd\u6570\uff0c\u90a3\u4e48`state`\u548c`props`\u4e0d\u80fd\u4fdd\u6301\u540c\u6b65\u3002`state`\u548c`props`\u4e0d\u80fd\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u4f1a\u5728\u5f00\u53d1\u4e2d\u4ea7\u751f\u5f88\u591a\u7684\u95ee\u9898\uff1b\n\n### 3. React\u4e2d\u7684setState\u6279\u91cf\u66f4\u65b0\u7684\u8fc7\u7a0b\u662f\u4ec0\u4e48\uff1f\n\n\u8c03\u7528 `setState` \u65f6\uff0c\u7ec4\u4ef6\u7684 `state` \u5e76\u4e0d\u4f1a\u7acb\u5373\u6539\u53d8\uff0c `setState` \u53ea\u662f\u628a\u8981\u4fee\u6539\u7684 `state` \u653e\u5165\u4e00\u4e2a\u961f\u5217\uff0c `React` \u4f1a\u4f18\u5316\u771f\u6b63\u7684\u6267\u884c\u65f6\u673a\uff0c\u5e76\u51fa\u4e8e\u6027\u80fd\u539f\u56e0\uff0c\u4f1a\u5c06 `React` \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4e2d\u7684\u591a\u6b21`React` \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4e2d\u7684\u591a\u6b21 `setState` \u7684\u72b6\u6001\u4fee\u6539\u5408\u5e76\u6210\u4e00\u6b21\u72b6\u6001\u4fee\u6539\u3002 \u6700\u7ec8\u66f4\u65b0\u53ea\u4ea7\u751f\u4e00\u6b21\u7ec4\u4ef6\u53ca\u5176\u5b50\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\uff0c\u8fd9\u5bf9\u4e8e\u5927\u578b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6027\u80fd\u63d0\u5347\u81f3\u5173\u91cd\u8981\u3002\n\n```javascript\nthis.setState({\n  count: this.state.count + 1    ===>    \u5165\u961f\uff0c[count+1\u7684\u4efb\u52a1]\n});\nthis.setState({\n  count: this.state.count + 1    ===>    \u5165\u961f\uff0c[count+1\u7684\u4efb\u52a1\uff0ccount+1\u7684\u4efb\u52a1]\n});\n                                          \u2193\n                                         \u5408\u5e76 state\uff0c[count+1\u7684\u4efb\u52a1]\n                                          \u2193\n                                         \u6267\u884c count+1\u7684\u4efb\u52a1\n```\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ea\u8981\u540c\u6b65\u4ee3\u7801\u8fd8\u5728\u6267\u884c\uff0c\u201c\u6512\u8d77\u6765\u201d\u8fd9\u4e2a\u52a8\u4f5c\u5c31\u4e0d\u4f1a\u505c\u6b62\u3002\uff08\u6ce8\uff1a\u8fd9\u91cc\u4e4b\u6240\u4ee5\u591a\u6b21 +1 \u6700\u7ec8\u53ea\u6709\u4e00\u6b21\u751f\u6548\uff0c\u662f\u56e0\u4e3a\u5728\u540c\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u591a\u6b21 setState \u7684\u5408\u5e76\u52a8\u4f5c\u4e0d\u662f\u5355\u7eaf\u5730\u5c06\u66f4\u65b0\u7d2f\u52a0\u3002\u6bd4\u5982\u8fd9\u91cc\u5bf9\u4e8e\u76f8\u540c\u5c5e\u6027\u7684\u8bbe\u7f6e\uff0cReact \u53ea\u4f1a\u4e3a\u5176\u4fdd\u7559\u6700\u540e\u4e00\u6b21\u7684\u66f4\u65b0\uff09\u3002\n\n### 4.  React\u4e2d\u6709\u4f7f\u7528\u8fc7getDefaultProps\u5417\uff1f\u5b83\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f\n\n\u901a\u8fc7\u5b9e\u73b0\u7ec4\u4ef6\u7684getDefaultProps\uff0c\u5bf9\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff08ES5\u7684\u5199\u6cd5\uff09\uff1a\n\n```javascript\nvar ShowTitle = React.createClass({\n  getDefaultProps:function(){\n    return{\n      title : \"React\"\n    }\n  },\n  render : function(){\n    return <h1>{this.props.title}</h1>\n  }\n});\n```\n\n### 5. React\u4e2dsetState\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\n\n`setState` \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u5c06\u5728\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u540e\u6267\u884c\u3002\u7b49\u4ef7\u4e8e\u5728 `componentDidUpdate` \u751f\u547d\u5468\u671f\u5185\u6267\u884c\u3002\u901a\u5e38\u5efa\u8bae\u4f7f\u7528 `componentDidUpdate` \u6765\u4ee3\u66ff\u6b64\u65b9\u5f0f\u3002\u5728\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u4e2d\u4f60\u53ef\u4ee5\u62ff\u5230\u66f4\u65b0\u540e `state` \u7684\u503c\uff1a\n\n```javascript\nthis.setState({\n    key1: newState1,\n    key2: newState2,\n    ...\n}, callback) // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f state \u66f4\u65b0\u5b8c\u6210\u540e\u7684\u56de\u8c03\u51fd\u6570\n```\n\n### 6. React\u4e2d\u7684setState\u548creplaceState\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f\n\n**\uff081\uff09setState()**\nsetState()\u7528\u4e8e\u8bbe\u7f6e\u72b6\u6001\u5bf9\u8c61\uff0c\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a\n\n```javascript\nsetState(object nextState[, function callback])\n```\n\n- nextState\uff0c\u5c06\u8981\u8bbe\u7f6e\u7684\u65b0\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4f1a\u548c\u5f53\u524d\u7684state\u5408\u5e76\n- callback\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u56de\u8c03\u51fd\u6570\u3002\u8be5\u51fd\u6570\u4f1a\u5728setState\u8bbe\u7f6e\u6210\u529f\uff0c\u4e14\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u540e\u8c03\u7528\u3002\n\n\n\n\u5408\u5e76nextState\u548c\u5f53\u524dstate\uff0c\u5e76\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u3002setState\u662fReact\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u548c\u8bf7\u6c42\u56de\u8c03\u51fd\u6570\u4e2d\u89e6\u53d1UI\u66f4\u65b0\u7684\u4e3b\u8981\u65b9\u6cd5\u3002\n\n\n**\uff082\uff09replaceState()**\nreplaceState()\u65b9\u6cd5\u4e0esetState()\u7c7b\u4f3c\uff0c\u4f46\u662f\u65b9\u6cd5\u53ea\u4f1a\u4fdd\u7559nextState\u4e2d\u72b6\u6001\uff0c\u539fstate\u4e0d\u5728nextState\u4e2d\u7684\u72b6\u6001\u90fd\u4f1a\u88ab\u5220\u9664\u3002\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a\n\n```javascript\nreplaceState(object nextState[, function callback])\n```\n\n- nextState\uff0c\u5c06\u8981\u8bbe\u7f6e\u7684\u65b0\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4f1a\u66ff\u6362\u5f53\u524d\u7684state\u3002\n- callback\uff0c\u53ef\u9009\u53c2\u6570\uff0c\u56de\u8c03\u51fd\u6570\u3002\u8be5\u51fd\u6570\u4f1a\u5728replaceState\u8bbe\u7f6e\u6210\u529f\uff0c\u4e14\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u540e\u8c03\u7528\u3002\n\n\n\n**\u603b\u7ed3\uff1a** setState\u00a0\u662f\u4fee\u6539\u5176\u4e2d\u7684\u90e8\u5206\u72b6\u6001\uff0c\u76f8\u5f53\u4e8e Object.assign\uff0c\u53ea\u662f\u8986\u76d6\uff0c\u4e0d\u4f1a\u51cf\u5c11\u539f\u6765\u7684\u72b6\u6001\u3002\u800creplaceState \u662f\u5b8c\u5168\u66ff\u6362\u539f\u6765\u7684\u72b6\u6001\uff0c\u76f8\u5f53\u4e8e\u8d4b\u503c\uff0c\u5c06\u539f\u6765\u7684 state \u66ff\u6362\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u65b0\u72b6\u6001\u5c5e\u6027\u51cf\u5c11\uff0c\u90a3\u4e48 state \u4e2d\u5c31\u6ca1\u6709\u8fd9\u4e2a\u72b6\u6001\u4e86\u3002\n\n### 7. \u5728React\u4e2d\u7ec4\u4ef6\u7684this.state\u548csetState\u6709\u4ec0\u4e48\u533a\u522b\uff1f\n\nthis.state\u901a\u5e38\u662f\u7528\u6765\u521d\u59cb\u5316state\u7684\uff0cthis.setState\u662f\u7528\u6765\u4fee\u6539state\u503c\u7684\u3002\u5982\u679c\u521d\u59cb\u5316\u4e86state\u4e4b\u540e\u518d\u4f7f\u7528this.state\uff0c\u4e4b\u524d\u7684state\u4f1a\u88ab\u8986\u76d6\u6389\uff0c\u5982\u679c\u4f7f\u7528this.setState\uff0c\u53ea\u4f1a\u66ff\u6362\u6389\u76f8\u5e94\u7684state\u503c\u3002\u6240\u4ee5\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539state\u7684\u503c\uff0c\u5c31\u9700\u8981\u4f7f\u7528setState\uff0c\u800c\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539state\uff0c\u76f4\u63a5\u4fee\u6539state\u4e4b\u540e\u9875\u9762\u662f\u4e0d\u4f1a\u66f4\u65b0\u7684\u3002\n\n### 8. state \u662f\u600e\u4e48\u6ce8\u5165\u5230\u7ec4\u4ef6\u7684\uff0c\u4ece reducer \u5230\u7ec4\u4ef6\u7ecf\u5386\u4e86\u4ec0\u4e48\u6837\u7684\u8fc7\u7a0b\n\n\u901a\u8fc7connect\u548cmapStateToProps\u5c06state\u6ce8\u5165\u5230\u7ec4\u4ef6\u4e2d\uff1a\n\n```javascript\nimport { connect } from 'react-redux'\nimport { setVisibilityFilter } from '@/reducers/Todo/actions'\nimport Link from '@/containers/Todo/components/Link'\n\nconst mapStateToProps = (state, ownProps) => ({\n    active: ownProps.filter === state.visibilityFilter\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    setFilter: () => {\n        dispatch(setVisibilityFilter(ownProps.filter))\n    }\n})\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Link)\n```\n\n\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cactive\u5c31\u662f\u6ce8\u5165\u5230Link\u7ec4\u4ef6\u4e2d\u7684\u72b6\u6001\u3002 mapStateToProps\uff08state\uff0cownProps\uff09\u4e2d\u5e26\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u542b\u4e49\u662f\u2236\n\n- state-store\u7ba1\u7406\u7684\u5168\u5c40\u72b6\u6001\u5bf9\u8c61\uff0c\u6240\u6709\u90fd\u7ec4\u4ef6\u72b6\u6001\u6570\u636e\u90fd\u5b58\u50a8\u5728\u8be5\u5bf9\u8c61\u4e2d\u3002\n- ownProps \u7ec4\u4ef6\u901a\u8fc7props\u4f20\u5165\u7684\u53c2\u6570\u3002 \n\n\n\n**reducer \u5230\u7ec4\u4ef6\u7ecf\u5386\u7684\u8fc7\u7a0b\uff1a**\n\n- reducer\u5bf9action\u5bf9\u8c61\u5904\u7406\uff0c\u66f4\u65b0\u7ec4\u4ef6\u72b6\u6001\uff0c\u5e76\u5c06\u65b0\u7684\u72b6\u6001\u503c\u8fd4\u56destore\u3002\n- \u901a\u8fc7connect\uff08mapStateToProps\uff0cmapDispatchToProps\uff09\uff08Component\uff09\u5bf9\u7ec4\u4ef6 Component\u8fdb\u884c\u5347\u7ea7\uff0c\u6b64\u65f6\u5c06\u72b6\u6001\u503c\u4ecestore\u53d6\u51fa\u5e76\u4f5c\u4e3aprops\u53c2\u6570\u4f20\u9012\u5230\u7ec4\u4ef6\u3002\n\n\n\n**\u9ad8\u9636\u7ec4\u4ef6\u5b9e\u73b0\u6e90\u7801\u2236**\n\n```javascript\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\n// \u9ad8\u9636\u7ec4\u4ef6 contect \nexport const connect = (mapStateToProps, mapDispatchToProps) => (WrappedComponent) => {\n    class Connect extends React.Component {\n        // \u901a\u8fc7\u5bf9context\u8c03\u7528\u83b7\u53d6store\n        static contextTypes = {\n            store: PropTypes.object\n        }\n\n        constructor() {\n            super()\n            this.state = {\n                allProps: {}\n            }\n        }\n\n        // \u7b2c\u4e00\u904d\u9700\u521d\u59cb\u5316\u6240\u6709\u7ec4\u4ef6\u521d\u59cb\u72b6\u6001\n        componentWillMount() {\n            const store = this.context.store\n            this._updateProps()\n            store.subscribe(() => this._updateProps()); // \u52a0\u5165_updateProps()\u81f3store\u91cc\u7684\u76d1\u542c\u4e8b\u4ef6\u5217\u8868\n        }\n\n        // \u6267\u884caction\u540e\u66f4\u65b0props\uff0c\u4f7f\u7ec4\u4ef6\u53ef\u4ee5\u66f4\u65b0\u81f3\u6700\u65b0\u72b6\u6001\uff08\u7c7b\u4f3c\u4e8esetState\uff09\n        _updateProps() {\n            const store = this.context.store;\n            let stateProps = mapStateToProps ?\n                mapStateToProps(store.getState(), this.props) : {} // \u9632\u6b62 mapStateToProps \u6ca1\u6709\u4f20\u5165\n            let dispatchProps = mapDispatchToProps ?\n                mapDispatchToProps(store.dispatch, this.props) : {\n                                    dispatch: store.dispatch\n                                } // \u9632\u6b62 mapDispatchToProps \u6ca1\u6709\u4f20\u5165\n            this.setState({\n                allProps: {\n                    ...stateProps,\n                    ...dispatchProps,\n                    ...this.props\n                }\n            })\n        }\n\n        render() {\n            return <WrappedComponent {...this.state.allProps} />\n        }\n    }\n    return Connect\n}\n```\n\n### 9. React\u7ec4\u4ef6\u7684state\u548cprops\u6709\u4ec0\u4e48\u533a\u522b\uff1f\n\n**\uff081\uff09props**\n\nprops\u662f\u4e00\u4e2a\u4ece\u5916\u90e8\u4f20\u8fdb\u7ec4\u4ef6\u7684\u53c2\u6570\uff0c\u4e3b\u8981\u4f5c\u4e3a\u5c31\u662f\u4ece\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\uff0c\u5b83\u5177\u6709\u53ef\u8bfb\u6027\u548c\u4e0d\u53d8\u6027\uff0c\u53ea\u80fd\u901a\u8fc7\u5916\u90e8\u7ec4\u4ef6\u4e3b\u52a8\u4f20\u5165\u65b0\u7684props\u6765\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6\uff0c\u5426\u5219\u5b50\u7ec4\u4ef6\u7684props\u4ee5\u53ca\u5c55\u73b0\u5f62\u5f0f\u4e0d\u4f1a\u6539\u53d8\u3002\n\n**\uff082\uff09state**\n\nstate\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u7528\u4e8e\u7ec4\u4ef6\u4fdd\u5b58\u3001\u63a7\u5236\u4ee5\u53ca\u4fee\u6539\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u5b83\u53ea\u80fd\u5728constructor\u4e2d\u521d\u59cb\u5316\uff0c\u5b83\u7b97\u662f\u7ec4\u4ef6\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u4e0d\u53ef\u901a\u8fc7\u5916\u90e8\u8bbf\u95ee\u548c\u4fee\u6539\uff0c\u53ea\u80fd\u901a\u8fc7\u7ec4\u4ef6\u5185\u90e8\u7684this.setState\u6765\u4fee\u6539\uff0c\u4fee\u6539state\u5c5e\u6027\u4f1a\u5bfc\u81f4\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002\n\n**\uff083\uff09\u533a\u522b**\n\n- props \u662f\u4f20\u9012\u7ed9\u7ec4\u4ef6\u7684\uff08\u7c7b\u4f3c\u4e8e\u51fd\u6570\u7684\u5f62\u53c2\uff09\uff0c\u800cstate \u662f\u5728\u7ec4\u4ef6\u5185\u88ab\u7ec4\u4ef6\u81ea\u5df1\u7ba1\u7406\u7684\uff08\u7c7b\u4f3c\u4e8e\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u58f0\u660e\u7684\u53d8\u91cf\uff09\u3002\n- props \u662f\u4e0d\u53ef\u4fee\u6539\u7684\uff0c\u6240\u6709 React \u7ec4\u4ef6\u90fd\u5fc5\u987b\u50cf\u7eaf\u51fd\u6570\u4e00\u6837\u4fdd\u62a4\u5b83\u4eec\u7684 props \u4e0d\u88ab\u66f4\u6539\u3002\n- state \u662f\u5728\u7ec4\u4ef6\u4e2d\u521b\u5efa\u7684\uff0c\u4e00\u822c\u5728 constructor\u4e2d\u521d\u59cb\u5316 state\u3002state \u662f\u591a\u53d8\u7684\u3001\u53ef\u4ee5\u4fee\u6539\uff0c\u6bcf\u6b21setState\u90fd\u5f02\u6b65\u66f4\u65b0\u7684\u3002\n\n### 10. React\u4e2d\u7684props\u4e3a\u4ec0\u4e48\u662f\u53ea\u8bfb\u7684\uff1f\n\n`this.props`\u662f\u7ec4\u4ef6\u4e4b\u95f4\u6c9f\u901a\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u539f\u5219\u4e0a\u6765\u8bb2\uff0c\u5b83\u53ea\u80fd\u4ece\u7236\u7ec4\u4ef6\u6d41\u5411\u5b50\u7ec4\u4ef6\u3002React\u5177\u6709\u6d53\u91cd\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u601d\u60f3\u3002\n\n\n\u63d0\u5230\u51fd\u6570\u5f0f\u7f16\u7a0b\u5c31\u8981\u63d0\u4e00\u4e2a\u6982\u5ff5\uff1a\u7eaf\u51fd\u6570\u3002\u5b83\u6709\u51e0\u4e2a\u7279\u70b9\uff1a\n\n- \u7ed9\u5b9a\u76f8\u540c\u7684\u8f93\u5165\uff0c\u603b\u662f\u8fd4\u56de\u76f8\u540c\u7684\u8f93\u51fa\u3002\n- \u8fc7\u7a0b\u6ca1\u6709\u526f\u4f5c\u7528\u3002\n- \u4e0d\u4f9d\u8d56\u5916\u90e8\u72b6\u6001\u3002\n\n\n\n`this.props`\u5c31\u662f\u6c72\u53d6\u4e86\u7eaf\u51fd\u6570\u7684\u601d\u60f3\u3002props\u7684\u4e0d\u53ef\u4ee5\u53d8\u6027\u5c31\u4fdd\u8bc1\u7684\u76f8\u540c\u7684\u8f93\u5165\uff0c\u9875\u9762\u663e\u793a\u7684\u5185\u5bb9\u662f\u4e00\u6837\u7684\uff0c\u5e76\u4e14\u4e0d\u4f1a\u4ea7\u751f\u526f\u4f5c\u7528\n\n### 11. \u5728React\u4e2d\u7ec4\u4ef6\u7684props\u6539\u53d8\u65f6\u66f4\u65b0\u7ec4\u4ef6\u7684\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f\n\n\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4f20\u5165\u7684props\u66f4\u65b0\u65f6\u91cd\u65b0\u6e32\u67d3\u8be5\u7ec4\u4ef6\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u5728`componentWillReceiveProps`\u4e2d\u5c06\u65b0\u7684props\u66f4\u65b0\u5230\u7ec4\u4ef6\u7684state\u4e2d\uff08\u8fd9\u79cdstate\u88ab\u6210\u4e3a\u6d3e\u751f\u72b6\u6001\uff08Derived State\uff09\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u91cd\u65b0\u6e32\u67d3\u3002React 16.3\u4e2d\u8fd8\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u94a9\u5b50\u51fd\u6570`getDerivedStateFromProps`\u6765\u4e13\u95e8\u5b9e\u73b0\u8fd9\u4e00\u9700\u6c42\u3002\n\n\n**\uff081\uff09componentWillReceiveProps\uff08\u5df2\u5e9f\u5f03\uff09**\n\n\u5728react\u7684componentWillReceiveProps(nextProps)\u751f\u547d\u5468\u671f\u4e2d\uff0c\u53ef\u4ee5\u5728\u5b50\u7ec4\u4ef6\u7684render\u51fd\u6570\u6267\u884c\u524d\uff0c\u901a\u8fc7this.props\u83b7\u53d6\u65e7\u7684\u5c5e\u6027\uff0c\u901a\u8fc7nextProps\u83b7\u53d6\u65b0\u7684props\uff0c\u5bf9\u6bd4\u4e24\u6b21props\u662f\u5426\u76f8\u540c\uff0c\u4ece\u800c\u66f4\u65b0\u5b50\u7ec4\u4ef6\u81ea\u5df1\u7684state\u3002\n\n\n\u8fd9\u6837\u7684\u597d\u5904\u662f\uff0c\u53ef\u4ee5\u5c06\u6570\u636e\u8bf7\u6c42\u653e\u5728\u8fd9\u91cc\u8fdb\u884c\u6267\u884c\uff0c\u9700\u8981\u4f20\u7684\u53c2\u6570\u5219\u4ececomponentWillReceiveProps(nextProps)\u4e2d\u83b7\u53d6\u3002\u800c\u4e0d\u5fc5\u5c06\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u653e\u5728\u7236\u7ec4\u4ef6\u4e2d\u3002\u4e8e\u662f\u8be5\u8bf7\u6c42\u53ea\u4f1a\u5728\u8be5\u7ec4\u4ef6\u6e32\u67d3\u65f6\u624d\u4f1a\u53d1\u51fa\uff0c\u4ece\u800c\u51cf\u8f7b\u8bf7\u6c42\u8d1f\u62c5\u3002\n\n**\uff082\uff09getDerivedStateFromProps\uff0816.3\u5f15\u5165\uff09**\n\n\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u4e3a\u4e86\u66ff\u4ee3`componentWillReceiveProps`\u5b58\u5728\u7684\uff0c\u6240\u4ee5\u5728\u9700\u8981\u4f7f\u7528`componentWillReceiveProps`\u65f6\uff0c\u5c31\u53ef\u4ee5\u8003\u8651\u4f7f\u7528`getDerivedStateFromProps`\u6765\u8fdb\u884c\u66ff\u4ee3\u3002\n\n\n\u4e24\u8005\u7684\u53c2\u6570\u662f\u4e0d\u76f8\u540c\u7684\uff0c\u800c`getDerivedStateFromProps`\u662f\u4e00\u4e2a\u9759\u6001\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u4e0d\u80fd\u901a\u8fc7this\u8bbf\u95ee\u5230class\u7684\u5c5e\u6027\uff0c\u4e5f\u5e76\u4e0d\u63a8\u8350\u76f4\u63a5\u8bbf\u95ee\u5c5e\u6027\u3002\u800c\u662f\u5e94\u8be5\u901a\u8fc7\u53c2\u6570\u63d0\u4f9b\u7684nextProps\u4ee5\u53caprevState\u6765\u8fdb\u884c\u5224\u65ad\uff0c\u6839\u636e\u65b0\u4f20\u5165\u7684props\u6765\u6620\u5c04\u5230state\u3002\n\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c**\u5982\u679cprops\u4f20\u5165\u7684\u5185\u5bb9\u4e0d\u9700\u8981\u5f71\u54cd\u5230\u4f60\u7684state\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8fd4\u56de\u4e00\u4e2anull**\uff0c\u8fd9\u4e2a\u8fd4\u56de\u503c\u662f\u5fc5\u987b\u7684\uff0c\u6240\u4ee5\u5c3d\u91cf\u5c06\u5176\u5199\u5230\u51fd\u6570\u7684\u672b\u5c3e\uff1a\n\n```javascript\nstatic getDerivedStateFromProps(nextProps, prevState) {\n    const {type} = nextProps;\n    // \u5f53\u4f20\u5165\u7684type\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u66f4\u65b0state\n    if (type !== prevState.type) {\n        return {\n            type,\n        };\n    }\n    // \u5426\u5219\uff0c\u5bf9\u4e8estate\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\n    return null;\n}\n```\n\n### 12. React\u4e2d\u600e\u4e48\u68c0\u9a8cprops\uff1f\u9a8c\u8bc1props\u7684\u76ee\u7684\u662f\u4ec0\u4e48\uff1f\n\n**React**\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86**PropTypes**\u4ee5\u4f9b\u9a8c\u8bc1\u4f7f\u7528\u3002\u5f53\u6211\u4eec\u5411**Props**\u4f20\u5165\u7684\u6570\u636e\u65e0\u6548\uff08\u5411Props\u4f20\u5165\u7684\u6570\u636e\u7c7b\u578b\u548c\u9a8c\u8bc1\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u7b26\uff09\u5c31\u4f1a\u5728\u63a7\u5236\u53f0\u53d1\u51fa\u8b66\u544a\u4fe1\u606f\u3002\u5b83\u53ef\u4ee5\u907f\u514d\u968f\u7740\u5e94\u7528\u8d8a\u6765\u8d8a\u590d\u6742\u4ece\u800c\u51fa\u73b0\u7684\u95ee\u9898\u3002\u5e76\u4e14\uff0c\u5b83\u8fd8\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u53d8\u5f97\u66f4\u6613\u8bfb\u3002\n\n```javascript\nimport PropTypes from 'prop-types';\n\nclass Greeting extends React.Component {\n  render() {\n    return (\n      <h1>Hello, {this.props.name}</h1>\n    );\n  }\n}\n\nGreeting.propTypes = {\n  name: PropTypes.string\n};\n```\n\n\u5f53\u7136\uff0c\u5982\u679c\u9879\u76ee\u6c47\u4e2d\u4f7f\u7528\u4e86TypeScript\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4e0d\u7528PropTypes\u6765\u6821\u9a8c\uff0c\u800c\u4f7f\u7528TypeScript\u5b9a\u4e49\u63a5\u53e3\u6765\u6821\u9a8cprops\u3002\n\n## \u4e09\u3001\u751f\u547d\u5468\u671f\n\n### 1. React\u7684\u751f\u547d\u5468\u671f\u6709\u54ea\u4e9b\uff1f\n\n React \u901a\u5e38\u5c06\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a\n\n- \u88c5\u8f7d\u9636\u6bb5\uff08Mount\uff09\uff0c\u7ec4\u4ef6\u7b2c\u4e00\u6b21\u5728DOM\u6811\u4e2d\u88ab\u6e32\u67d3\u7684\u8fc7\u7a0b\uff1b\n- \u66f4\u65b0\u8fc7\u7a0b\uff08Update\uff09\uff0c\u7ec4\u4ef6\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u91cd\u65b0\u66f4\u65b0\u6e32\u67d3\u7684\u8fc7\u7a0b\uff1b\n- \u5378\u8f7d\u8fc7\u7a0b\uff08Unmount\uff09\uff0c\u7ec4\u4ef6\u4eceDOM\u6811\u4e2d\u88ab\u79fb\u9664\u7684\u8fc7\u7a0b\uff1b\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1570030fdd4a49f2ad8cfd01a24f80d7~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### 1\uff09\u7ec4\u4ef6\u6302\u8f7d\u9636\u6bb5\n\n\u6302\u8f7d\u9636\u6bb5\u7ec4\u4ef6\u88ab\u521b\u5efa\uff0c\u7136\u540e\u7ec4\u4ef6\u5b9e\u4f8b\u63d2\u5165\u5230 DOM \u4e2d\uff0c\u5b8c\u6210\u7ec4\u4ef6\u7684\u7b2c\u4e00\u6b21\u6e32\u67d3\uff0c\u8be5\u8fc7\u7a0b\u53ea\u4f1a\u53d1\u751f\u4e00\u6b21\uff0c\u5728\u6b64\u9636\u6bb5\u4f1a\u4f9d\u6b21\u8c03\u7528\u4ee5\u4e0b\u8fd9\u4e9b\u65b9\u6cd5\uff1a\n\n- constructor\n- getDerivedStateFromProps\n- render\n- componentDidMount\n\n##### \uff081\uff09constructor\n\n\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u88ab\u6267\u884c\uff0c\u82e5\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\u5b83\uff0c\u4f1a\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684\u6784\u9020\u51fd\u6570\uff0c\u4f46\u662f\u82e5\u663e\u5f0f\u5b9a\u4e49\u4e86\u6784\u9020\u51fd\u6570\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u6784\u9020\u51fd\u6570\u4e2d\u6267\u884c `super(props)`\uff0c\u5426\u5219\u65e0\u6cd5\u5728\u6784\u9020\u51fd\u6570\u4e2d\u62ff\u5230this\u3002\n\n\n\u5982\u679c\u4e0d\u521d\u59cb\u5316 state \u6216\u4e0d\u8fdb\u884c\u65b9\u6cd5\u7ed1\u5b9a\uff0c\u5219\u4e0d\u9700\u8981\u4e3a React \u7ec4\u4ef6\u5b9e\u73b0\u6784\u9020\u51fd\u6570**Constructor**\u3002\n\n\nconstructor\u4e2d\u901a\u5e38\u53ea\u505a\u4e24\u4ef6\u4e8b\uff1a \n\n- \u521d\u59cb\u5316\u7ec4\u4ef6\u7684 state\n- \u7ed9\u4e8b\u4ef6\u5904\u7406\u65b9\u6cd5\u7ed1\u5b9a this\n\n```javascript\nconstructor(props) {\n  super(props);\n  // \u4e0d\u8981\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528 setState\uff0c\u53ef\u4ee5\u76f4\u63a5\u7ed9 state \u8bbe\u7f6e\u521d\u59cb\u503c\n  this.state = { counter: 0 }\n  this.handleClick = this.handleClick.bind(this)\n}\n```\n\n##### \uff082\uff09getDerivedStateFromProps\n\n```javascript\nstatic getDerivedStateFromProps(props, state)\n```\n\n\u8fd9\u662f\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u6240\u4ee5\u4e0d\u80fd\u5728\u8fd9\u4e2a\u51fd\u6570\u91cc\u4f7f\u7528 `this`\uff0c\u6709\u4e24\u4e2a\u53c2\u6570 `props` \u548c `state`\uff0c\u5206\u522b\u6307\u63a5\u6536\u5230\u7684\u65b0\u53c2\u6570\u548c\u5f53\u524d\u7ec4\u4ef6\u7684 `state` \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u7528\u6765\u66f4\u65b0\u5f53\u524d\u7684 `state` \u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u9700\u8981\u66f4\u65b0\u53ef\u4ee5\u8fd4\u56de `null`\u3002\n\n\n\u8be5\u51fd\u6570\u4f1a\u5728\u88c5\u8f7d\u65f6\uff0c\u63a5\u6536\u5230\u65b0\u7684 `props` \u6216\u8005\u8c03\u7528\u4e86 `setState` \u548c `forceUpdate` \u65f6\u88ab\u8c03\u7528\u3002\u5982\u5f53\u63a5\u6536\u5230\u65b0\u7684\u5c5e\u6027\u60f3\u4fee\u6539 `state` \uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u3002\n\n```javascript\n// \u5f53 props.counter \u53d8\u5316\u65f6\uff0c\u8d4b\u503c\u7ed9 state \nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      counter: 0\n    }\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (props.counter !== state.counter) {\n      return {\n        counter: props.counter\n      }\n    }\n    return null\n  }\n  \n  handleClick = () => {\n    this.setState({\n      counter: this.state.counter + 1\n    })\n  }\n  render() {\n    return (\n      <div>\n        <h1 onClick={this.handleClick}>Hello, world!{this.state.counter}</h1>\n      </div>\n    )\n  }\n}\n```\n\n\u73b0\u5728\u53ef\u4ee5\u663e\u5f0f\u4f20\u5165 `counter` \uff0c\u4f46\u662f\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u60f3\u8981\u901a\u8fc7\u70b9\u51fb\u5b9e\u73b0 `state.counter` \u7684\u589e\u52a0\uff0c\u4f46\u8fd9\u65f6\u4f1a\u53d1\u73b0\u503c\u4e0d\u4f1a\u53d1\u751f\u4efb\u4f55\u53d8\u5316\uff0c\u4e00\u76f4\u4fdd\u6301 `props` \u4f20\u8fdb\u6765\u7684\u503c\u3002\u8fd9\u662f\u7531\u4e8e\u5728 React 16.4^ \u7684\u7248\u672c\u4e2d `setState` \u548c `forceUpdate` \u4e5f\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u751f\u547d\u5468\u671f\uff0c\u6240\u4ee5\u5f53\u7ec4\u4ef6\u5185\u90e8 `state` \u53d8\u5316\u540e\uff0c\u5c31\u4f1a\u91cd\u65b0\u8d70\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u540c\u65f6\u4f1a\u628a `state` \u503c\u8d4b\u503c\u4e3a `props` \u7684\u503c\u3002\u56e0\u6b64\u9700\u8981\u591a\u52a0\u4e00\u4e2a\u5b57\u6bb5\u6765\u8bb0\u5f55\u4e4b\u524d\u7684 `props` \u503c\uff0c\u8fd9\u6837\u5c31\u4f1a\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u5177\u4f53\u5982\u4e0b\uff1a\n\n```javascript\n// \u8fd9\u91cc\u53ea\u5217\u51fa\u9700\u8981\u53d8\u5316\u7684\u5730\u65b9\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      // \u589e\u52a0\u4e00\u4e2a preCounter \u6765\u8bb0\u5f55\u4e4b\u524d\u7684 props \u4f20\u6765\u7684\u503c\n      preCounter: 0,\n      counter: 0\n    }\n  }\n  static getDerivedStateFromProps(props, state) {\n    // \u8ddf state.preCounter \u8fdb\u884c\u6bd4\u8f83\n    if (props.counter !== state.preCounter) {\n      return {\n        counter: props.counter,\n        preCounter: props.counter\n      }\n    }\n    return null\n  }\n  handleClick = () => {\n    this.setState({\n      counter: this.state.counter + 1\n    })\n  }\n  render() {\n    return (\n      <div>\n        <h1 onClick={this.handleClick}>Hello, world!{this.state.counter}</h1>\n      </div>\n    )\n  }\n}\n```\n\n##### \uff083\uff09render\n\nrender\u662fReact \u4e2d\u6700\u6838\u5fc3\u7684\u65b9\u6cd5\uff0c\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u5fc5\u987b\u8981\u6709\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5b83\u4f1a\u6839\u636e\u72b6\u6001 `state` \u548c\u5c5e\u6027 `props` \u6e32\u67d3\u7ec4\u4ef6\u3002\u8fd9\u4e2a\u51fd\u6570\u53ea\u505a\u4e00\u4ef6\u4e8b\uff0c\u5c31\u662f\u8fd4\u56de\u9700\u8981\u6e32\u67d3\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u4e0d\u8981\u5728\u8fd9\u4e2a\u51fd\u6570\u5185\u505a\u5176\u4ed6\u4e1a\u52a1\u903b\u8f91\uff0c\u901a\u5e38\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u7c7b\u578b\u4e2d\u4e00\u4e2a\uff1a\n\n- **React \u5143\u7d20**\uff1a\u8fd9\u91cc\u5305\u62ec\u539f\u751f\u7684 DOM \u4ee5\u53ca React \u7ec4\u4ef6\uff1b\n- **\u6570\u7ec4\u548c Fragment\uff08\u7247\u6bb5\uff09**\uff1a\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\uff1b\n- **Portals\uff08\u63d2\u69fd\uff09**\uff1a\u53ef\u4ee5\u5c06\u5b50\u5143\u7d20\u6e32\u67d3\u5230\u4e0d\u540c\u7684 DOM \u5b50\u6811\u79cd\uff1b\n- **\u5b57\u7b26\u4e32\u548c\u6570\u5b57**\uff1a\u88ab\u6e32\u67d3\u6210 DOM \u4e2d\u7684 text \u8282\u70b9\uff1b\n- **\u5e03\u5c14\u503c\u6216 null**\uff1a\u4e0d\u6e32\u67d3\u4efb\u4f55\u5185\u5bb9\u3002\n\n##### \uff084\uff09componentDidMount() \n\ncomponentDidMount()\u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u540e\uff08\u63d2\u5165 DOM \u6811\u4e2d\uff09\u7acb\u5373\u8c03\u3002\u8be5\u9636\u6bb5\u901a\u5e38\u8fdb\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n\n- \u6267\u884c\u4f9d\u8d56\u4e8eDOM\u7684\u64cd\u4f5c\uff1b\n- \u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\uff1b\uff08\u5b98\u65b9\u5efa\u8bae\uff09\n- \u6dfb\u52a0\u8ba2\u9605\u6d88\u606f\uff08\u4f1a\u5728componentWillUnmount\u53d6\u6d88\u8ba2\u9605\uff09\uff1b\n\n\n\n\u5982\u679c\u5728 `componentDidMount` \u4e2d\u8c03\u7528 `setState` \uff0c\u5c31\u4f1a\u89e6\u53d1\u4e00\u6b21\u989d\u5916\u7684\u6e32\u67d3\uff0c\u591a\u8c03\u7528\u4e86\u4e00\u6b21 `render` \u51fd\u6570\uff0c\u7531\u4e8e\u5b83\u662f\u5728\u6d4f\u89c8\u5668\u5237\u65b0\u5c4f\u5e55\u524d\u6267\u884c\u7684\uff0c\u6240\u4ee5\u7528\u6237\u5bf9\u6b64\u662f\u6ca1\u6709\u611f\u77e5\u7684\uff0c\u4f46\u662f\u6211\u5e94\u5f53\u907f\u514d\u8fd9\u6837\u4f7f\u7528\uff0c\u8fd9\u6837\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5c3d\u91cf\u662f\u5728 `constructor` \u4e2d\u521d\u59cb\u5316 `state` \u5bf9\u8c61\u3002\n\n\n\u5728\u7ec4\u4ef6\u88c5\u8f7d\u4e4b\u540e\uff0c\u5c06\u8ba1\u6570\u6570\u5b57\u53d8\u4e3a1\uff1a\n\n```javascript\nclass App extends React.Component  {\n  constructor(props) {\n    super(props)\n    this.state = {\n      counter: 0\n    }\n  }\n  componentDidMount () {\n    this.setState({\n      counter: 1\n    })\n  }\n  render ()  {\n    return (\n      <div className=\"counter\">\n        counter\u503c: { this.state.counter }\n      </div>\n    )\n  }\n}\n```\n\n#### 2\uff09\u7ec4\u4ef6\u66f4\u65b0\u9636\u6bb5\n\n\u5f53\u7ec4\u4ef6\u7684 `props` \u6539\u53d8\u4e86\uff0c\u6216\u7ec4\u4ef6\u5185\u90e8\u8c03\u7528\u4e86 `setState/forceUpdate`\uff0c\u4f1a\u89e6\u53d1\u66f4\u65b0\u91cd\u65b0\u6e32\u67d3\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u53d1\u751f\u591a\u6b21\u3002\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u4f9d\u6b21\u8c03\u7528\u4e0b\u9762\u8fd9\u4e9b\u65b9\u6cd5\uff1a\n\n- getDerivedStateFromProps\n- shouldComponentUpdate\n- render\n- getSnapshotBeforeUpdate\n- componentDidUpdate\n\n##### \uff081\uff09shouldComponentUpdate\n\n```javascript\nshouldComponentUpdate(nextProps, nextState)\n```\n\n\u5728\u8bf4\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u4e4b\u524d\uff0c\u6765\u770b\u4e24\u4e2a\u95ee\u9898\uff1a\n\n- **setState \u51fd\u6570\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4f1a\u5bfc\u81f4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u5417\uff1f\u4f8b\u5982\u4e0b\u9762\u8fd9\u79cd\u60c5\u51b5\uff1a**\n\n```javascript\nthis.setState({number: this.state.number})\n```\n\n- **\u5982\u679c\u6ca1\u6709\u8c03\u7528 setState\uff0cprops \u503c\u4e5f\u6ca1\u6709\u53d8\u5316\uff0c\u662f\u4e0d\u662f\u7ec4\u4ef6\u5c31\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3\uff1f**\n\n\n\n\u7b2c\u4e00\u4e2a\u95ee\u9898\u7b54\u6848\u662f **\u4f1a** \uff0c\u7b2c\u4e8c\u4e2a\u95ee\u9898\u5982\u679c\u662f\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u65f6\uff0c\u4e0d\u7ba1\u4f20\u5165\u7684 props \u6709\u6ca1\u6709\u53d8\u5316\uff0c\u90fd\u4f1a\u5f15\u8d77\u5b50\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002\n\n\n\u90a3\u4e48\u6709\u6ca1\u6709\u4ec0\u4e48\u65b9\u6cd5\u89e3\u51b3\u5728\u8fd9\u4e24\u4e2a\u573a\u666f\u4e0b\u4e0d\u8ba9\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u8fdb\u800c\u63d0\u5347\u6027\u80fd\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019 `shouldComponentUpdate` \u767b\u573a\u4e86\uff0c\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u7528\u6765\u63d0\u5347\u901f\u5ea6\u7684\uff0c\u5b83\u662f\u5728\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u5f00\u59cb\u524d\u89e6\u53d1\u7684\uff0c\u9ed8\u8ba4\u8fd4\u56de `true`\uff0c\u53ef\u4ee5\u6bd4\u8f83 `this.props` \u548c `nextProps` \uff0c`this.state` \u548c `nextState` \u503c\u662f\u5426\u53d8\u5316\uff0c\u6765\u786e\u8ba4\u8fd4\u56de true \u6216\u8005 `false`\u3002\u5f53\u8fd4\u56de `false` \u65f6\uff0c\u7ec4\u4ef6\u7684\u66f4\u65b0\u8fc7\u7a0b\u505c\u6b62\uff0c\u540e\u7eed\u7684 `render`\u3001`componentDidUpdate` \u4e5f\u4e0d\u4f1a\u88ab\u8c03\u7528\u3002\n\n\n**\u6ce8\u610f\uff1a** \u6dfb\u52a0 `shouldComponentUpdate` \u65b9\u6cd5\u65f6\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u6df1\u5ea6\u76f8\u7b49\u68c0\u67e5\uff08\u5982\u4f7f\u7528 `JSON.stringify()`\uff09\uff0c\u56e0\u4e3a\u6df1\u6bd4\u8f83\u6548\u7387\u5f88\u4f4e\uff0c\u53ef\u80fd\u4f1a\u6bd4\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u6548\u7387\u8fd8\u4f4e\u3002\u800c\u4e14\u8be5\u65b9\u6cd5\u7ef4\u62a4\u6bd4\u8f83\u56f0\u96be\uff0c\u5efa\u8bae\u4f7f\u7528\u8be5\u65b9\u6cd5\u4f1a\u4ea7\u751f\u660e\u663e\u7684\u6027\u80fd\u63d0\u5347\u65f6\u4f7f\u7528\u3002\n\n##### \uff082\uff09getSnapshotBeforeUpdate\n\n```javascript\ngetSnapshotBeforeUpdate(prevProps, prevState)\n```\n\n\u8fd9\u4e2a\u65b9\u6cd5\u5728 `render` \u4e4b\u540e\uff0c`componentDidUpdate` \u4e4b\u524d\u8c03\u7528\uff0c\u6709\u4e24\u4e2a\u53c2\u6570 `prevProps` \u548c `prevState`\uff0c\u8868\u793a\u66f4\u65b0\u4e4b\u524d\u7684 `props` \u548c `state`\uff0c\u8fd9\u4e2a\u51fd\u6570\u5fc5\u987b\u8981\u548c `componentDidUpdate` \u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u4e14\u8981\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\uff0c\u9ed8\u8ba4\u662f `null`\uff0c\u8fd9\u4e2a\u8fd4\u56de\u503c\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u7ed9 `componentDidUpdate`\u3002\n\n##### \uff083\uff09componentDidUpdate\n\ncomponentDidUpdate() \u4f1a\u5728\u66f4\u65b0\u540e\u4f1a\u88ab\u7acb\u5373\u8c03\u7528\uff0c\u9996\u6b21\u6e32\u67d3\u4e0d\u4f1a\u6267\u884c\u6b64\u65b9\u6cd5\u3002 \u8be5\u9636\u6bb5\u901a\u5e38\u8fdb\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n\n- \u5f53\u7ec4\u4ef6\u66f4\u65b0\u540e\uff0c\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\uff1b \n- \u5982\u679c\u4f60\u5bf9\u66f4\u65b0\u524d\u540e\u7684 props \u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5728\u6b64\u5904\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\uff1b\uff08\u4f8b\u5982\uff0c\u5f53 props \u672a\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u7f51\u7edc\u8bf7\u6c42\uff09\u3002 \n\n```javascript\ncomponentDidUpdate(prevProps, prevState, snapshot){}\n```\n\n\u8be5\u65b9\u6cd5\u6709\u4e09\u4e2a\u53c2\u6570\uff1a\n\n- prevProps: \u66f4\u65b0\u524d\u7684props\n- prevState: \u66f4\u65b0\u524d\u7684state\n- snapshot: getSnapshotBeforeUpdate()\u751f\u547d\u5468\u671f\u7684\u8fd4\u56de\u503c\n\n#### 3\uff09\u7ec4\u4ef6\u5378\u8f7d\u9636\u6bb5\n\n\u5378\u8f7d\u9636\u6bb5\u53ea\u6709\u4e00\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0ccomponentWillUnmount() \u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u53ca\u9500\u6bc1\u4e4b\u524d\u76f4\u63a5\u8c03\u7528\u3002\u5728\u6b64\u65b9\u6cd5\u4e2d\u6267\u884c\u5fc5\u8981\u7684\u6e05\u7406\u64cd\u4f5c\uff1a\n\n- \u6e05\u9664 timer\uff0c\u53d6\u6d88\u7f51\u7edc\u8bf7\u6c42\u6216\u6e05\u9664\n- \u53d6\u6d88\u5728 componentDidMount() \u4e2d\u521b\u5efa\u7684\u8ba2\u9605\u7b49\uff1b\n\n\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u5728\u4e00\u4e2a\u7ec4\u4ef6\u88ab\u5378\u8f7d\u548c\u9500\u6bc1\u4e4b\u524d\u88ab\u8c03\u7528\uff0c\u56e0\u6b64\u4f60\u4e0d\u5e94\u8be5\u518d\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u4f7f\u7528 `setState`\uff0c\u56e0\u4e3a\u7ec4\u4ef6\u4e00\u65e6\u88ab\u5378\u8f7d\uff0c\u5c31\u4e0d\u4f1a\u518d\u88c5\u8f7d\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\n\n#### 4\uff09\u9519\u8bef\u5904\u7406\u9636\u6bb5\n\ncomponentDidCatch(error, info)\uff0c\u6b64\u751f\u547d\u5468\u671f\u5728\u540e\u4ee3\u7ec4\u4ef6\u629b\u51fa\u9519\u8bef\u540e\u88ab\u8c03\u7528\u3002 \u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\u2236\n\n- error\uff1a\u629b\u51fa\u7684\u9519\u8bef\u3002\n- info\uff1a\u5e26\u6709 componentStack key \u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u7ec4\u4ef6\u5f15\u53d1\u9519\u8bef\u7684\u6808\u4fe1\u606f\n\n\n\nReact\u5e38\u89c1\u7684\u751f\u547d\u5468\u671f\u5982\u4e0b\uff1a\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18842f9ec3674acdbdd7ff35f9683200~tplv-k3u1fbpfcp-zoom-1.image)\n**React\u5e38\u89c1\u751f\u547d\u5468\u671f\u7684\u8fc7\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a**\n\n- \u6302\u8f7d\u9636\u6bb5\uff0c\u9996\u5148\u6267\u884cconstructor\u6784\u9020\u65b9\u6cd5\uff0c\u6765\u521b\u5efa\u7ec4\u4ef6\n- \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u4f1a\u6267\u884crender\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4f1a\u8fd4\u56de\u9700\u8981\u6e32\u67d3\u7684\u5185\u5bb9\n- \u968f\u540e\uff0cReact\u4f1a\u5c06\u9700\u8981\u6e32\u67d3\u7684\u5185\u5bb9\u6302\u8f7d\u5230DOM\u6811\u4e0a\n- **\u6302\u8f7d\u5b8c\u6210\u4e4b\u540e\u5c31\u4f1a\u6267\u884ccomponentDidMount\u751f\u547d\u5468\u671f\u51fd\u6570**\n- \u5982\u679c\u6211\u4eec\u7ed9\u7ec4\u4ef6\u521b\u5efa\u4e00\u4e2aprops\uff08\u7528\u4e8e\u7ec4\u4ef6\u901a\u4fe1\uff09\u3001\u8c03\u7528setState\uff08\u66f4\u6539state\u4e2d\u7684\u6570\u636e\uff09\u3001\u8c03\u7528forceUpdate\uff08\u5f3a\u5236\u66f4\u65b0\u7ec4\u4ef6\uff09\u65f6\uff0c\u90fd\u4f1a\u91cd\u65b0\u8c03\u7528render\u51fd\u6570\n- render\u51fd\u6570\u91cd\u65b0\u6267\u884c\u4e4b\u540e\uff0c\u5c31\u4f1a\u91cd\u65b0\u8fdb\u884cDOM\u6811\u7684\u6302\u8f7d\n- **\u6302\u8f7d\u5b8c\u6210\u4e4b\u540e\u5c31\u4f1a\u6267\u884ccomponentDidUpdate\u751f\u547d\u5468\u671f\u51fd\u6570**\n- **\u5f53\u79fb\u9664\u7ec4\u4ef6\u65f6\uff0c\u5c31\u4f1a\u6267\u884ccomponentWillUnmount\u751f\u547d\u5468\u671f\u51fd\u6570**\n\n\n\n**React\u4e3b\u8981\u751f\u547d\u5468\u671f\u603b\u7ed3\uff1a**\n\n1. **getDefaultProps**\uff1a\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5728\u7ec4\u4ef6\u521b\u5efa\u4e4b\u524d\u88ab\u8c03\u7528\u4e00\u6b21\uff08\u6709\u4e14\u4ec5\u6709\u4e00\u6b21\uff09\uff0c\u5b83\u88ab\u7528\u6765\u521d\u59cb\u5316\u7ec4\u4ef6\u7684 Props\uff1b\n1. **getInitialState**\uff1a\u7528\u4e8e\u521d\u59cb\u5316\u7ec4\u4ef6\u7684 state \u503c\uff1b\n1. **componentWillMount**\uff1a\u5728\u7ec4\u4ef6\u521b\u5efa\u540e\u3001render \u4e4b\u524d\uff0c\u4f1a\u8d70\u5230 componentWillMount \u9636\u6bb5\u3002\u8fd9\u4e2a\u9636\u6bb5\u6211\u4e2a\u4eba\u4e00\u76f4\u6ca1\u7528\u8fc7\u3001\u975e\u5e38\u9e21\u808b\u3002\u540e\u6765React \u5b98\u65b9\u5df2\u7ecf\u4e0d\u63a8\u8350\u5927\u5bb6\u5728 componentWillMount \u91cc\u505a\u4efb\u4f55\u4e8b\u60c5\u3001\u5230\u73b0\u5728 **React16 \u76f4\u63a5\u5e9f\u5f03\u4e86\u8fd9\u4e2a\u751f\u547d\u5468\u671f**\uff0c\u8db3\u89c1\u5176\u9e21\u808b\u7a0b\u5ea6\u4e86\uff1b\n1. **render**\uff1a\u8fd9\u662f\u6240\u6709\u751f\u547d\u5468\u671f\u4e2d\u552f\u4e00\u4e00\u4e2a\u4f60\u5fc5\u987b\u8981\u5b9e\u73b0\u7684\u65b9\u6cd5\u3002\u4e00\u822c\u6765\u8bf4\u9700\u8981\u8fd4\u56de\u4e00\u4e2a jsx \u5143\u7d20\uff0c\u8fd9\u65f6 React \u4f1a\u6839\u636e props \u548c state \u6765\u628a\u7ec4\u4ef6\u6e32\u67d3\u5230\u754c\u9762\u4e0a\uff1b\u4e0d\u8fc7\u6709\u65f6\uff0c\u4f60\u53ef\u80fd\u4e0d\u60f3\u6e32\u67d3\u4efb\u4f55\u4e1c\u897f\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8ba9\u5b83\u8fd4\u56de null \u6216\u8005 false \u5373\u53ef\uff1b\n1. **componentDidMount**\uff1a\u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u540e\uff08\u63d2\u5165 DOM \u6811\u4e2d\u540e\uff09\u7acb\u5373\u8c03\u7528\uff0c\u6807\u5fd7\u7740\u7ec4\u4ef6\u6302\u8f7d\u5b8c\u6210\u3002\u4e00\u4e9b\u64cd\u4f5c\u5982\u679c\u4f9d\u8d56\u83b7\u53d6\u5230 DOM \u8282\u70b9\u4fe1\u606f\uff0c\u6211\u4eec\u5c31\u4f1a\u653e\u5728\u8fd9\u4e2a\u9636\u6bb5\u6765\u505a\u3002\u6b64\u5916\uff0c\u8fd9\u8fd8\u662f React \u5b98\u65b9\u63a8\u8350\u7684\u53d1\u8d77 ajax \u8bf7\u6c42\u7684\u65f6\u673a\u3002\u8be5\u65b9\u6cd5\u548c componentWillMount \u4e00\u6837\uff0c\u6709\u4e14\u4ec5\u6709\u4e00\u6b21\u8c03\u7528\u3002\n\n### 2. React \u5e9f\u5f03\u4e86\u54ea\u4e9b\u751f\u547d\u5468\u671f\uff1f\u4e3a\u4ec0\u4e48\uff1f\n\n\u88ab\u5e9f\u5f03\u7684\u4e09\u4e2a\u51fd\u6570\u90fd\u662f\u5728render\u4e4b\u524d\uff0c\u56e0\u4e3afber\u7684\u51fa\u73b0\uff0c\u5f88\u53ef\u80fd\u56e0\u4e3a\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u51fa\u73b0\u800c\u6253\u65ad\u73b0\u6709\u4efb\u52a1\u5bfc\u81f4\u5b83\u4eec\u4f1a\u88ab\u6267\u884c\u591a\u6b21\u3002\u53e6\u5916\u7684\u4e00\u4e2a\u539f\u56e0\u5219\u662f\uff0cReact\u60f3\u7ea6\u675f\u4f7f\u7528\u8005\uff0c\u597d\u7684\u6846\u67b6\u80fd\u591f\u8ba9\u4eba\u4e0d\u5f97\u5df2\u5199\u51fa\u5bb9\u6613\u7ef4\u62a4\u548c\u6269\u5c55\u7684\u4ee3\u7801\uff0c\u8fd9\u4e00\u70b9\u53c8\u662f\u4ece\u4f55\u8c08\u8d77\uff0c\u53ef\u4ee5\u4ece\u65b0\u589e\u52a0\u4ee5\u53ca\u5373\u5c06\u5e9f\u5f03\u7684\u751f\u547d\u5468\u671f\u5206\u6790\u5165\u624b\n\n**1) componentWillMount**\n\n\u9996\u5148\u8fd9\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528componentDidMount\u548c constructor\u6765\u4ee3\u66ff\uff0c\u5f02\u6b65\u83b7\u53d6\u7684\u6570\u636e\u7684\u60c5\u51b5\u4e0a\u9762\u5df2\u7ecf\u8bf4\u660e\u4e86\uff0c\u800c\u5982\u679c\u629b\u53bb\u5f02\u6b65\u83b7\u53d6\u6570\u636e\uff0c\u5176\u4f59\u7684\u5373\u662f\u521d\u59cb\u5316\u800c\u5df2\uff0c\u8fd9\u4e9b\u529f\u80fd\u90fd\u53ef\u4ee5\u5728constructor\u4e2d\u6267\u884c\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c\u5728 willMount \u4e2d\u8ba2\u9605\u4e8b\u4ef6\uff0c\u4f46\u5728\u670d\u52a1\u7aef\u8fd9\u5e76\u4e0d\u4f1a\u6267\u884c willUnMount\u4e8b\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\u670d\u52a1\u7aef\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\u6240\u4ee5componentWilIMount\u5b8c\u5168\u53ef\u4ee5\u4e0d\u4f7f\u7528\uff0c\u4f46\u4f7f\u7528\u8005\u6709\u65f6\u5019\u96be\u514d\u56e0\u4e3a\u5404 \u79cd\u5404\u6837\u7684\u60c5\u51b5\u5728 componentWilMount\u4e2d\u505a\u4e00\u4e9b\u64cd\u4f5c\uff0c\u90a3\u4e48React\u4e3a\u4e86\u7ea6\u675f\u5f00\u53d1\u8005\uff0c\u5e72\u8106\u5c31\u629b\u6389\u4e86\u8fd9\u4e2aAPI \n\n**2) componentWillReceiveProps**\n\n\u5728\u8001\u7248\u672c\u7684 React \u4e2d\uff0c\u5982\u679c\u7ec4\u4ef6\u81ea\u8eab\u7684\u67d0\u4e2a state \u8ddf\u5176 props \u5bc6\u5207\u76f8\u5173\u7684\u8bdd\uff0c\u4e00\u76f4\u90fd\u6ca1\u6709\u4e00\u79cd\u5f88\u4f18\u96c5\u7684\u5904\u7406\u65b9\u5f0f\u53bb\u66f4\u65b0 state\uff0c\u800c\u662f\u9700\u8981\u5728 componentWilReceiveProps \u4e2d\u5224\u65ad\u524d\u540e\u4e24\u4e2a props \u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u4e0d\u540c\u518d\u5c06\u65b0\u7684 props\u66f4\u65b0\u5230\u76f8\u5e94\u7684 state \u4e0a\u53bb\u3002\u8fd9\u6837\u505a\u4e00\u6765\u4f1a\u7834\u574f state \u6570\u636e\u7684\u5355\u4e00\u6570\u636e\u6e90\uff0c\u5bfc\u81f4\u7ec4\u4ef6\u72b6\u6001\u53d8\u5f97\u4e0d\u53ef\u9884\u6d4b\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u4f1a\u589e\u52a0\u7ec4\u4ef6\u7684\u91cd\u7ed8\u6b21\u6570\u3002\u7c7b\u4f3c\u7684\u4e1a\u52a1\u9700\u6c42\u4e5f\u6709\u5f88\u591a\uff0c\u5982\u4e00\u4e2a\u53ef\u4ee5\u6a2a\u5411\u6ed1\u52a8\u7684\u5217\u8868\uff0c\u5f53\u524d\u9ad8\u4eae\u7684 Tab \u663e\u7136\u96b6\u5c5e\u4e8e\u5217\u8868\u81ea\u8eab\u7684\u65f6\uff0c\u6839\u636e\u4f20\u5165\u7684\u67d0\u4e2a\u503c\uff0c\u76f4\u63a5\u5b9a\u4f4d\u5230\u67d0\u4e2a Tab\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0cReact\u5f15\u5165\u4e86\u7b2c\u4e00\u4e2a\u65b0\u7684\u751f\u547d\u5468\u671f\uff1agetDerivedStateFromProps\u3002\u5b83\u6709\u4ee5\u4e0b\u7684\u4f18\u70b9\u2236\n\n- getDSFP\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u5728\u8fd9\u91cc\u4e0d\u80fd\u4f7f\u7528this\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u5f00\u53d1\u8005\u4e0d\u80fd\u5199\u51fa\u526f\u4f5c\u7528\u7684\u4ee3\u7801\n- \u5f00\u53d1\u8005\u53ea\u80fd\u901a\u8fc7prevState\u800c\u4e0d\u662fprevProps\u6765\u505a\u5bf9\u6bd4\uff0c\u4fdd\u8bc1\u4e86state\u548cprops\u4e4b\u95f4\u7684\u7b80\u5355\u5173\u7cfb\u4ee5\u53ca\u4e0d\u9700\u8981\u5904\u7406\u7b2c\u4e00\u6b21\u6e32\u67d3\u65f6prevProps\u4e3a\u7a7a\u7684\u60c5\u51b5\n- \u57fa\u4e8e\u7b2c\u4e00\u70b9\uff0c\u5c06\u72b6\u6001\u53d8\u5316\uff08setState\uff09\u548c\u6602\u8d35\u64cd\u4f5c\uff08tabChange\uff09\u533a\u5206\u5f00\uff0c\u66f4\u52a0\u4fbf\u4e8e render \u548c commit \u9636\u6bb5\u64cd\u4f5c\u6216\u8005\u8bf4\u4f18\u5316\u3002 \n\n**3) componentWillUpdate**\n\n\u4e0e componentWillReceiveProps \u7c7b\u4f3c\uff0c\u8bb8\u591a\u5f00\u53d1\u8005\u4e5f\u4f1a\u5728 componentWillUpdate \u4e2d\u6839\u636e props \u7684\u53d8\u5316\u53bb\u89e6\u53d1\u4e00\u4e9b\u56de\u8c03 \u3002 \u4f46\u4e0d\u8bba\u662f componentWilReceiveProps \u8fd8 \u662f componentWilUpdate\uff0c\u90fd\u6709\u53ef\u80fd\u5728\u4e00\u6b21\u66f4\u65b0\u4e2d\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u4e5f\u5c31\u662f\u8bf4\u5199\u5728\u8fd9\u91cc\u7684\u56de\u8c03\u51fd\u6570\u4e5f\u6709\u53ef\u80fd\u4f1a\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u53ef\u53d6\u7684\u3002\u4e0e componentDidMount \u7c7b \u4f3c\uff0c componentDidUpdate \u4e5f\u4e0d\u5b58\u5728\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u4e00\u6b21\u66f4\u65b0\u4e2d componentDidUpdate \u53ea\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u6240\u4ee5\u5c06\u539f\u5148\u5199\u5728 componentWillUpdate \u4e2d \u7684 \u56de \u8c03 \u8fc1 \u79fb \u81f3 componentDidUpdate \u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\n\u53e6\u5916\u4e00\u79cd\u60c5\u51b5\u5219\u662f\u9700\u8981\u83b7\u53d6DOM\u5143\u7d20\u72b6\u6001\uff0c\u4f46\u662f\u7531\u4e8e\u5728fber\u4e2d\uff0crender\u53ef\u6253\u65ad\uff0c\u53ef\u80fd\u5728wilMount\u4e2d\u83b7\u53d6\u5230\u7684\u5143\u7d20\u72b6\u6001\u5f88\u53ef\u80fd\u4e0e\u5b9e\u9645\u9700\u8981\u7684\u4e0d\u540c\uff0c\u8fd9\u4e2a\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u65b0\u589e\u7684\u751f\u547d\u51fd\u6570\u7684\u89e3\u51b3 getSnapshotBeforeUpdate(prevProps, prevState)\n\n**4) getSnapshotBeforeUpdate(prevProps, prevState)**\n\n\u8fd4\u56de\u7684\u503c\u4f5c\u4e3acomponentDidUpdate\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u3002\u4e0ewillMount\u4e0d\u540c\u7684\u662f\uff0cgetSnapshotBeforeUpdate\u4f1a\u5728\u6700\u7ec8\u786e\u5b9a\u7684render\u6267\u884c\u4e4b\u524d\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u80fd\u4fdd\u8bc1\u5176\u83b7\u53d6\u5230\u7684\u5143\u7d20\u72b6\u6001\u4e0edidUpdate\u4e2d\u83b7\u53d6\u5230\u7684\u5143\u7d20\u72b6\u6001\u76f8\u540c\u3002\u5b98\u65b9\u53c2\u8003\u4ee3\u7801\uff1a\n\n```javascript\nclass ScrollingList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.listRef = React.createRef();\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    // \u6211\u4eec\u662f\u5426\u5728 list \u4e2d\u6dfb\u52a0\u65b0\u7684 items \uff1f\n    // \u6355\u83b7\u6eda\u52a8\u200b\u200b\u4f4d\u7f6e\u4ee5\u4fbf\u6211\u4eec\u7a0d\u540e\u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u3002\n    if (prevProps.list.length < this.props.list.length) {\n      const list = this.listRef.current;\n      return list.scrollHeight - list.scrollTop;\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // \u5982\u679c\u6211\u4eec snapshot \u6709\u503c\uff0c\u8bf4\u660e\u6211\u4eec\u521a\u521a\u6dfb\u52a0\u4e86\u65b0\u7684 items\uff0c\n    // \u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u4f7f\u5f97\u8fd9\u4e9b\u65b0 items \u4e0d\u4f1a\u5c06\u65e7\u7684 items \u63a8\u51fa\u89c6\u56fe\u3002\n    //\uff08\u8fd9\u91cc\u7684 snapshot \u662f getSnapshotBeforeUpdate \u7684\u8fd4\u56de\u503c\uff09\n    if (snapshot !== null) {\n      const list = this.listRef.current;\n      list.scrollTop = list.scrollHeight - snapshot;\n    }\n  }\n\n  render() {\n    return (\n      <div ref={this.listRef}>{/* ...contents... */}</div>\n    );\n  }\n}\n```\n\n### 3. React 16.X \u4e2d props \u6539\u53d8\u540e\u5728\u54ea\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u5904\u7406\n\n**\u5728getDerivedStateFromProps\u4e2d\u8fdb\u884c\u5904\u7406\u3002**\n\n\n\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u662f\u4e3a\u4e86\u66ff\u4ee3`componentWillReceiveProps`\u5b58\u5728\u7684\uff0c\u6240\u4ee5\u5728\u9700\u8981\u4f7f\u7528`componentWillReceiveProps`\u65f6\uff0c\u5c31\u53ef\u4ee5\u8003\u8651\u4f7f\u7528`getDerivedStateFromProps`\u6765\u8fdb\u884c\u66ff\u4ee3\u3002\n\n\n\u4e24\u8005\u7684\u53c2\u6570\u662f\u4e0d\u76f8\u540c\u7684\uff0c\u800c`getDerivedStateFromProps`\u662f\u4e00\u4e2a\u9759\u6001\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u4e0d\u80fd\u901a\u8fc7this\u8bbf\u95ee\u5230class\u7684\u5c5e\u6027\uff0c\u4e5f\u5e76\u4e0d\u63a8\u8350\u76f4\u63a5\u8bbf\u95ee\u5c5e\u6027\u3002\u800c\u662f\u5e94\u8be5\u901a\u8fc7\u53c2\u6570\u63d0\u4f9b\u7684nextProps\u4ee5\u53caprevState\u6765\u8fdb\u884c\u5224\u65ad\uff0c\u6839\u636e\u65b0\u4f20\u5165\u7684props\u6765\u6620\u5c04\u5230state\u3002\n\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c**\u5982\u679cprops\u4f20\u5165\u7684\u5185\u5bb9\u4e0d\u9700\u8981\u5f71\u54cd\u5230\u4f60\u7684state\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8fd4\u56de\u4e00\u4e2anull**\uff0c\u8fd9\u4e2a\u8fd4\u56de\u503c\u662f\u5fc5\u987b\u7684\uff0c\u6240\u4ee5\u5c3d\u91cf\u5c06\u5176\u5199\u5230\u51fd\u6570\u7684\u672b\u5c3e\uff1a\n\n```javascript\nstatic getDerivedStateFromProps(nextProps, prevState) {\n    const {type} = nextProps;\n    // \u5f53\u4f20\u5165\u7684type\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u66f4\u65b0state\n    if (type !== prevState.type) {\n        return {\n            type,\n        };\n    }\n    // \u5426\u5219\uff0c\u5bf9\u4e8estate\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\n    return null;\n}\n```\n\n### 4. React \u6027\u80fd\u4f18\u5316\u5728\u54ea\u4e2a\u751f\u547d\u5468\u671f\uff1f\u5b83\u4f18\u5316\u7684\u539f\u7406\u662f\u4ec0\u4e48\uff1f\n\nreact\u7684\u7236\u7ea7\u7ec4\u4ef6\u7684render\u51fd\u6570\u91cd\u65b0\u6e32\u67d3\u4f1a\u5f15\u8d77\u5b50\u7ec4\u4ef6\u7684render\u65b9\u6cd5\u7684\u91cd\u65b0\u6e32\u67d3\u3002\u4f46\u662f\uff0c\u6709\u7684\u65f6\u5019\u5b50\u7ec4\u4ef6\u7684\u63a5\u53d7\u7236\u7ec4\u4ef6\u7684\u6570\u636e\u6ca1\u6709\u53d8\u52a8\u3002\u5b50\u7ec4\u4ef6render\u7684\u6267\u884c\u4f1a\u5f71\u54cd\u6027\u80fd\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528shouldComponentUpdate\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\n\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a\n\n```javascript\nshouldComponentUpdate(nexrProps) {\n    if (this.props.num === nexrProps.num) {\n        return false\n    }\n    return true;\n}\n```\n\nshouldComponentUpdate\u63d0\u4f9b\u4e86\u4e24\u4e2a\u53c2\u6570nextProps\u548cnextState\uff0c\u8868\u793a\u4e0b\u4e00\u6b21props\u548c\u4e00\u6b21state\u7684\u503c\uff0c\u5f53\u51fd\u6570\u8fd4\u56defalse\u65f6\u5019\uff0crender()\u65b9\u6cd5\u4e0d\u6267\u884c\uff0c\u7ec4\u4ef6\u4e5f\u5c31\u4e0d\u4f1a\u6e32\u67d3\uff0c\u8fd4\u56detrue\u65f6\uff0c\u7ec4\u4ef6\u7167\u5e38\u91cd\u6e32\u67d3\u3002\u6b64\u65b9\u6cd5\u5c31\u662f\u62ff\u5f53\u524dprops\u4e2d\u503c\u548c\u4e0b\u4e00\u6b21props\u4e2d\u7684\u503c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u6570\u636e\u76f8\u7b49\u65f6\uff0c\u8fd4\u56defalse\uff0c\u53cd\u4e4b\u8fd4\u56detrue\u3002\n\n\n\u9700\u8981\u6ce8\u610f\uff0c\u5728\u8fdb\u884c\u65b0\u65e7\u5bf9\u6bd4\u7684\u65f6\u5019\uff0c\u662f**\u6d45\u5bf9\u6bd4\uff0c**\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u6bd4\u8f83\u7684\u6570\u636e\u65f6\u5f15\u7528\u6570\u636e\u7c7b\u578b\uff0c\u53ea\u8981\u6570\u636e\u7684\u5f15\u7528\u7684\u5730\u5740\u6ca1\u53d8\uff0c\u5373\u4f7f\u5185\u5bb9\u53d8\u4e86\uff0c\u4e5f\u4f1a\u88ab\u5224\u5b9a\u4e3atrue\u3002\n\n\n\u9762\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u6cd5\u8fdb\u884c\u89e3\u51b3\uff1a\n\uff081\uff09\u4f7f\u7528setState\u6539\u53d8\u6570\u636e\u4e4b\u524d\uff0c\u5148\u91c7\u7528ES6\u4e2dassgin\u8fdb\u884c\u62f7\u8d1d\uff0c\u4f46\u662fassgin\u53ea\u6df1\u62f7\u8d1d\u7684\u6570\u636e\u7684\u7b2c\u4e00\u5c42\uff0c\u6240\u4ee5\u8bf4\u4e0d\u662f\u6700\u5b8c\u7f8e\u7684\u89e3\u51b3\u529e\u6cd5\uff1a\n\n```javascript\nconst o2 = Object.assign({},this.state.obj)\n    o2.student.count = '00000';\n    this.setState({\n        obj: o2,\n    })\n```\n\n\uff082\uff09\u4f7f\u7528JSON.parse(JSON.stringfy())\u8fdb\u884c\u6df1\u62f7\u8d1d\uff0c\u4f46\u662f\u9047\u5230\u6570\u636e\u4e3aundefined\u548c\u51fd\u6570\u65f6\u5c31\u4f1a\u9519\u3002\n\n```javascript\nconst o2 = JSON.parse(JSON.stringify(this.state.obj))\n    o2.student.count = '00000';\n    this.setState({\n        obj: o2,\n    })\n```\n\n### 5. state \u548c props \u89e6\u53d1\u66f4\u65b0\u7684\u751f\u547d\u5468\u671f\u5206\u522b\u6709\u4ec0\u4e48\u533a\u522b\uff1f\n\n**state \u66f4\u65b0\u6d41\u7a0b\uff1a**\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1451ff964c89442c9384478e494ce283~tplv-k3u1fbpfcp-zoom-1.image)\n\u8fd9\u4e2a\u8fc7\u7a0b\u5f53\u4e2d\u6d89\u53ca\u7684\u51fd\u6570\uff1a\n\n1. shouldComponentUpdate: \u5f53\u7ec4\u4ef6\u7684 state \u6216 props \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u90fd\u4f1a\u9996\u5148\u89e6\u53d1\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u5b83\u4f1a\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1anextProps, nextState\u2014\u2014\u5b83\u4eec\u5206\u522b\u4ee3\u8868\u4f20\u5165\u7684\u65b0 props \u548c\u65b0\u7684 state \u503c\u3002\u62ff\u5230\u8fd9\u4e24\u4e2a\u503c\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u5bf9\u6bd4\u903b\u8f91\u6765\u51b3\u5b9a\u662f\u5426\u6709 re-render\uff08\u91cd\u6e32\u67d3\uff09\u7684\u5fc5\u8981\u4e86\u3002\u5982\u679c\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e3a false\uff0c\u5219\u751f\u547d\u5468\u671f\u7ec8\u6b62\uff0c\u53cd\u4e4b\u7ee7\u7eed\uff1b\n\n> \u6ce8\u610f\uff1a\u6b64\u65b9\u6cd5\u4ec5\u4f5c\u4e3a**\u6027\u80fd\u4f18\u5316\u7684\u65b9\u5f0f**\u800c\u5b58\u5728\u3002\u4e0d\u8981\u4f01\u56fe\u4f9d\u9760\u6b64\u65b9\u6cd5\u6765\u201c\u963b\u6b62\u201d\u6e32\u67d3\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f bug\u3002\u5e94\u8be5**\u8003\u8651\u4f7f\u7528\u5185\u7f6e\u7684 PureComponent \u7ec4\u4ef6**\uff0c\u800c\u4e0d\u662f\u624b\u52a8\u7f16\u5199 `shouldComponentUpdate()`\n\n2. componentWillUpdate\uff1a\u5f53\u7ec4\u4ef6\u7684 state \u6216 props \u53d1\u751f\u6539\u53d8\u65f6\uff0c\u4f1a\u5728\u6e32\u67d3\u4e4b\u524d\u8c03\u7528 componentWillUpdate\u3002componentWillUpdate **\u662f React16 \u5e9f\u5f03\u7684\u4e09\u4e2a\u751f\u547d\u5468\u671f\u4e4b\u4e00**\u3002\u8fc7\u53bb\uff0c\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u80fd\u5728\u8fd9\u4e2a\u9636\u6bb5\u53bb\u6536\u96c6\u4e00\u4e9b\u5fc5\u8981\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u66f4\u65b0\u524d\u7684 DOM \u4fe1\u606f\u7b49\u7b49\uff09\uff0c\u73b0\u5728\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5728 React16 \u7684 getSnapshotBeforeUpdate \u4e2d\u53bb\u505a\u8fd9\u4e9b\u4e8b\uff1b\n2. componentDidUpdate\uff1acomponentDidUpdate() \u4f1a\u5728UI\u66f4\u65b0\u540e\u4f1a\u88ab\u7acb\u5373\u8c03\u7528\u3002\u5b83\u63a5\u6536 prevProps\uff08\u4e0a\u4e00\u6b21\u7684 props \u503c\uff09\u4f5c\u4e3a\u5165\u53c2\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728\u6b64\u5904\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u8fdb\u884c props \u503c\u5bf9\u6bd4\uff08\u518d\u6b21\u8bf4\u660e componentWillUpdate \u786e\u5b9e\u9e21\u808b\u54c8\uff09\u3002\n\n**\u200b**\n\n**props \u66f4\u65b0\u6d41\u7a0b\uff1a**\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/774a110865454a7b8cdc5a01562b9d0c~tplv-k3u1fbpfcp-zoom-1.image)\n\u76f8\u5bf9\u4e8e state \u66f4\u65b0\uff0cprops \u66f4\u65b0\u540e\u552f\u4e00\u7684\u533a\u522b\u662f\u589e\u52a0\u4e86\u5bf9 componentWillReceiveProps \u7684\u8c03\u7528\u3002\u5173\u4e8e componentWillReceiveProps\uff0c\u9700\u8981\u77e5\u9053\u8fd9\u4e9b\u4e8b\u60c5\uff1a\n\n- componentWillReceiveProps\uff1a\u5b83\u5728Component\u63a5\u53d7\u5230\u65b0\u7684 props \u65f6\u88ab\u89e6\u53d1\u3002componentWillReceiveProps \u4f1a\u63a5\u6536\u4e00\u4e2a\u540d\u4e3a nextProps \u7684\u53c2\u6570\uff08\u5bf9\u5e94\u65b0\u7684 props \u503c\uff09\u3002**\u8be5\u751f\u547d\u5468\u671f\u662f React16 \u5e9f\u5f03\u6389\u7684\u4e09\u4e2a\u751f\u547d\u5468\u671f\u4e4b\u4e00**\u3002\u5728\u5b83\u88ab\u5e9f\u5f03\u524d\uff0c\u53ef\u4ee5\u7528\u5b83\u6765\u6bd4\u8f83 this.props \u548c nextProps \u6765\u91cd\u65b0setState\u3002\u5728 React16 \u4e2d\uff0c\u7528\u4e00\u4e2a\u7c7b\u4f3c\u7684\u65b0\u751f\u547d\u5468\u671f getDerivedStateFromProps \u6765\u4ee3\u66ff\u5b83\u3002\n\n### 6. React\u4e2d\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42\u5e94\u8be5\u5728\u54ea\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u8fdb\u884c\uff1f\u4e3a\u4ec0\u4e48\uff1f\n\n\u5bf9\u4e8e\u5f02\u6b65\u8bf7\u6c42\uff0c\u6700\u597d\u653e\u5728componentDidMount\u4e2d\u53bb\u64cd\u4f5c\uff0c\u5bf9\u4e8e\u540c\u6b65\u7684\u72b6\u6001\u6539\u53d8\uff0c\u53ef\u4ee5\u653e\u5728componentWillMount\u4e2d\uff0c\u4e00\u822c\u7528\u7684\u6bd4\u8f83\u5c11\u3002\n\n\n\u5982\u679c\u8ba4\u4e3a\u5728componentWillMount\u91cc\u53d1\u8d77\u8bf7\u6c42\u80fd\u63d0\u65e9\u83b7\u5f97\u7ed3\u679c\uff0c\u8fd9\u79cd\u60f3\u6cd5\u5176\u5b9e\u662f\u9519\u8bef\u7684\uff0c\u901a\u5e38componentWillMount\u6bd4componentDidMount\u65e9\u4e0d\u4e86\u591a\u5c11\u5fae\u79d2\uff0c\u7f51\u7edc\u4e0a\u4efb\u4f55\u4e00\u70b9\u5ef6\u8fdf\uff0c\u8fd9\u4e00\u70b9\u5dee\u5f02\u90fd\u53ef\u5ffd\u7565\u4e0d\u8ba1\u3002\n\n\n**react\u7684\u751f\u547d\u5468\u671f\uff1a** constructor() -> componentWillMount() -> render() -> componentDidMount()\n\n\n\u4e0a\u9762\u8fd9\u4e9b\u65b9\u6cd5\u7684\u8c03\u7528\u662f\u6709\u6b21\u5e8f\u7684\uff0c\u7531\u4e0a\u800c\u4e0b\u4f9d\u6b21\u8c03\u7528\u3002\n\n- constructor\u88ab\u8c03\u7528\u662f\u5728\u7ec4\u4ef6\u51c6\u5907\u8981\u6302\u8f7d\u7684\u6700\u5f00\u59cb\uff0c\u6b64\u65f6\u7ec4\u4ef6\u5c1a\u672a\u6302\u8f7d\u5230\u7f51\u9875\u4e0a\u3002\n- componentWillMount\u65b9\u6cd5\u7684\u8c03\u7528\u5728constructor\u4e4b\u540e\uff0c\u5728render\u4e4b\u524d\uff0c\u5728\u8fd9\u65b9\u6cd5\u91cc\u7684\u4ee3\u7801\u8c03\u7528setState\u65b9\u6cd5\u4e0d\u4f1a\u89e6\u53d1\u91cd\u65b0render\uff0c\u6240\u4ee5\u5b83\u4e00\u822c\u4e0d\u4f1a\u7528\u6765\u4f5c\u52a0\u8f7d\u6570\u636e\u4e4b\u7528\u3002\n- componentDidMount\u65b9\u6cd5\u4e2d\u7684\u4ee3\u7801\uff0c\u662f\u5728\u7ec4\u4ef6\u5df2\u7ecf\u5b8c\u5168\u6302\u8f7d\u5230\u7f51\u9875\u4e0a\u624d\u4f1a\u8c03\u7528\u88ab\u6267\u884c\uff0c\u6240\u4ee5\u53ef\u4ee5\u4fdd\u8bc1\u6570\u636e\u7684\u52a0\u8f7d\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u65b9\u6cd5\u4e2d\u8c03\u7528setState\u65b9\u6cd5\uff0c\u4f1a\u89e6\u53d1\u91cd\u65b0\u6e32\u67d3\u3002\u6240\u4ee5\uff0c\u5b98\u65b9\u8bbe\u8ba1\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u7528\u6765\u52a0\u8f7d\u5916\u90e8\u6570\u636e\u7528\u7684\uff0c\u6216\u5904\u7406\u5176\u4ed6\u7684\u526f\u4f5c\u7528\u4ee3\u7801\u3002\u4e0e\u7ec4\u4ef6\u4e0a\u7684\u6570\u636e\u65e0\u5173\u7684\u52a0\u8f7d\uff0c\u4e5f\u53ef\u4ee5\u5728constructor\u91cc\u505a\uff0c\u4f46constructor\u662f\u505a\u7ec4\u4ef6state\u521d\u7ed0\u5316\u5de5\u4f5c\uff0c\u5e76\u4e0d\u662f\u505a\u52a0\u8f7d\u6570\u636e\u8fd9\u5de5\u4f5c\u7684\uff0cconstructor\u91cc\u4e5f\u4e0d\u80fdsetState\uff0c\u8fd8\u6709\u52a0\u8f7d\u7684\u65f6\u95f4\u592a\u957f\u6216\u8005\u51fa\u9519\uff0c\u9875\u9762\u5c31\u65e0\u6cd5\u52a0\u8f7d\u51fa\u6765\u3002\u6240\u4ee5\u6709\u526f\u4f5c\u7528\u7684\u4ee3\u7801\u90fd\u4f1a\u96c6\u4e2d\u5728componentDidMount\u65b9\u6cd5\u91cc\u3002\n\n\n\n\u603b\u7ed3\uff1a\n\n- \u8ddf\u670d\u52a1\u5668\u7aef\u6e32\u67d3\uff08\u540c\u6784\uff09\u6709\u5173\u7cfb\uff0c\u5982\u679c\u5728componentWillMount\u91cc\u9762\u83b7\u53d6\u6570\u636e\uff0cfetch data\u4f1a\u6267\u884c\u4e24\u6b21\uff0c\u4e00\u6b21\u5728\u670d\u52a1\u5668\u7aef\u4e00\u6b21\u5728\u5ba2\u6237\u7aef\u3002\u5728componentDidMount\u4e2d\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0ccomponentWillMount\u540c\u6837\u4e5f\u4f1arender\u4e24\u6b21\u3002\n- \u5728componentWillMount\u4e2dfetch data\uff0c\u6570\u636e\u4e00\u5b9a\u5728render\u540e\u624d\u80fd\u5230\u8fbe\uff0c\u5982\u679c\u5fd8\u8bb0\u4e86\u8bbe\u7f6e\u521d\u59cb\u72b6\u6001\uff0c\u7528\u6237\u4f53\u9a8c\u4e0d\u597d\u3002\n- react16.0\u4ee5\u540e\uff0ccomponentWillMount\u53ef\u80fd\u4f1a\u88ab\u6267\u884c\u591a\u6b21\u3002\n\n### 7. React 16\u4e2d\u65b0\u751f\u547d\u5468\u671f\u6709\u54ea\u4e9b\n\n\u5173\u4e8e React16 \u5f00\u59cb\u5e94\u7528\u7684\u65b0\u751f\u547d\u5468\u671f\uff1a\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2f59925a79e470eb730e605854e81b8~tplv-k3u1fbpfcp-zoom-1.image)\n\u53ef\u4ee5\u770b\u51fa\uff0cReact16 \u81ea\u4e0a\u800c\u4e0b\u5730\u5bf9\u751f\u547d\u5468\u671f\u505a\u4e86\u53e6\u4e00\u79cd\u7ef4\u5ea6\u7684\u89e3\u8bfb\uff1a\n\n- **Render \u9636\u6bb5**\uff1a\u7528\u4e8e\u8ba1\u7b97\u4e00\u4e9b\u5fc5\u8981\u7684\u72b6\u6001\u4fe1\u606f\u3002\u8fd9\u4e2a\u9636\u6bb5\u53ef\u80fd\u4f1a\u88ab React \u6682\u505c\uff0c\u8fd9\u4e00\u70b9\u548c React16 \u5f15\u5165\u7684 Fiber \u67b6\u6784\uff08\u6211\u4eec\u540e\u9762\u4f1a\u91cd\u70b9\u8bb2\u89e3\uff09\u662f\u6709\u5173\u7684\uff1b\n- **Pre-commit\u9636\u6bb5**\uff1a\u6240\u8c13\u201ccommit\u201d\uff0c\u8fd9\u91cc\u6307\u7684\u662f\u201c\u66f4\u65b0\u771f\u6b63\u7684 DOM \u8282\u70b9\u201d\u8fd9\u4e2a\u52a8\u4f5c\u3002\u6240\u8c13 Pre-commit\uff0c\u5c31\u662f\u8bf4\u6211\u5728\u8fd9\u4e2a\u9636\u6bb5\u5176\u5b9e\u8fd8\u5e76\u6ca1\u6709\u53bb\u66f4\u65b0\u771f\u5b9e\u7684 DOM\uff0c\u4e0d\u8fc7 DOM \u4fe1\u606f\u5df2\u7ecf\u662f\u53ef\u4ee5\u8bfb\u53d6\u7684\u4e86\uff1b\n- **Commit \u9636\u6bb5**\uff1a\u5728\u8fd9\u4e00\u6b65\uff0cReact \u4f1a\u5b8c\u6210\u771f\u5b9e DOM \u7684\u66f4\u65b0\u5de5\u4f5c\u3002Commit \u9636\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u771f\u5b9e DOM\uff08\u5305\u62ec refs\uff09\u3002\n\n\n\n\u4e0e\u6b64\u540c\u65f6\uff0c\u65b0\u7684\u751f\u547d\u5468\u671f\u5728\u6d41\u7a0b\u65b9\u9762\uff0c\u4ecd\u7136\u9075\u5faa\u201c\u6302\u8f7d\u201d\u3001\u201c\u66f4\u65b0\u201d\u3001\u201c\u5378\u8f7d\u201d\u8fd9\u4e09\u4e2a\u5e7f\u4e49\u7684\u5212\u5206\u65b9\u5f0f\u3002\u5b83\u4eec\u5206\u522b\u5bf9\u5e94\u5230\uff1a\n\n- \u6302\u8f7d\u8fc7\u7a0b\uff1a\n  - **constructor**\n  - **getDerivedStateFromProps**\n  - **render**\n  - **componentDidMount**\n- \u66f4\u65b0\u8fc7\u7a0b\uff1a\n  - **getDerivedStateFromProps**\n  - **shouldComponentUpdate**\n  - **render**\n  - **getSnapshotBeforeUpdate**\n  - **componentDidUpdate**\n- \u5378\u8f7d\u8fc7\u7a0b\uff1a\n  - **componentWillUnmount**\n\n## \u56db\u3001\u7ec4\u4ef6\u901a\u4fe1\n\nReact\u7ec4\u4ef6\u95f4\u901a\u4fe1\u5e38\u89c1\u7684\u51e0\u79cd\u60c5\u51b5:\n\n- \u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u901a\u4fe1\n- \u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u901a\u4fe1\n- \u8de8\u7ea7\u7ec4\u4ef6\u901a\u4fe1\n- \u975e\u5d4c\u5957\u5173\u7cfb\u7684\u7ec4\u4ef6\u901a\u4fe1\n\n### 1. \u7236\u5b50\u7ec4\u4ef6\u7684\u901a\u4fe1\u65b9\u5f0f\uff1f\n\n**\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u901a\u4fe1**\uff1a\u7236\u7ec4\u4ef6\u901a\u8fc7 props \u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u9700\u8981\u7684\u4fe1\u606f\u3002\n\n```javascript\n// \u5b50\u7ec4\u4ef6: Child\nconst Child = props =>{\n  return <p>{props.name}</p>\n}\n// \u7236\u7ec4\u4ef6 Parent\nconst Parent = ()=>{\n    return <Child name=\"react\"></Child>\n}\n```\n\n**\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u901a\u4fe1**\uff1a: props+\u56de\u8c03\u7684\u65b9\u5f0f\u3002\n\n```javascript\n// \u5b50\u7ec4\u4ef6: Child\nconst Child = props =>{\n  const cb = msg =>{\n      return ()=>{\n          props.callback(msg)\n      }\n  }\n  return (\n      <button onClick={cb(\"\u4f60\u597d!\")}>\u4f60\u597d</button>\n  )\n}\n// \u7236\u7ec4\u4ef6 Parent\nclass Parent extends Component {\n    callback(msg){\n        console.log(msg)\n    }\n    render(){\n        return <Child callback={this.callback.bind(this)}></Child>    \n    }\n}\n```\n\n### 2. \u8de8\u7ea7\u7ec4\u4ef6\u7684\u901a\u4fe1\u65b9\u5f0f\uff1f\n\n\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u7684\u5b50\u7ec4\u4ef6\u901a\u4fe1\uff0c\u5411\u66f4\u6df1\u5c42\u5b50\u7ec4\u4ef6\u901a\u4fe1\uff1a\n\n- \u4f7f\u7528props\uff0c\u5229\u7528\u4e2d\u95f4\u7ec4\u4ef6\u5c42\u5c42\u4f20\u9012,\u4f46\u662f\u5982\u679c\u7236\u7ec4\u4ef6\u7ed3\u6784\u8f83\u6df1\uff0c\u90a3\u4e48\u4e2d\u95f4\u6bcf\u4e00\u5c42\u7ec4\u4ef6\u90fd\u8981\u53bb\u4f20\u9012props\uff0c\u589e\u52a0\u4e86\u590d\u6742\u5ea6\uff0c\u5e76\u4e14\u8fd9\u4e9bprops\u5e76\u4e0d\u662f\u4e2d\u95f4\u7ec4\u4ef6\u81ea\u5df1\u9700\u8981\u7684\u3002\n- \u4f7f\u7528context\uff0ccontext\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5927\u5bb9\u5668\uff0c\u53ef\u4ee5\u628a\u8981\u901a\u4fe1\u7684\u5185\u5bb9\u653e\u5728\u8fd9\u4e2a\u5bb9\u5668\u4e2d\uff0c\u8fd9\u6837\u4e0d\u7ba1\u5d4c\u5957\u591a\u6df1\uff0c\u90fd\u53ef\u4ee5\u968f\u610f\u53d6\u7528\uff0c\u5bf9\u4e8e\u8de8\u8d8a\u591a\u5c42\u7684\u5168\u5c40\u6570\u636e\u53ef\u4ee5\u4f7f\u7528context\u5b9e\u73b0\u3002\n\n```javascript\n// context\u65b9\u5f0f\u5b9e\u73b0\u8de8\u7ea7\u7ec4\u4ef6\u901a\u4fe1 \n// Context \u8bbe\u8ba1\u76ee\u7684\u662f\u4e3a\u4e86\u5171\u4eab\u90a3\u4e9b\u5bf9\u4e8e\u4e00\u4e2a\u7ec4\u4ef6\u6811\u800c\u8a00\u662f\u201c\u5168\u5c40\u201d\u7684\u6570\u636e\nconst BatteryContext = createContext();\n//  \u5b50\u7ec4\u4ef6\u7684\u5b50\u7ec4\u4ef6 \nclass GrandChild extends Component {\n    render(){\n        return (\n            <BatteryContext.Consumer>\n                {\n                    color => <h1 style={{\"color\":color}}>\u6211\u662f\u7ea2\u8272\u7684:{color}</h1>\n                }\n            </BatteryContext.Consumer>\n        )\n    }\n}\n//  \u5b50\u7ec4\u4ef6\nconst Child = () =>{\n    return (\n        <GrandChild/>\n    )\n}\n// \u7236\u7ec4\u4ef6\nclass Parent extends Component {\n      state = {\n          color:\"red\"\n      }\n      render(){\n          const {color} = this.state\n          return (\n          <BatteryContext.Provider value={color}>\n              <Child></Child>\n          </BatteryContext.Provider>\n          )\n      }\n}\n```\n\n### \n### 3. \u975e\u5d4c\u5957\u5173\u7cfb\u7ec4\u4ef6\u7684\u901a\u4fe1\u65b9\u5f0f\uff1f\n\n\u5373\u6ca1\u6709\u4efb\u4f55\u5305\u542b\u5173\u7cfb\u7684\u7ec4\u4ef6\uff0c\u5305\u62ec\u5144\u5f1f\u7ec4\u4ef6\u4ee5\u53ca\u4e0d\u5728\u540c\u4e00\u4e2a\u7236\u7ea7\u4e2d\u7684\u975e\u5144\u5f1f\u7ec4\u4ef6\u3002\n\n- \u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u901a\u4fe1\uff08\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff09\n- \u53ef\u4ee5\u901a\u8fc7redux\u7b49\u8fdb\u884c\u5168\u5c40\u72b6\u6001\u7ba1\u7406\n- \u5982\u679c\u662f\u5144\u5f1f\u7ec4\u4ef6\u901a\u4fe1\uff0c\u53ef\u4ee5\u627e\u5230\u8fd9\u4e24\u4e2a\u5144\u5f1f\u8282\u70b9\u5171\u540c\u7684\u7236\u8282\u70b9, \u7ed3\u5408\u7236\u5b50\u95f4\u901a\u4fe1\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002\n\n### 4. \u5982\u4f55\u89e3\u51b3 props \u5c42\u7ea7\u8fc7\u6df1\u7684\u95ee\u9898\n\n- \u4f7f\u7528Context API\uff1a\u63d0\u4f9b\u4e00\u79cd\u7ec4\u4ef6\u4e4b\u95f4\u7684\u72b6\u6001\u5171\u4eab\uff0c\u800c\u4e0d\u5fc5\u901a\u8fc7\u663e\u5f0f\u7ec4\u4ef6\u6811\u9010\u5c42\u4f20\u9012props\uff1b\n- \u4f7f\u7528Redux\u7b49\u72b6\u6001\u5e93\u3002\n\n### 5. \u7ec4\u4ef6\u901a\u4fe1\u7684\u65b9\u5f0f\u6709\u54ea\u4e9b\n\n- **\u2f57\u7ec4\u4ef6\u5411\u2f26\u7ec4\u4ef6\u901a\u8baf**: \u2f57\u7ec4\u4ef6\u53ef\u4ee5\u5411\u2f26\u7ec4\u4ef6\u901a\u8fc7\u4f20 props \u7684\u2f45\u5f0f\uff0c\u5411\u2f26\u7ec4\u4ef6\u8fdb\u2f8f\u901a\u8baf \n- **\u2f26\u7ec4\u4ef6\u5411\u2f57\u7ec4\u4ef6\u901a\u8baf**: props+\u56de\u8c03\u7684\u2f45\u5f0f\uff0c\u2f57\u7ec4\u4ef6\u5411\u2f26\u7ec4\u4ef6\u4f20\u9012props\u8fdb\u2f8f\u901a\u8baf\uff0c\u6b64props\u4e3a\u4f5c\u2f64\u57df\u4e3a\u2f57\u7ec4\u4ef6\u2f83\u8eab\u7684\u51fd \u6570\uff0c\u2f26\u7ec4\u4ef6\u8c03\u2f64\u8be5\u51fd\u6570\uff0c\u5c06\u2f26\u7ec4\u4ef6\u60f3\u8981\u4f20\u9012\u7684\u4fe1\u606f\uff0c\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f20\u9012\u5230\u2f57\u7ec4\u4ef6\u7684\u4f5c\u2f64\u57df\u4e2d \n- **\u5144\u5f1f\u7ec4\u4ef6\u901a\u4fe1**: \u627e\u5230\u8fd9\u4e24\u4e2a\u5144\u5f1f\u8282\u70b9\u5171\u540c\u7684\u2f57\u8282\u70b9,\u7ed3\u5408\u4e0a\u2faf\u4e24\u79cd\u2f45\u5f0f\u7531\u2f57\u8282\u70b9\u8f6c\u53d1\u4fe1\u606f\u8fdb\u2f8f\u901a\u4fe1 \n- **\u8de8\u5c42\u7ea7\u901a\u4fe1**: Context \u8bbe\u8ba1\u2f6c\u7684\u662f\u4e3a\u4e86\u5171\u4eab\u90a3\u4e9b\u5bf9\u4e8e\u2f00\u4e2a\u7ec4\u4ef6\u6811\u2f7d\u2f94\u662f\u201c\u5168\u5c40\u201d\u7684\u6570\u636e\uff0c\u4f8b\u5982\u5f53\u524d\u8ba4\u8bc1\u7684\u2f64\u6237\u3001\u4e3b\u9898\u6216\u2fb8\u9009\u8bed\u2f94\uff0c\u5bf9\u4e8e\u8de8\u8d8a\u591a\u5c42\u7684\u5168\u5c40\u6570\u636e\u901a\u8fc7 Context \u901a\u4fe1\u518d\u9002\u5408\u4e0d\u8fc7 \n- **\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f**: \u53d1\u5e03\u8005\u53d1\u5e03\u4e8b\u4ef6\uff0c\u8ba2\u9605\u8005\u76d1\u542c\u4e8b\u4ef6\u5e76\u505a\u51fa\u53cd\u5e94,\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f15\u2f0aevent\u6a21\u5757\u8fdb\u2f8f\u901a\u4fe1 \n- **\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u2f2f\u5177**: \u501f\u52a9Redux\u6216\u8005Mobx\u7b49\u5168\u5c40\u72b6\u6001\u7ba1\u7406\u2f2f\u5177\u8fdb\u2f8f\u901a\u4fe1,\u8fd9\u79cd\u2f2f\u5177\u4f1a\u7ef4\u62a4\u2f00\u4e2a\u5168\u5c40\u72b6\u6001\u4e2d\u2f3cStore,\u5e76\u6839\u636e\u4e0d\u540c\u7684\u4e8b\u4ef6\u4ea7\u2f63\u65b0\u7684\u72b6\u6001\n\n## \u4e94\u3001\u8def\u7531\n\n### 1. React-Router\u7684\u5b9e\u73b0\u539f\u7406\u662f\u4ec0\u4e48\uff1f\n\n\u5ba2\u6237\u7aef\u8def\u7531\u5b9e\u73b0\u7684\u601d\u60f3\uff1a\n\n- \u57fa\u4e8e hash \u7684\u8def\u7531\uff1a\u901a\u8fc7\u76d1\u542c`hashchange`\u4e8b\u4ef6\uff0c\u611f\u77e5 hash \u7684\u53d8\u5316\n  - \u6539\u53d8 hash \u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 location.hash=xxx\n- \u57fa\u4e8e H5 history \u8def\u7531\uff1a\n  - \u6539\u53d8 url \u53ef\u4ee5\u901a\u8fc7 history.pushState \u548c resplaceState \u7b49\uff0c\u4f1a\u5c06URL\u538b\u5165\u5806\u6808\uff0c\u540c\u65f6\u80fd\u591f\u5e94\u7528 `history.go()` \u7b49 API\n  - \u76d1\u542c url \u7684\u53d8\u5316\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u89e6\u53d1\u5b9e\u73b0\n\n\n\n**react-router \u5b9e\u73b0\u7684\u601d\u60f3\uff1a**\n\n- \u57fa\u4e8e `history` \u5e93\u6765\u5b9e\u73b0\u4e0a\u8ff0\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u8def\u7531\u5b9e\u73b0\u601d\u60f3\uff0c\u5e76\u4e14\u80fd\u591f\u4fdd\u5b58\u5386\u53f2\u8bb0\u5f55\u7b49\uff0c\u78e8\u5e73\u6d4f\u89c8\u5668\u5dee\u5f02\uff0c\u4e0a\u5c42\u65e0\u611f\u77e5\n- \u901a\u8fc7\u7ef4\u62a4\u7684\u5217\u8868\uff0c\u5728\u6bcf\u6b21 URL \u53d1\u751f\u53d8\u5316\u7684\u56de\u6536\uff0c\u901a\u8fc7\u914d\u7f6e\u7684 \u8def\u7531\u8def\u5f84\uff0c\u5339\u914d\u5230\u5bf9\u5e94\u7684 Component\uff0c\u5e76\u4e14 render\n\n### 2. \u5982\u4f55\u914d\u7f6e React-Router \u5b9e\u73b0\u8def\u7531\u5207\u6362\n\n**\uff081\uff09\u4f7f\u7528`<Route>` \u7ec4\u4ef6**\n\n\u8def\u7531\u5339\u914d\u662f\u901a\u8fc7\u6bd4\u8f83 `<Route>` \u7684 path \u5c5e\u6027\u548c\u5f53\u524d\u5730\u5740\u7684 pathname \u6765\u5b9e\u73b0\u7684\u3002\u5f53\u4e00\u4e2a `<Route>` \u5339\u914d\u6210\u529f\u65f6\uff0c\u5b83\u5c06\u6e32\u67d3\u5176\u5185\u5bb9\uff0c\u5f53\u5b83\u4e0d\u5339\u914d\u65f6\u5c31\u4f1a\u6e32\u67d3 null\u3002\u6ca1\u6709\u8def\u5f84\u7684 `<Route>` \u5c06\u59cb\u7ec8\u88ab\u5339\u914d\u3002\n\n```javascript\n// when location = { pathname: '/about' }\n<Route path='/about' component={About}/> // renders <About/>\n<Route path='/contact' component={Contact}/> // renders null\n<Route component={Always}/> // renders <Always/>\n```\n\n**\uff082\uff09\u7ed3\u5408\u4f7f\u7528 `<Switch>` \u7ec4\u4ef6\u548c `<Route>` \u7ec4\u4ef6**\n\n`<Switch>` \u7528\u4e8e\u5c06 `<Route>` \u5206\u7ec4\u3002\n\n```javascript\n<Switch>\n    <Route exact path=\"/\" component={Home} />\n    <Route path=\"/about\" component={About} />\n    <Route path=\"/contact\" component={Contact} />\n</Switch>\n```\n\n`<Switch>` \u4e0d\u662f\u5206\u7ec4 `<Route>` \u6240\u5fc5\u987b\u7684\uff0c\u4f46\u4ed6\u901a\u5e38\u5f88\u6709\u7528\u3002 \u4e00\u4e2a `<Switch>` \u4f1a\u904d\u5386\u5176\u6240\u6709\u7684\u5b50 `<Route>`\u5143\u7d20\uff0c\u5e76\u4ec5\u6e32\u67d3\u4e0e\u5f53\u524d\u5730\u5740\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002\n\n**\uff083\uff09\u4f7f\u7528 `<Link>\u3001 <NavLink>\u3001<Redirect>` \u7ec4\u4ef6**\n\n`<Link>` \u7ec4\u4ef6\u6765\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u521b\u5efa\u94fe\u63a5\u3002\u65e0\u8bba\u4f60\u5728\u4f55\u5904\u6e32\u67d3\u4e00\u4e2a`<Link>` \uff0c\u90fd\u4f1a\u5728\u5e94\u7528\u7a0b\u5e8f\u7684 HTML \u4e2d\u6e32\u67d3\u951a\uff08`<a>`\uff09\u3002\n\n```javascript\n<Link to=\"/\">Home</Link>   \n// <a href='/'>Home</a>\n```\n\n<NavLink> \u662f\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\u7684 <Link> \u5f53\u5b83\u7684 to\u5c5e\u6027\u4e0e\u5f53\u524d\u5730\u5740\u5339\u914d\u65f6\uff0c\u53ef\u4ee5\u5c06\u5176\u5b9a\u4e49\u4e3a\"\u6d3b\u8dc3\u7684\"\u3002\n\n```javascript\n// location = { pathname: '/react' }\n<NavLink to=\"/react\" activeClassName=\"hurray\">\n    React\n</NavLink>\n// <a href='/react' className='hurray'>React</a>\n```\n\n\u5f53\u6211\u4eec\u60f3\u5f3a\u5236\u5bfc\u822a\u65f6\uff0c\u53ef\u4ee5\u6e32\u67d3\u4e00\u4e2a`<Redirect>`\uff0c\u5f53\u4e00\u4e2a`<Redirect>`\u6e32\u67d3\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528\u5b83\u7684to\u5c5e\u6027\u8fdb\u884c\u5b9a\u5411\u3002\n\n### 3. React-Router\u600e\u4e48\u8bbe\u7f6e\u91cd\u5b9a\u5411\uff1f\n\n\u4f7f\u7528`<Redirect>`\u7ec4\u4ef6\u5b9e\u73b0\u8def\u7531\u7684\u91cd\u5b9a\u5411\uff1a\n\n```javascript\n<Switch>\n  <Redirect from='/users/:id' to='/users/profile/:id'/>\n  <Route path='/users/profile/:id' component={Profile}/>\n</Switch>\n```\n\n\u5f53\u8bf7\u6c42 `/users/:id` \u88ab\u91cd\u5b9a\u5411\u53bb `'/users/profile/:id'`\uff1a\n\n- \u5c5e\u6027 `from: string`\uff1a\u9700\u8981\u5339\u914d\u7684\u5c06\u8981\u88ab\u91cd\u5b9a\u5411\u8def\u5f84\u3002\n- \u5c5e\u6027 `to: string`\uff1a\u91cd\u5b9a\u5411\u7684 URL \u5b57\u7b26\u4e32\n- \u5c5e\u6027 `to: object`\uff1a\u91cd\u5b9a\u5411\u7684 location \u5bf9\u8c61\n- \u5c5e\u6027 `push: bool`\uff1a\u82e5\u4e3a\u771f\uff0c\u91cd\u5b9a\u5411\u64cd\u4f5c\u5c06\u4f1a\u628a\u65b0\u5730\u5740\u52a0\u5165\u5230\u8bbf\u95ee\u5386\u53f2\u8bb0\u5f55\u91cc\u9762\uff0c\u5e76\u4e14\u65e0\u6cd5\u56de\u9000\u5230\u524d\u9762\u7684\u9875\u9762\u3002\n\n### 4. react-router \u91cc\u7684 Link \u6807\u7b7e\u548c a \u6807\u7b7e\u7684\u533a\u522b\n\n\u4ece\u6700\u7ec8\u6e32\u67d3\u7684 DOM \u6765\u770b\uff0c\u8fd9\u4e24\u8005\u90fd\u662f\u94fe\u63a5\uff0c\u90fd\u662f \u6807\u7b7e\uff0c\u533a\u522b\u662f\u2236 \n`<Link>`\u662freact-router \u91cc\u5b9e\u73b0\u8def\u7531\u8df3\u8f6c\u7684\u94fe\u63a5\uff0c\u4e00\u822c\u914d\u5408`<Route>` \u4f7f\u7528\uff0creact-router\u63a5\u7ba1\u4e86\u5176\u9ed8\u8ba4\u7684\u94fe\u63a5\u8df3\u8f6c\u884c\u4e3a\uff0c\u533a\u522b\u4e8e\u4f20\u7edf\u7684\u9875\u9762\u8df3\u8f6c\uff0c`<Link>` \u7684\u201c\u8df3\u8f6c\u201d\u884c\u4e3a\u53ea\u4f1a\u89e6\u53d1\u76f8\u5339\u914d\u7684`<Route>`\u5bf9\u5e94\u7684\u9875\u9762\u5185\u5bb9\u66f4\u65b0\uff0c\u800c\u4e0d\u4f1a\u5237\u65b0\u6574\u4e2a\u9875\u9762\u3002\n\n\n`<Link>`\u505a\u4e863\u4ef6\u4e8b\u60c5:\n\n- \u6709onclick\u90a3\u5c31\u6267\u884conclick\n- click\u7684\u65f6\u5019\u963b\u6b62a\u6807\u7b7e\u9ed8\u8ba4\u4e8b\u4ef6\n- \u6839\u636e\u8df3\u8f6chref(\u5373\u662fto)\uff0c\u7528history (web\u524d\u7aef\u8def\u7531\u4e24\u79cd\u65b9\u5f0f\u4e4b\u4e00\uff0chistory & hash)\u8df3\u8f6c\uff0c\u6b64\u65f6\u53ea\u662f\u94fe\u63a5\u53d8\u4e86\uff0c\u5e76\u6ca1\u6709\u5237\u65b0\u9875\u9762\u800c`<a>`\u6807\u7b7e\u5c31\u662f\u666e\u901a\u7684\u8d85\u94fe\u63a5\u4e86\uff0c\u7528\u4e8e\u4ece\u5f53\u524d\u9875\u9762\u8df3\u8f6c\u5230href\u6307\u5411\u7684\u53e6\u4e00 \u4e2a\u9875\u9762(\u975e\u951a\u70b9\u60c5\u51b5)\u3002\n\n\n\na\u6807\u7b7e\u9ed8\u8ba4\u4e8b\u4ef6\u7981\u6389\u4e4b\u540e\u505a\u4e86\u4ec0\u4e48\u624d\u5b9e\u73b0\u4e86\u8df3\u8f6c?\n\n```javascript\nlet domArr = document.getElementsByTagName('a')\n[...domArr].forEach(item=>{\n    item.addEventListener('click',function () {\n        location.href = this.href\n    })\n})\n```\n\n### 5. React-Router\u5982\u4f55\u83b7\u53d6URL\u7684\u53c2\u6570\u548c\u5386\u53f2\u5bf9\u8c61\uff1f\n\n**\uff081\uff09\u83b7\u53d6URL\u7684\u53c2\u6570**\n\n- **get\u4f20\u503c**\n\n\u8def\u7531\u914d\u7f6e\u8fd8\u662f\u666e\u901a\u7684\u914d\u7f6e\uff0c\u5982\uff1a`'admin'`\uff0c\u4f20\u53c2\u65b9\u5f0f\u5982\uff1a`'admin?id='1111''`\u3002\u901a\u8fc7`this.props.location.search`\u83b7\u53d6url\u83b7\u53d6\u5230\u4e00\u4e2a\u5b57\u7b26\u4e32`'?id='1111'`\n\u53ef\u4ee5\u7528url\uff0cqs\uff0cquerystring\uff0c\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684api URLSearchParams\u5bf9\u8c61\u6216\u8005\u81ea\u5df1\u5c01\u88c5\u7684\u65b9\u6cd5\u53bb\u89e3\u6790\u51faid\u7684\u503c\u3002\n\n- **\u52a8\u6001\u8def\u7531\u4f20\u503c**\n\n\u8def\u7531\u9700\u8981\u914d\u7f6e\u6210\u52a8\u6001\u8def\u7531\uff1a\u5982`path='/admin/:id'`\uff0c\u4f20\u53c2\u65b9\u5f0f\uff0c\u5982`'admin/111'`\u3002\u901a\u8fc7`this.props.match.params.id` \u53d6\u5f97url\u4e2d\u7684\u52a8\u6001\u8def\u7531id\u90e8\u5206\u7684\u503c\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u53ef\u4ee5\u901a\u8fc7`useParams\uff08Hooks\uff09`\u6765\u83b7\u53d6\n\n- **\u901a\u8fc7query\u6216state\u4f20\u503c**\n\n\u4f20\u53c2\u65b9\u5f0f\u5982\uff1a\u5728Link\u7ec4\u4ef6\u7684to\u5c5e\u6027\u4e2d\u53ef\u4ee5\u4f20\u9012\u5bf9\u8c61`{pathname:'/admin',query:'111',state:'111'};`\u3002\u901a\u8fc7`this.props.location.state`\u6216`this.props.location.query`\u6765\u83b7\u53d6\u5373\u53ef\uff0c\u4f20\u9012\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u5bf9\u8c61\u3001\u6570\u7ec4\u7b49\uff0c\u4f46\u662f\u5b58\u5728\u7f3a\u70b9\u5c31\u662f\u53ea\u8981\u5237\u65b0\u9875\u9762\uff0c\u53c2\u6570\u5c31\u4f1a\u4e22\u5931\u3002\n\n**\uff082\uff09\u83b7\u53d6\u5386\u53f2\u5bf9\u8c61**\n\n- \u5982\u679cReact >= 16.8 \u65f6\u53ef\u4ee5\u4f7f\u7528 React Router\u4e2d\u63d0\u4f9b\u7684Hooks\n\n```javascript\nimport { useHistory } from \"react-router-dom\";\nlet history = useHistory();\n```\n\n2.\u4f7f\u7528this.props.history\u83b7\u53d6\u5386\u53f2\u5bf9\u8c61\n\n```javascript\nlet history = this.props.history;\n```\n\n### 6. React-Router 4\u600e\u6837\u5728\u8def\u7531\u53d8\u5316\u65f6\u91cd\u65b0\u6e32\u67d3\u540c\u4e00\u4e2a\u7ec4\u4ef6\uff1f\n\n\u5f53\u8def\u7531\u53d8\u5316\u65f6\uff0c\u5373\u7ec4\u4ef6\u7684props\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f1a\u8c03\u7528componentWillReceiveProps\u7b49\u751f\u547d\u5468\u671f\u94a9\u5b50\u3002\u90a3\u9700\u8981\u505a\u7684\u53ea\u662f\uff1a \u5f53\u8def\u7531\u6539\u53d8\u65f6\uff0c\u6839\u636e\u8def\u7531\uff0c\u4e5f\u53bb\u8bf7\u6c42\u6570\u636e\uff1a\n\n```javascript\nclass NewsList extends Component {\n  componentDidMount () {\n     this.fetchData(this.props.location);\n  }\n  \n  fetchData(location) {\n    const type = location.pathname.replace('/', '') || 'top'\n    this.props.dispatch(fetchListData(type))\n  }\n  componentWillReceiveProps(nextProps) {\n     if (nextProps.location.pathname != this.props.location.pathname) {\n         this.fetchData(nextProps.location);\n     } \n  }\n  render () {\n    ...\n  }\n}\n```\n\n\u5229\u7528\u751f\u547d\u5468\u671fcomponentWillReceiveProps\uff0c\u8fdb\u884c\u91cd\u65b0render\u7684\u9884\u5904\u7406\u64cd\u4f5c\u3002\n\n### 7. React-Router\u7684\u8def\u7531\u6709\u51e0\u79cd\u6a21\u5f0f\uff1f\n\nReact-Router \u652f\u6301\u4f7f\u7528 hash\uff08\u5bf9\u5e94 HashRouter\uff09\u548c browser\uff08\u5bf9\u5e94 BrowserRouter\uff09 \u4e24\u79cd\u8def\u7531\u89c4\u5219\uff0c react-router-dom \u63d0\u4f9b\u4e86 BrowserRouter \u548c HashRouter \u4e24\u4e2a\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5e94\u7528\u7684 UI \u548c URL \u540c\u6b65\uff1a\n\n- BrowserRouter \u521b\u5efa\u7684 URL \u683c\u5f0f\uff1a[http://xxx.com/path](http://xxx.com/path)\n- HashRouter \u521b\u5efa\u7684 URL \u683c\u5f0f\uff1a[http://xxx.com/#/path](http://xxx.com/#/path)\n\n\n\n**\uff081\uff09BrowserRouter**\n\n\u5b83\u4f7f\u7528 HTML5 \u63d0\u4f9b\u7684 history API\uff08pushState\u3001replaceState \u548c popstate \u4e8b\u4ef6\uff09\u6765\u4fdd\u6301 UI \u548c URL \u7684\u540c\u6b65\u3002\u7531\u6b64\u53ef\u4ee5\u770b\u51fa\uff0c**BrowserRouter \u662f\u4f7f\u7528 HTML 5 \u7684 history API \u6765\u63a7\u5236\u8def\u7531\u8df3\u8f6c\u7684\uff1a**\n\n```javascript\n<BrowserRouter\n    basename={string}\n    forceRefresh={bool}\n    getUserConfirmation={func}\n    keyLength={number}\n/>\n```\n\n**\u5176\u4e2d\u7684\u5c5e\u6027\u5982\u4e0b\uff1a**\n\n- basename \u6240\u6709\u8def\u7531\u7684\u57fa\u51c6 URL\u3002basename \u7684\u6b63\u786e\u683c\u5f0f\u662f\u524d\u9762\u6709\u4e00\u4e2a\u524d\u5bfc\u659c\u6760\uff0c\u4f46\u4e0d\u80fd\u6709\u5c3e\u90e8\u659c\u6760\uff1b\n\n```javascript\n<BrowserRouter basename=\"/calendar\">\n    <Link to=\"/today\" />\n</BrowserRouter>\n```\n\n\u7b49\u540c\u4e8e\n\n```javascript\n<a href=\"/calendar/today\" />\n```\n\n- forceRefresh \u5982\u679c\u4e3a true\uff0c\u5728\u5bfc\u822a\u7684\u8fc7\u7a0b\u4e2d\u6574\u4e2a\u9875\u9762\u5c06\u4f1a\u5237\u65b0\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u5728\u4e0d\u652f\u6301 HTML5 history API \u7684\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528\u6b64\u529f\u80fd\uff1b\n- getUserConfirmation \u7528\u4e8e\u786e\u8ba4\u5bfc\u822a\u7684\u51fd\u6570\uff0c\u9ed8\u8ba4\u4f7f\u7528 window.confirm\u3002\u4f8b\u5982\uff0c\u5f53\u4ece /a \u5bfc\u822a\u81f3 /b \u65f6\uff0c\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684 confirm \u51fd\u6570\u5f39\u51fa\u4e00\u4e2a\u63d0\u793a\uff0c\u7528\u6237\u70b9\u51fb\u786e\u5b9a\u540e\u624d\u8fdb\u884c\u5bfc\u822a\uff0c\u5426\u5219\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff1b\n\n```javascript\n// \u8fd9\u662f\u9ed8\u8ba4\u7684\u786e\u8ba4\u51fd\u6570\nconst getConfirmation = (message, callback) => {\n  const allowTransition = window.confirm(message);\n  callback(allowTransition);\n}\n<BrowserRouter getUserConfirmation={getConfirmation} />\n```\n\n> \u9700\u8981\u914d\u5408`<Prompt>` \u4e00\u8d77\u4f7f\u7528\u3002\n\n- KeyLength \u7528\u6765\u8bbe\u7f6e Location.Key \u7684\u957f\u5ea6\u3002\n\n\n\n**\uff082\uff09HashRouter**\n\n\u4f7f\u7528 URL \u7684 hash \u90e8\u5206\uff08\u5373 window.location.hash\uff09\u6765\u4fdd\u6301 UI \u548c URL \u7684\u540c\u6b65\u3002\u7531\u6b64\u53ef\u4ee5\u770b\u51fa\uff0c**HashRouter \u662f\u901a\u8fc7 URL \u7684 hash \u5c5e\u6027\u6765\u63a7\u5236\u8def\u7531\u8df3\u8f6c\u7684\uff1a**\n\n```javascript\n<HashRouter\n    basename={string}\n    getUserConfirmation={func}\n    hashType={string}  \n/>\n```\n\n**\u5176\u53c2\u6570\u5982\u4e0b**\uff1a\n\n- basename, getUserConfirmation \u548c `BrowserRouter` \u529f\u80fd\u4e00\u6837\uff1b\n- hashType window.location.hash \u4f7f\u7528\u7684 hash \u7c7b\u578b\uff0c\u6709\u5982\u4e0b\u51e0\u79cd\uff1a\n  - slash - \u540e\u9762\u8ddf\u4e00\u4e2a\u659c\u6760\uff0c\u4f8b\u5982 #/ \u548c #/sunshine/lollipops\uff1b\n  - noslash - \u540e\u9762\u6ca1\u6709\u659c\u6760\uff0c\u4f8b\u5982 # \u548c #sunshine/lollipops\uff1b\n  - hashbang - Google \u98ce\u683c\u7684 ajax crawlable\uff0c\u4f8b\u5982 #!/ \u548c #!/sunshine/lollipops\u3002\n\n### 8. React-Router 4\u7684Switch\u6709\u4ec0\u4e48\u7528\uff1f\n\nSwitch \u901a\u5e38\u88ab\u7528\u6765\u5305\u88f9 Route\uff0c\u7528\u4e8e\u6e32\u67d3\u4e0e\u8def\u5f84\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u5b50 `<Route>` \u6216 `<Redirect>`\uff0c\u5b83\u91cc\u9762\u4e0d\u80fd\u653e\u5176\u4ed6\u5143\u7d20\u3002\n\n\n\u5047\u5982\u4e0d\u52a0 `<Switch>` \uff1a\n\n```javascript\nimport { Route } from 'react-router-dom'\n\n<Route path=\"/\" component={Home}></Route>\n<Route path=\"/login\" component={Login}></Route>\n```\n\nRoute \u7ec4\u4ef6\u7684 path \u5c5e\u6027\u7528\u4e8e\u5339\u914d\u8def\u5f84\uff0c\u56e0\u4e3a\u9700\u8981\u5339\u914d `/` \u5230 `Home`\uff0c\u5339\u914d `/login` \u5230 `Login`\uff0c\u6240\u4ee5\u9700\u8981\u4e24\u4e2a Route\uff0c\u4f46\u662f\u4e0d\u80fd\u8fd9\u4e48\u5199\u3002\u8fd9\u6837\u5199\u7684\u8bdd\uff0c\u5f53 URL \u7684 path \u4e3a \u201c/login\u201d \u65f6\uff0c`<Route path=\"/\" />`\u548c`<Route path=\"/login\" />` \u90fd\u4f1a\u88ab\u5339\u914d\uff0c\u56e0\u6b64\u9875\u9762\u4f1a\u5c55\u793a Home \u548c Login \u4e24\u4e2a\u7ec4\u4ef6\u3002\u8fd9\u65f6\u5c31\u9700\u8981\u501f\u52a9 `<Switch>` \u6765\u505a\u5230\u53ea\u663e\u793a\u4e00\u4e2a\u5339\u914d\u7ec4\u4ef6\uff1a\n\n```javascript\nimport { Switch, Route} from 'react-router-dom'\n    \n<Switch>\n    <Route path=\"/\" component={Home}></Route>\n    <Route path=\"/login\" component={Login}></Route>\n</Switch>\n```\n\n\u6b64\u65f6\uff0c\u518d\u8bbf\u95ee \u201c/login\u201d \u8def\u5f84\u65f6\uff0c\u5374\u53ea\u663e\u793a\u4e86 Home \u7ec4\u4ef6\u3002\u8fd9\u662f\u5c31\u7528\u5230\u4e86exact\u5c5e\u6027\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u7cbe\u786e\u5339\u914d\u8def\u5f84\uff0c\u7ecf\u5e38\u4e0e`<Switch>` \u8054\u5408\u4f7f\u7528\u3002\u53ea\u6709\u5f53 URL \u548c\u8be5 `<Route>` \u7684 path \u5c5e\u6027\u5b8c\u5168\u4e00\u81f4\u7684\u60c5\u51b5\u4e0b\u624d\u80fd\u5339\u914d\u4e0a\uff1a\n\n```javascript\nimport { Switch, Route} from 'react-router-dom'\n   \n<Switch>\n   <Route exact path=\"/\" component={Home}></Route>\n   <Route exact path=\"/login\" component={Login}></Route>\n</Switch>\n```\n\n**\u6ce8\uff1a** \u7531\u4e8e\u6587\u7ae0\u5b57\u6570\u9650\u5236\uff0c\u5269\u4f59\u5185\u5bb9\u8bf7\u89c1\u4e0b\u7bc7\u3002\n"}, "author_user_info": {"user_id": "3544481220801815", "user_name": "CUGGZ", "company": "\u5728\u7ebf\u6559\u80b2", "job_title": "\u524d\u7aef\u5f00\u53d1\u5de5\u7a0b\u5e08", "avatar_large": "https://sf1-ttcdn-tos.pstatp.com/img/user-avatar/61130727b6e6bf9ed813434aeaed8ac3~300x300.image", "level": 4, "description": "\u89c6\u91ce\u6240\u53ca\uff0c\u552f\u6709\u524d\u7aef\uff01", "followee_count": 30, "follower_count": 1635, "post_article_count": 45, "digg_article_count": 73, "got_digg_count": 4552, "got_view_count": 275765, "post_shortmsg_count": 1, "digg_shortmsg_count": 6, "isfollowed": false, "favorable_author": 1, "power": 7309, "study_point": 0, "university": {"university_id": "0", "name": "", "logo": ""}, "major": {"major_id": "0", "parent_id": "0", "name": ""}, "student_status": 0, "select_event_count": 0, "select_online_course_count": 0, "identity": 0, "is_select_annual": false, "select_annual_rank": 0, "annual_list_type": 0, "extraMap": {}, "is_logout": 0}, "category": {"category_id": "6809637767543259144", "category_name": "\u524d\u7aef", "category_url": "frontend", "rank": 2, "back_ground": "https://lc-mhke0kuv.cn-n1.lcfile.com/8c95587526f346c0.png", "icon": "https://lc-mhke0kuv.cn-n1.lcfile.com/1c40f5eaba561e32.png", "ctime": 1457483942, "mtime": 1432503190, "show_type": 3, "item_type": 2, "promote_tag_cap": 4, "promote_priority": 2}, "tags": [{"id": 2546524, "tag_id": "6809640404791590919", "tag_name": "\u9762\u8bd5", "color": "#545454", "icon": "https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/85dd1ce8008458ac220c.png~tplv-t2oaga2asx-image.image", "back_ground": "", "show_navi": 0, "ctime": 1435971430, "mtime": 1632305205, "id_type": 9, "tag_alias": "", "post_article_count": 15897, "concern_user_count": 349675}, {"id": 2546526, "tag_id": "6809640407484334093", "tag_name": "\u524d\u7aef", "color": "#60ADFF", "icon": "https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/leancloud-assets/bac28828a49181c34110.png~tplv-t2oaga2asx-image.image", "back_ground": "", "show_navi": 1, "ctime": 1435971546, "mtime": 1632306517, "id_type": 9, "tag_alias": "", "post_article_count": 90162, "concern_user_count": 527783}], "user_interact": {"id": 6941546135827775525, "omitempty": 2, "user_id": 0, "is_digg": false, "is_follow": false, "is_collect": false}, "org": {"org_info": null, "org_user": null, "is_followed": false}, "req_id": "202109221836050102122040434300DB8D", "status": {"push_status": 0}}